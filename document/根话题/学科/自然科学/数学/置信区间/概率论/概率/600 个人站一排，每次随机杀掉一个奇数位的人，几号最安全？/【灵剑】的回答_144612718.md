# 600 个人站一排，每次随机杀掉一个奇数位的人，几号最安全？
- 点赞数：6857
- 更新时间：2017年02月05日23时19分45秒
- 回答url：https://www.zhihu.com/question/55445739/answer/144612718
<body>
 <p data-pid="skrXGZSQ"><b>修正之后的结论：存活回合数期望最大的应该是2，但最可能成为最后一个存活的人的是600。<br></b></p>
 <p data-pid="E3e9mfTd">我们来研究M个人杀N次的情况下，每个位置被杀的概率<img src="https://www.zhihu.com/equation?tex=P%28k%3BM%2CN%29" alt="P(k;M,N)" eeimg="1">。</p>
 <p data-pid="YK4e4gAN">可以用递推法计算。首先2个人杀一次的情况下，2一定是最好的，<img src="https://www.zhihu.com/equation?tex=P%281%3B2%2C1%29+%3D+1" alt="P(1;2,1) = 1" eeimg="1">，<img src="https://www.zhihu.com/equation?tex=P%282%3B2%2C1%29+%3D+0" alt="P(2;2,1) = 0" eeimg="1">。M个人杀一次的情况下，偶数被杀概率为0，奇数被杀概率相等：<img src="https://www.zhihu.com/equation?tex=P%282k%3B+M%2C+1%29+%3D+0" alt="P(2k; M, 1) = 0" eeimg="1">，<img src="https://www.zhihu.com/equation?tex=P%282k%2B1%3B+M%2C+1%29+%3D+%5Cfrac%7B1%7D%7B%5Clceil%5Cfrac%7BM%7D%7B2%7D%5Crceil%7D" alt="P(2k+1; M, 1) = \frac{1}{\lceil\frac{M}{2}\rceil}" eeimg="1"></p>
 <p data-pid="Zyi34Dh6">考虑M+1个人杀N+1次的情况，则很容易得到：</p>
 <p data-pid="jdKkLpLd"><img src="https://www.zhihu.com/equation?tex=P%282k%3B+M%2B1%2C+N%2B1%29+%3D+%5Cfrac%7Bk%7D%7B%5Clceil+%5Cfrac%7BM+%2B+1%7D%7B2%7D+%5Crceil%7D+P%282k-1%3B+M%2C+N%29+%2B+%281-%5Cfrac%7Bk%7D%7B%5Clceil+%5Cfrac%7BM+%2B+1%7D%7B2%7D+%5Crceil%7D%29+P%282k%3B+M%2C+N%29" alt="P(2k; M+1, N+1) = \frac{k}{\lceil \frac{M + 1}{2} \rceil} P(2k-1; M, N) + (1-\frac{k}{\lceil \frac{M + 1}{2} \rceil}) P(2k; M, N)" eeimg="1"></p>
 <p data-pid="js-8efr9"><img src="https://www.zhihu.com/equation?tex=P%282k+%2B+1%3B+M%2B1%2C+N%2B1%29+%3D+%5Cfrac%7B1%7D%7B%5Clceil%5Cfrac%7BM+%2B+1%7D%7B2%7D%5Crceil%7D+%2B+%5Cfrac%7Bk%7D%7B%5Clceil+%5Cfrac%7BM+%2B+1%7D%7B2%7D+%5Crceil%7D+P%282k%3B+M%2C+N%29+%2B+%281-%5Cfrac%7Bk+%2B+1%7D%7B%5Clceil+%5Cfrac%7BM+%2B+1%7D%7B2%7D+%5Crceil%7D%29+P%282k%2B1%3B+M%2C+N%29" alt="P(2k + 1; M+1, N+1) = \frac{1}{\lceil\frac{M + 1}{2}\rceil} + \frac{k}{\lceil \frac{M + 1}{2} \rceil} P(2k; M, N) + (1-\frac{k + 1}{\lceil \frac{M + 1}{2} \rceil}) P(2k+1; M, N)" eeimg="1"></p>
 <p data-pid="kMSNZwO0">我们定性分析一下这个式子，无论奇数还是偶数，都从(M,N)的情况中，继承自己和前一项的“阵亡”概率，同时补上自己是奇数（有被杀概率）或者是偶数（无被杀概率）的修正值。k越小，前一项加权越小，后一项加权越大。奇数项有额外的加成。这样，k比较小的情况下，奇数项和偶数项的差异越来越大；而k越大，由于前后两项平均、甚至前项比例超过后项的效果，奇数项和偶数项的差距变得越来越小。</p>
 <p data-pid="nMLPUws1">迭代下去的结果大致是一个上下波动然后衰减的样式：1的被杀概率最大，2最小，3又变大但小于1，4又变小但大于2，依次类推。M和N都比较大的时候，靠后位置的奇数位置、偶数位置差异变得很小，因为它们经常相互转换。而1永远是奇数；2只有很小的概率会转换成1。N越大，存活概率的绝对值都变小，但存活概率与前后位置的关系变得更大，2的相对安全优势也越明显。如果考虑最后一个存活的人的比例的话，N很大的情况下，2的优势会很明显。</p>
 <p data-pid="f_esRcL-">====================================================================</p>
 <p data-pid="6TANmSqo">事实证明全凭臆想是不好的……这里忽略了一件事，一开始在2，和最后几轮在2，意义是完全不同的。一开始奇数多，每个奇数被杀概率比较小，而最后几轮被杀概率严重提高，而一开始在2的，很容易就滑到1去了。还是老老实实算一下递推式……</p>
 <p data-pid="qiwFp08w">存活概率：</p>
 <figure>
  <img src="https://picx.zhimg.com/50/v2-2cc2fd237114e42cbfbeeac513df3b07_720w.jpg?source=1940ef5c" data-rawwidth="640" data-rawheight="480" data-original-token="v2-2cc2fd237114e42cbfbeeac513df3b07" class="origin_image zh-lightbox-thumb" width="640" data-original="https://pica.zhimg.com/v2-2cc2fd237114e42cbfbeeac513df3b07_r.jpg?source=1940ef5c">
 </figure>
 <p data-pid="K2avCiqR">杀至最后一人的存活概率。这也太直了吧！</p>
 <p data-pid="4NyTCTJA">但其实并不是完美直线，而是奇数偶数一组跳变的，1的存活概率是0，（2,3）的存活概率几乎一样，（4,5）的存活概率几乎一样，依次类推，所以最后存活概率最大的是600，它存活的概率几乎就是1/300。</p>
 <p data-pid="uWl6M-Ki">实际上似乎有<img src="https://www.zhihu.com/equation?tex=P%282k%3B+M%2C+M-1%29+%3D+P%282k%2B1%3B+M%2C+M-1%29+%3D+1+-+%5Cfrac%7Bk%7D%7B%5Clceil+%5Cfrac%7BM%7D%7B2%7D+%5Crceil%5Clceil+%5Cfrac%7BM-1%7D%7B2%7D+%5Crceil%7D" alt="P(2k; M, M-1) = P(2k+1; M, M-1) = 1 - \frac{k}{\lceil \frac{M}{2} \rceil\lceil \frac{M-1}{2} \rceil}" eeimg="1"></p>
 <p data-pid="N9AdpuK2">我们代回去检验一下：</p>
 <p data-pid="fx7arv3w"><img src="https://www.zhihu.com/equation?tex=P%282k%3B+M%2B1%2C+M%29+%3D+%5Cfrac%7Bk%7D%7B%5Clceil+%5Cfrac%7BM+%2B+1%7D%7B2%7D+%5Crceil%7D+P%282k-1%3B+M%2C+M+-+1%29+%2B+%281-%5Cfrac%7Bk%7D%7B%5Clceil+%5Cfrac%7BM+%2B+1%7D%7B2%7D+%5Crceil%7D%29+P%282k%3B+M%2C+M+-+1%29" alt="P(2k; M+1, M) = \frac{k}{\lceil \frac{M + 1}{2} \rceil} P(2k-1; M, M - 1) + (1-\frac{k}{\lceil \frac{M + 1}{2} \rceil}) P(2k; M, M - 1)" eeimg="1"></p>
 <p data-pid="z4rvRk4c"><img src="https://www.zhihu.com/equation?tex=%3D+%5Cfrac%7Bk%7D%7B%5Clceil+%5Cfrac%7BM+%2B+1%7D%7B2%7D+%5Crceil%7D+%281+-+%5Cfrac%7Bk+-+1%7D%7B%5Clceil+%5Cfrac%7BM%7D%7B2%7D+%5Crceil%5Clceil+%5Cfrac%7BM-1%7D%7B2%7D+%5Crceil%7D%29+%2B+%281-%5Cfrac%7Bk%7D%7B%5Clceil+%5Cfrac%7BM+%2B+1%7D%7B2%7D+%5Crceil%7D%29%281+-+%5Cfrac%7Bk%7D%7B%5Clceil+%5Cfrac%7BM%7D%7B2%7D+%5Crceil%5Clceil+%5Cfrac%7BM-1%7D%7B2%7D+%5Crceil%7D%29" alt="= \frac{k}{\lceil \frac{M + 1}{2} \rceil} (1 - \frac{k - 1}{\lceil \frac{M}{2} \rceil\lceil \frac{M-1}{2} \rceil}) + (1-\frac{k}{\lceil \frac{M + 1}{2} \rceil})(1 - \frac{k}{\lceil \frac{M}{2} \rceil\lceil \frac{M-1}{2} \rceil})" eeimg="1"></p>
 <p data-pid="CrpoOrCp"><img src="https://www.zhihu.com/equation?tex=%3D+1+-+%5Cfrac%7Bk%7D%7B%5Clceil+%5Cfrac%7BM%7D%7B2%7D+%5Crceil%5Clceil+%5Cfrac%7BM-1%7D%7B2%7D+%5Crceil%7D+%2B+%5Cfrac%7Bk%7D%7B%5Clceil+%5Cfrac%7BM%7D%7B2%7D+%5Crceil%5Clceil+%5Cfrac%7BM-1%7D%7B2%7D+%5Crceil%5Clceil+%5Cfrac%7BM+%2B+1%7D%7B2%7D+%5Crceil%7D" alt="= 1 - \frac{k}{\lceil \frac{M}{2} \rceil\lceil \frac{M-1}{2} \rceil} + \frac{k}{\lceil \frac{M}{2} \rceil\lceil \frac{M-1}{2} \rceil\lceil \frac{M + 1}{2} \rceil}" eeimg="1"></p>
 <p data-pid="V8n87YB-"><img src="https://www.zhihu.com/equation?tex=%3D+1+-+%5Cfrac%7B%28%5Clceil+%5Cfrac%7BM+%2B+1%7D%7B2%7D+%5Crceil+-+1%29k%7D%7B%5Clceil+%5Cfrac%7BM%7D%7B2%7D+%5Crceil%5Clceil+%5Cfrac%7BM-1%7D%7B2%7D+%5Crceil%5Clceil+%5Cfrac%7BM+%2B+1%7D%7B2%7D+%5Crceil%7D" alt="= 1 - \frac{(\lceil \frac{M + 1}{2} \rceil - 1)k}{\lceil \frac{M}{2} \rceil\lceil \frac{M-1}{2} \rceil\lceil \frac{M + 1}{2} \rceil}" eeimg="1"></p>
 <p data-pid="t6gRevHi"><img src="https://www.zhihu.com/equation?tex=%3D+1+-+%5Cfrac%7B%5Clceil+%5Cfrac%7BM+-+1%7D%7B2%7D+%5Crceil+k%7D%7B%5Clceil+%5Cfrac%7BM%7D%7B2%7D+%5Crceil%5Clceil+%5Cfrac%7BM-1%7D%7B2%7D+%5Crceil%5Clceil+%5Cfrac%7BM+%2B+1%7D%7B2%7D+%5Crceil%7D" alt="= 1 - \frac{\lceil \frac{M - 1}{2} \rceil k}{\lceil \frac{M}{2} \rceil\lceil \frac{M-1}{2} \rceil\lceil \frac{M + 1}{2} \rceil}" eeimg="1"></p>
 <p data-pid="QQoikYKC"><img src="https://www.zhihu.com/equation?tex=%3D+1+-+%5Cfrac%7Bk%7D%7B%5Clceil+%5Cfrac%7BM%7D%7B2%7D+%5Crceil%5Clceil+%5Cfrac%7BM+%2B+1%7D%7B2%7D+%5Crceil%7D" alt="= 1 - \frac{k}{\lceil \frac{M}{2} \rceil\lceil \frac{M + 1}{2} \rceil}" eeimg="1"></p>
 <p data-pid="0NZ3euUf"><img src="https://www.zhihu.com/equation?tex=P%282k+%2B+1%3B+M%2B1%3B+M%29+%3D+%5Cfrac%7B1%7D%7B%5Clceil%5Cfrac%7BM+%2B+1%7D%7B2%7D%5Crceil%7D+%2B+%5Cfrac%7Bk%7D%7B%5Clceil+%5Cfrac%7BM+%2B+1%7D%7B2%7D+%5Crceil%7D+P%282k%3B+M%2C+N-1%29+%2B+%281-%5Cfrac%7Bk+%2B+1%7D%7B%5Clceil+%5Cfrac%7BM+%2B+1%7D%7B2%7D+%5Crceil%7D%29+P%282k%2B1%3B+M%2C+N-1%29" alt="P(2k + 1; M+1; M) = \frac{1}{\lceil\frac{M + 1}{2}\rceil} + \frac{k}{\lceil \frac{M + 1}{2} \rceil} P(2k; M, N-1) + (1-\frac{k + 1}{\lceil \frac{M + 1}{2} \rceil}) P(2k+1; M, N-1)" eeimg="1"></p>
 <p data-pid="6ASKnM2P"><img src="https://www.zhihu.com/equation?tex=%3D+%5Cfrac%7B1%7D%7B%5Clceil%5Cfrac%7BM+%2B+1%7D%7B2%7D%5Crceil%7D+%2B+%281-%5Cfrac%7B1%7D%7B%5Clceil+%5Cfrac%7BM+%2B+1%7D%7B2%7D+%5Crceil%7D%29+%281+-+%5Cfrac%7Bk%7D%7B%5Clceil+%5Cfrac%7BM%7D%7B2%7D+%5Crceil%5Clceil+%5Cfrac%7BM-1%7D%7B2%7D+%5Crceil%7D%29" alt="= \frac{1}{\lceil\frac{M + 1}{2}\rceil} + (1-\frac{1}{\lceil \frac{M + 1}{2} \rceil}) (1 - \frac{k}{\lceil \frac{M}{2} \rceil\lceil \frac{M-1}{2} \rceil})" eeimg="1"></p>
 <p data-pid="xIFSznL9"><img src="https://www.zhihu.com/equation?tex=%3D+%5Cfrac%7B1%7D%7B%5Clceil%5Cfrac%7BM+%2B+1%7D%7B2%7D%5Crceil%7D+%2B+%5Cfrac%7B%5Clceil+%5Cfrac%7BM+-+1%7D%7B2%7D+%5Crceil%7D%7B%5Clceil+%5Cfrac%7BM+%2B+1%7D%7B2%7D+%5Crceil%7D%28%5Cfrac%7B%5Clceil+%5Cfrac%7BM%7D%7B2%7D+%5Crceil%5Clceil+%5Cfrac%7BM-1%7D%7B2%7D+%5Crceil+-+k%7D%7B%5Clceil+%5Cfrac%7BM%7D%7B2%7D+%5Crceil%5Clceil+%5Cfrac%7BM-1%7D%7B2%7D+%5Crceil%7D%29" alt="= \frac{1}{\lceil\frac{M + 1}{2}\rceil} + \frac{\lceil \frac{M - 1}{2} \rceil}{\lceil \frac{M + 1}{2} \rceil}(\frac{\lceil \frac{M}{2} \rceil\lceil \frac{M-1}{2} \rceil - k}{\lceil \frac{M}{2} \rceil\lceil \frac{M-1}{2} \rceil})" eeimg="1"></p>
 <p data-pid="CQslbPkJ"><img src="https://www.zhihu.com/equation?tex=%3D+1+-+%5Cfrac%7Bk%7D%7B%5Clceil+%5Cfrac%7BM%7D%7B2%7D+%5Crceil%5Clceil+%5Cfrac%7BM+%2B+1%7D%7B2%7D+%5Crceil%7D" alt="= 1 - \frac{k}{\lceil \frac{M}{2} \rceil\lceil \frac{M + 1}{2} \rceil}" eeimg="1"></p>
 <p data-pid="COUY0yF6">这提示我们也许应该用存活概率来表示递推式，改写一下，用Q(k; M, N)来表示存活概率：</p>
 <p data-pid="VGWKIRx9"><img src="https://www.zhihu.com/equation?tex=Q%282k%3B+M%2B1%2C+N%2B1%29+%3D+%5Cfrac%7Bk%7D%7B%5Clceil+%5Cfrac%7BM+%2B+1%7D%7B2%7D+%5Crceil%7D+Q%282k-1%3B+M%2C+N%29+%2B+%281-%5Cfrac%7Bk%7D%7B%5Clceil+%5Cfrac%7BM+%2B+1%7D%7B2%7D+%5Crceil%7D%29+Q%282k%3B+M%2C+N%29" alt="Q(2k; M+1, N+1) = \frac{k}{\lceil \frac{M + 1}{2} \rceil} Q(2k-1; M, N) + (1-\frac{k}{\lceil \frac{M + 1}{2} \rceil}) Q(2k; M, N)" eeimg="1"></p>
 <p data-pid="qaYKPBTy"><img src="https://www.zhihu.com/equation?tex=Q%282k+%2B+1%3B+M%2B1%2C+N%2B1%29+%3D+%5Cfrac%7Bk%7D%7B%5Clceil+%5Cfrac%7BM+%2B+1%7D%7B2%7D+%5Crceil%7D+Q%282k%3B+M%2C+N%29+%2B+%281-%5Cfrac%7Bk+%2B+1%7D%7B%5Clceil+%5Cfrac%7BM+%2B+1%7D%7B2%7D+%5Crceil%7D%29+Q%282k%2B1%3B+M%2C+N%29" alt="Q(2k + 1; M+1, N+1) = \frac{k}{\lceil \frac{M + 1}{2} \rceil} Q(2k; M, N) + (1-\frac{k + 1}{\lceil \frac{M + 1}{2} \rceil}) Q(2k+1; M, N)" eeimg="1"></p>
 <p data-pid="o30OSZ84">的确可以去掉那个常数项，改写成齐次的递推式。</p>
 <p data-pid="T-mAdu6h">在N不为M-1的时候，得到的结果跟之前的分析基本一致（Q(600,300)）：</p>
 <figure>
  <img src="https://pica.zhimg.com/50/v2-4128eb5b20daee724567eed09301453c_720w.jpg?source=1940ef5c" data-rawwidth="640" data-rawheight="480" data-original-token="v2-4128eb5b20daee724567eed09301453c" class="origin_image zh-lightbox-thumb" width="640" data-original="https://picx.zhimg.com/v2-4128eb5b20daee724567eed09301453c_r.jpg?source=1940ef5c">
 </figure>
 <figure>
  <img src="https://pic1.zhimg.com/50/v2-07d4a36d776d149860334a1c14ac5c1f_720w.jpg?source=1940ef5c" data-rawwidth="640" data-rawheight="480" data-original-token="v2-07d4a36d776d149860334a1c14ac5c1f" class="origin_image zh-lightbox-thumb" width="640" data-original="https://picx.zhimg.com/v2-07d4a36d776d149860334a1c14ac5c1f_r.jpg?source=1940ef5c">
 </figure>
 <p data-pid="RZ5QyTL9">（0实际上是1）</p>
 <p data-pid="d5DlFmfh">当N增大的时候，这个图也有变化，下图是Q(600,500)：</p>
 <figure>
  <img src="https://picx.zhimg.com/50/v2-e3614bce5c682f5923a912b85c875c0e_720w.jpg?source=1940ef5c" data-rawwidth="640" data-rawheight="480" data-original-token="v2-e3614bce5c682f5923a912b85c875c0e" class="origin_image zh-lightbox-thumb" width="640" data-original="https://picx.zhimg.com/v2-e3614bce5c682f5923a912b85c875c0e_r.jpg?source=1940ef5c">
 </figure>
 <figure>
  <img src="https://picx.zhimg.com/50/v2-62fc11eb2e6443fea9483f081fdf1267_720w.jpg?source=1940ef5c" data-rawwidth="640" data-rawheight="480" data-original-token="v2-62fc11eb2e6443fea9483f081fdf1267" class="origin_image zh-lightbox-thumb" width="640" data-original="https://picx.zhimg.com/v2-62fc11eb2e6443fea9483f081fdf1267_r.jpg?source=1940ef5c">
 </figure>
 <p data-pid="4G_bTfvw">最安全的已经不是2了，而是向后移动，但并没有移动到非常远的地方。</p>
 <p data-pid="5tO1eOFN">进一步增大的时候（Q（600,550））：</p>
 <figure>
  <img src="https://pic1.zhimg.com/50/v2-31cc48c0213d4dc3b7c232424345d502_720w.jpg?source=1940ef5c" data-rawwidth="640" data-rawheight="480" data-original-token="v2-31cc48c0213d4dc3b7c232424345d502" class="origin_image zh-lightbox-thumb" width="640" data-original="https://picx.zhimg.com/v2-31cc48c0213d4dc3b7c232424345d502_r.jpg?source=1940ef5c">
 </figure>
 <p data-pid="_xpxhJMO">中间大部分地方都变平了，但是注意看那个尾巴，会下降一些，原因不明，但应该不是计算误差，因为随着N增大，这个尾巴变得越来越明显，以至于到599的时候，尾巴变成了整条直线。</p>
 <p data-pid="wUtthfIt">更有趣的是这个尾巴的朝向跟N的奇偶性密切相关（Q（600,551））：</p>
 <figure>
  <img src="https://pic1.zhimg.com/50/v2-b75909d3cf91e4eb03665df6bc548af8_720w.jpg?source=1940ef5c" data-rawwidth="640" data-rawheight="480" data-original-token="v2-b75909d3cf91e4eb03665df6bc548af8" class="origin_image zh-lightbox-thumb" width="640" data-original="https://pic1.zhimg.com/v2-b75909d3cf91e4eb03665df6bc548af8_r.jpg?source=1940ef5c">
 </figure>
 <p data-pid="FMMRc_FG">尾巴变成向上了。</p>
 <p data-pid="7h4zXfgm">N接近于599的时候：</p>
 <p data-pid="fCcY_L-w">Q（600,595）</p>
 <figure>
  <img src="https://pica.zhimg.com/50/v2-b28936b347c161309da9324bcc2cafbb_720w.jpg?source=1940ef5c" data-rawwidth="640" data-rawheight="480" data-original-token="v2-b28936b347c161309da9324bcc2cafbb" class="origin_image zh-lightbox-thumb" width="640" data-original="https://picx.zhimg.com/v2-b28936b347c161309da9324bcc2cafbb_r.jpg?source=1940ef5c">
 </figure>
 <p data-pid="3O5E89od">波动越来越不明显，而尾巴越来越明显。</p>
 <p data-pid="X72wTpqh">Q（600,596）</p>
 <figure>
  <img src="https://picx.zhimg.com/50/v2-d893e94a1e6e07cc13931de5b4633b9d_720w.jpg?source=1940ef5c" data-rawwidth="640" data-rawheight="480" data-original-token="v2-d893e94a1e6e07cc13931de5b4633b9d" class="origin_image zh-lightbox-thumb" width="640" data-original="https://pic1.zhimg.com/v2-d893e94a1e6e07cc13931de5b4633b9d_r.jpg?source=1940ef5c">
 </figure>
 <p data-pid="0VZOR6Y4">Q（600,597）</p>
 <figure>
  <img src="https://pica.zhimg.com/50/v2-dfbf112628a54fa76a274ae231814fe5_720w.jpg?source=1940ef5c" data-rawwidth="640" data-rawheight="480" data-original-token="v2-dfbf112628a54fa76a274ae231814fe5" class="origin_image zh-lightbox-thumb" width="640" data-original="https://picx.zhimg.com/v2-dfbf112628a54fa76a274ae231814fe5_r.jpg?source=1940ef5c">
 </figure>
 <p data-pid="lNfoghAX">Q（600,598）</p>
 <figure>
  <img src="https://pic1.zhimg.com/50/v2-85190016e76d0c3ac9de4fb1920b6b1e_720w.jpg?source=1940ef5c" data-rawwidth="640" data-rawheight="480" data-original-token="v2-85190016e76d0c3ac9de4fb1920b6b1e" class="origin_image zh-lightbox-thumb" width="640" data-original="https://picx.zhimg.com/v2-85190016e76d0c3ac9de4fb1920b6b1e_r.jpg?source=1940ef5c">
 </figure>
 <p data-pid="sn1HVjpT">变成了一个这样的奇怪曲线……</p>
 <p data-pid="r6DaxcOw">然后599就突变成了直线。只能说，数学真是太奇妙了。</p>
 <p data-pid="-kQhZpkn">附Python代码：</p>
 <div class="highlight">
  <pre><code class="language-python"><span class="k">def</span> <span class="nf">fr</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span> <span class="o">=</span> <span class="bp">None</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">b</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">a</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="nb">float</span><span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="o">/</span> <span class="nb">float</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>

<span class="c1"># Uncomment the following line to use fractions</span>

<span class="c1"># from fractions import Fraction as fr</span>

        
<span class="k">def</span> <span class="nf">cal_p</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
    <span class="n">P</span> <span class="o">=</span> <span class="p">[</span><span class="n">fr</span><span class="p">(</span><span class="mi">0</span><span class="p">)]</span> <span class="o">*</span> <span class="p">(</span><span class="n">m</span> <span class="o">-</span> <span class="n">n</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">M</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">m</span> <span class="o">-</span> <span class="n">n</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">m</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
        <span class="n">P2</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="p">(</span><span class="n">M</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">half</span> <span class="o">=</span> <span class="p">(</span><span class="n">M</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">//</span> <span class="mi">2</span>
        <span class="n">P</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">fr</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">M</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">i</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">P2</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">fr</span><span class="p">(</span><span class="n">i</span> <span class="o">//</span> <span class="mi">2</span><span class="p">,</span> <span class="n">half</span><span class="p">)</span> <span class="o">*</span> <span class="n">P</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">fr</span><span class="p">(</span><span class="n">half</span> <span class="o">-</span> <span class="n">i</span><span class="o">//</span><span class="mi">2</span><span class="p">,</span> <span class="n">half</span><span class="p">)</span> <span class="o">*</span> <span class="n">P</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">P2</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">fr</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">half</span><span class="p">)</span> <span class="o">+</span> <span class="n">fr</span><span class="p">(</span><span class="n">i</span> <span class="o">//</span> <span class="mi">2</span><span class="p">,</span> <span class="n">half</span><span class="p">)</span> <span class="o">*</span> <span class="n">P</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">fr</span><span class="p">(</span><span class="n">half</span> <span class="o">-</span> <span class="n">i</span><span class="o">//</span><span class="mi">2</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">half</span><span class="p">)</span> <span class="o">*</span> <span class="n">P</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
        <span class="n">P</span> <span class="o">=</span> <span class="n">P2</span>
    <span class="k">return</span> <span class="n">P</span>

<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">as</span> <span class="nn">plt</span>
    
<span class="k">def</span> <span class="nf">plot_q</span><span class="p">(</span><span class="n">M</span><span class="p">,</span><span class="n">N</span><span class="p">):</span>
    <span class="n">P</span> <span class="o">=</span> <span class="n">cal_p</span><span class="p">(</span><span class="n">M</span><span class="p">,</span><span class="n">N</span><span class="p">)</span>
    <span class="n">q</span> <span class="o">=</span> <span class="p">[</span><span class="mf">1.0</span> <span class="o">-</span> <span class="n">p</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">P</span><span class="p">[</span><span class="mi">1</span><span class="p">:]]</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">q</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

</code></pre>
 </div>
 <p data-pid="I6mLyhXg">如果考虑存活回合数的期望值的话，由于N很大的时候存活概率本身就比较小，最后的确应该是2的平均存活回合数比较有优势吧。</p>
 <p data-pid="JK7S7lwA">解释一下当N比较大的时候，为什么随着N的奇偶性变化，最后一段的概率忽大忽小呢？</p>
 <p data-pid="YTRzpGI8">因为我们的M = 600是个偶数，当杀奇数人的时候，最后一轮排在最后一个位置的人不会被杀，而杀偶数人时，最后这一轮排在最后一个位置的人可能被杀，而就是这一点点差别导致了差异；杀奇数人时，最后一段很容易成为最后一个人，所以存活概率变大了，在杀599人的时候，甚至这是唯一的存活可能性；杀偶数人时，反而是成为倒数第二个人比较划算，所以最后一小段反而概率下降了。</p>
 <p data-pid="lMnwPEVp">猜一猜，598那个曲线的极值点在什么位置？</p>
 <p data-pid="dkU8WsSN">在[0,600]的黄金分割点上。</p>
</body>
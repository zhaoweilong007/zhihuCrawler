# 数学里的 e 为什么叫做自然底数？是不是自然界里什么东西恰好是 e？
- 点赞数：11254
- 更新时间：2019年12月28日12时27分33秒
- 回答url：https://www.zhihu.com/question/20296247/answer/708727036
<body>
 <p data-pid="5BLSyrWo">读中学的时候一直不明白为什么会有 e 这个存在，而且前几位数字还比较搞笑：2.718281828……直到某一天，我终于发现，原来这个数字的存在其实是很「自然」的一件事情……</p>
 <h2>1 / 多少妃子得不到皇帝的宠幸？</h2>
 <p data-pid="JsbhEi-c">首先，不扯任何公式，更不扯极限的概念，让我们穿越回古代，看一个在当时应该是很「自然」的事情：<b>皇帝宠幸妃子</b>。</p>
 <p data-pid="qp0klPuh">问题很简单：</p>
 <blockquote data-pid="WBGpiMvT">
  假设皇帝在宫中一共有1000位妃子，每天<b>完全随机地</b>抽选一位妃子来宠幸，之后妃子安然无恙地回去，如此以往重复大概3年（1000天），那么，最终有多少位妃子能够得到宠幸、又有多少得不到宠幸呢？
 </blockquote>
 <figure data-size="normal">
  <img src="https://picx.zhimg.com/50/v2-651bc4ef30fea0fe8ec2bb07784b2ee2_720w.jpg?source=1940ef5c" data-caption="" data-size="normal" data-rawwidth="1334" data-rawheight="750" data-original-token="v2-d3c95f9381c9cf8be9a5d4497e0c535c" data-default-watermark-src="https://picx.zhimg.com/50/v2-1a199c1ce42757203015b454496ea724_720w.jpg?source=1940ef5c" class="origin_image zh-lightbox-thumb" width="1334" data-original="https://pic1.zhimg.com/v2-651bc4ef30fea0fe8ec2bb07784b2ee2_r.jpg?source=1940ef5c">
 </figure>
 <p data-pid="cM-6JX6v">答案是：如果每一天确实都<b>完全随机地</b>选妃子，那么1000位妃子里面，最终将会有大约632位被选中过，而剩下的<b>368</b>位妃子则一次都没有被宠幸过。</p>
 <p data-pid="dEZ3gR30"><img src="https://www.zhihu.com/equation?tex=%281-%5Cfrac%7B1%7D%7B1000%7D%29%5E%7B1000%7D%5Capprox0.368" alt="(1-\frac{1}{1000})^{1000}\approx0.368" eeimg="1"></p>
 <h2>2 / 为什么是0.368？</h2>
 <p data-pid="n3RJy4gH">上面这个简单的例子看似和 e 没有任何关联，但是请把这个比例倒一下：</p>
 <p data-pid="Y15IZE3s"><img src="https://www.zhihu.com/equation?tex=%5Cfrac%7B1000%7D%7B368%7D%3D2.71739" alt="\frac{1000}{368}=2.71739" eeimg="1"></p>
 <p data-pid="IhrqlvyU">好像和 e 很接近啊？是巧合吗？</p>
 <p data-pid="nkG0_Xef">别急，如果这位皇帝有一万名妃子，以相同方式重复一万天（大概27年），那么理论上会有3679位妃子最终得不到宠幸；如果再多一点，十万，那么就是36788……</p>
 <p data-pid="VMKC3ot9"><img src="https://www.zhihu.com/equation?tex=%5Cfrac%7B1%7D%7B0.36788%7D%3D2.71828%5Capprox+e" alt="\frac{1}{0.36788}=2.71828\approx e" eeimg="1"></p>
 <p data-pid="_kt_CK1Q">换句话说，上面这个<b>「皇帝宠幸妃子」</b>的问题，理论上会有 <img src="https://www.zhihu.com/equation?tex=%5Cfrac%7B1%7D%7Be%7D%5Capprox36.8%5C%25" alt="\frac{1}{e}\approx36.8\%" eeimg="1"> 比例的妃子最终得不到皇帝的宠幸。</p>
 <h2>3 / 原理：统计学中的有放回抽样 &amp; 自助重抽样</h2>
 <p data-pid="yz0HooWu">一开始我对上面这件事将信将疑：真的会有这么多的妃子没被抽中吗？直到我打开RStudio，在R语言里面写了几行简单的代码来模拟上面这个过程，才发现确实如此：</p>
 <div class="highlight">
  <pre><code class="language-python"><span class="nb">set</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="n">sample</span> <span class="o">=</span> <span class="n">sample</span><span class="p">(</span><span class="mi">1</span><span class="p">:</span><span class="mi">10</span><span class="o">^</span><span class="mi">6</span><span class="p">,</span> <span class="n">replace</span><span class="o">=</span><span class="n">TRUE</span><span class="p">)</span>  <span class="c1"># replace = 有放回取样</span>
<span class="n">p</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">-</span> <span class="nb">sum</span><span class="p">(</span><span class="n">unique</span><span class="p">(</span><span class="n">sample</span><span class="p">)</span> <span class="o">%</span><span class="ow">in</span><span class="o">%</span> <span class="mi">1</span><span class="p">:</span><span class="mi">10</span><span class="o">^</span><span class="mi">6</span><span class="p">)</span><span class="o">/</span><span class="mi">10</span><span class="o">^</span><span class="mi">6</span>
<span class="mi">1</span><span class="o">/</span><span class="n">p</span></code></pre>
 </div>
 <p data-pid="V-bKD7s8">结果发现，p（未被宠幸的妃子比例）是0.367975，而1/p是2.718。</p>
 <p data-pid="Ea3cg646">这就是统计学中的<b>「重抽样」</b>技术（bootstrap sampling）：<b>从数量为N的样本中「有放回地」随机抽取出一个「数量同样为N」的样本</b>，那么理论上来说，原来的N个个体中大约会有36.8%的个体不会被抽中。</p>
 <p data-pid="Ej6rIXKU">如果一定要写出一个公式：</p>
 <p data-pid="IcU5Wvet"><img src="https://www.zhihu.com/equation?tex=%5Clim_%7BN+%5Crightarrow+%5Cinfty%7D%7B%281-%5Cfrac%7B1%7D%7BN%7D%29%5E%7BN%7D%7D%5Crightarrow%5Cfrac%7B1%7D%7Be%7D%5Capprox0.368" alt="\lim_{N \rightarrow \infty}{(1-\frac{1}{N})^{N}}\rightarrow\frac{1}{e}\approx0.368" eeimg="1"></p>
 <h2>4 / 实际应用</h2>
 <p data-pid="O83jyBQS">Bootstrap技术本身已经在自然科学、社会科学的很多领域得到了广泛应用。而上述这个特殊的问题，其实也已经应用于机器学习：在<b>“随机森林（random forest）”</b>算法中，每一棵决策树在建立的时候，所需要的数据并非原始数据（N），而是通过bootstrap方法<b>有放回地</b>抽取的<b>具有相同样本量N</b>的样本，其中不重复的个案大约是63.2% * N，而剩下的36.8% * N的样本则被称为“出包/袋外数据（out-of-bag data, OOB）”。这样一来，<b>很自然地，重抽样得到的样本可以作为“训练集”来训练机器学习模型，而36.8%的OOB数据（相当于那些“未被宠幸的妃子”）可以作为“测试集”来验证模型的预测性能。</b></p>
 <p class="ztext-empty-paragraph"><br></p>
 <p data-pid="07CXnoFW"><b>========== 分割线 ==========</b></p>
 <p data-pid="Y5T6Apb2">## 2019.6.15 补充 ##</p>
 <p data-pid="dS_o-lbp">实际上，我们还可以用一种<b>“更自然”的方式</b>来描述这个问题，而不涉及任何具体数字，这样就回应了评论区关于此问题情境是否足够“自然”的疑问（e.g., <a class="member_mention" href="https://www.zhihu.com/people/2e4283783a6fd6d6037f02feb6409965" data-hash="2e4283783a6fd6d6037f02feb6409965" data-hovercard="p$b$2e4283783a6fd6d6037f02feb6409965">@夜色</a> <a class="member_mention" href="https://www.zhihu.com/people/c5242c22dac3b6e48401d9010faa3d72" data-hash="c5242c22dac3b6e48401d9010faa3d72" data-hovercard="p$b$c5242c22dac3b6e48401d9010faa3d72">@也只是个普通人</a> ）：</p>
 <blockquote data-pid="Qo7f3gUD">
  <b>皇帝在宫中有成百上千的妃子，派人每天【完全随机地】抽选一位妃子来宠幸（或者条件允许的话，每个时辰一位也可以喔 [坏笑.emoji] ），之后妃子安然无恙地回去。若干年后，皇帝“目测”那么多的妃子应该都【宠幸完一遍】了吧？但愚昧的皇帝并不知道，其实还是有很多妃子没有得到宠幸呢。问这个比例是多少？</b>
 </blockquote>
 <p data-pid="D3Ihep60">依然是那个公式：</p>
 <p data-pid="UZK4NgHj"><img src="https://www.zhihu.com/equation?tex=%5Clim_%7BN+%5Crightarrow+%5Cinfty%7D%7B%281-%5Cfrac%7B1%7D%7BN%7D%29%5E%7BN%7D%7D%5Crightarrow%5Cfrac%7B1%7D%7Be%7D%5Capprox0.368" alt="\lim_{N \rightarrow \infty}{(1-\frac{1}{N})^{N}}\rightarrow\frac{1}{e}\approx0.368" eeimg="1"></p>
 <p data-pid="KR8CuN3B">附送打油诗一首：</p>
 <blockquote data-pid="95DHP9RD">
  后宫佳丽三千人，三千宠爱在一身。
  <br>
  每日一位来宠幸，铁杵磨成绣花针。
  <br>
  <br>
  ——改编自：白居易《长恨歌》、本回答评论区
 </blockquote>
 <p class="ztext-empty-paragraph"><br></p>
 <p data-pid="2V9XvRsI"><b>========== 分割线 ==========</b></p>
 <p data-pid="soIJ9-fO">## 2019.6.17 补充 ##</p>
 <p data-pid="iqJmbq_I">【思考题】受到评论区 <a class="member_mention" href="https://www.zhihu.com/people/fdb8c93349c226bf31d2ad9b96a8e674" data-hash="fdb8c93349c226bf31d2ad9b96a8e674" data-hovercard="p$b$fdb8c93349c226bf31d2ad9b96a8e674">@KaneZ</a> 的启发，我们还可以思考一个不太一样的情形：如果仍然是1000位妃子，但是每次随机抽2人、共抽500次呢？</p>
 <p data-pid="3KvkaEDO">我们使用R语言进行模拟：</p>
 <div class="highlight">
  <pre><code class="language-python"><span class="nb">set</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="n">sample</span> <span class="o">=</span> <span class="n">c</span><span class="p">()</span>
<span class="k">for</span><span class="p">(</span><span class="n">day</span> <span class="ow">in</span> <span class="mi">1</span><span class="p">:</span><span class="mi">500</span><span class="p">)</span> <span class="n">sample</span> <span class="o">=</span> <span class="n">c</span><span class="p">(</span><span class="n">sample</span><span class="p">,</span> <span class="n">sample</span><span class="p">(</span><span class="mi">1</span><span class="p">:</span><span class="mi">1000</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
<span class="n">p</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">-</span> <span class="nb">sum</span><span class="p">(</span><span class="n">unique</span><span class="p">(</span><span class="n">sample</span><span class="p">)</span> <span class="o">%</span><span class="ow">in</span><span class="o">%</span> <span class="mi">1</span><span class="p">:</span><span class="mi">1000</span><span class="p">)</span><span class="o">/</span><span class="mi">1000</span>
<span class="n">p</span></code></pre>
 </div>
 <p data-pid="V_vEUUsB">答案仍然非常接近36.8%。</p>
 <p data-pid="s41CpWK-">类似地，每次随机抽4人、共抽250次<b>（需满足“抽样总和等于总人数”、“每次抽的数量远小于总人数”）</b>，也会得到十分相近的答案。</p>
 <p data-pid="C9MHbTd1">至于背后最根本的原理是啥，请去问数学家，谢谢！</p>
 <p data-pid="k6xLKm1a"><b>杠精请自觉退散！</b></p>
 <p data-pid="WO18L4a2">讲好！</p>
 <p class="ztext-empty-paragraph"><br></p>
 <p data-pid="bqluFqCn"><b>参考文献</b></p>
 <p data-pid="SDKCY_sK">周志华 [著], 《机器学习》, pp. 27, 178-179</p>
</body>
# 怎么看待「学数学没啥用，买菜难道还用得上微积分」的理论？
- 点赞数：5685
- 更新时间：2019年08月03日20时31分41秒
- 回答url：https://www.zhihu.com/question/330028623/answer/771747527
<body>
 <p data-pid="nwNmZ8jY">有些朋友很在意计算结果和现实究竟符不符合的问题，由于我对此模型不设置具体数据，我想大家对纯粹的数学计算也不感兴趣，所以我决定开个延伸阅读——<a href="https://zhuanlan.zhihu.com/p/76457304" class="internal"><span class="invisible">https://</span><span class="visible">zhuanlan.zhihu.com/p/76</span><span class="invisible">457304</span><span class="ellipsis"></span></a></p>
 <p data-pid="hPuRNl9y">以下为原答案</p>
 <hr>
 <p data-pid="NS-XGc8P"><b>这些人侮辱了微积分也就算了，没想到还要侮辱买菜这个伟大的行业。</b></p>
 <p data-pid="Nn1i29o4">“买菜用不上微积分？”没想到这些人如此瞧不起买菜事业，我们就来看看，买菜行业究竟要运用哪些数学知识。</p>
 <p data-pid="gY_h-vqo">其实光靠区区微积分，已经无法适应现代买菜行业的发展了，现代买菜，不仅要求微积分，至少还要求从业者掌握概率统计和动态规划。</p>
 <p data-pid="A5M64c0E">我们来考察一下买菜行业中存在的一种普遍问题。</p>
 <p data-pid="7g1_2ugQ">一：某烧烤店老板每日进行一次买菜，菜不能储存到第二天，若菜买多了，客人吃不完，则会浪费丢掉，若菜买少了，客人没得吃，则赚不了钱。</p>
 <p data-pid="t52465Pl">但每日来多少客人吃多少东西是一个随机变量，不能确定，老板通过多年经验观察，发现每日来吃烧烤的客人对菜的需求量是一个对数正态分布，对应正态分布的均值为<b>μ，</b>方差为<b>σ^2，即lnw～N（μ，σ^2）。</b></p>
 <p data-pid="xJipfpk8">（这里老板之所以认为是对数正态分布，是因为</p>
 <p data-pid="Mx3s4hZ2"><i>a.在均值附近，客人点菜量普遍是趋于正态分布的。</i></p>
 <p data-pid="Qto9My4W"><i>b.点菜量不能小于零。</i></p>
 <p data-pid="7DijU65O"><i>c.生意好的时候客人总会邀请别的客人过来一起吃烧烤，因此客人多的时候，增加是指数形式。</i></p>
 <p data-pid="aTCt916L"><i>d.在金融市场上，交易量和股价均普遍服从对数正态分布，参考金融市场，点菜量也该差不多）</i></p>
 <p data-pid="D_ZMJJfR">现在已知每公斤菜价为c，老板每公斤菜做出的烧烤能卖p元，求，老板每天该买多少菜？</p>
 <p data-pid="kYBghNbz">这个问题恐怕是每个烧烤摊老板在买菜都面临的艰巨问题，菜买多了要浪费，买少了又怕不够，究竟该买多少菜？</p>
 <p data-pid="X0pfMfkM">二:若1中老板可以将自己的菜储存到第二天使用，但只能储存1天，如果昨天所买的菜到今天仍不能吃完，那么就会不新鲜，就只能丢掉。</p>
 <p data-pid="DOItmOqf">这个老板每个星期打算休息一天，在周日时既不能买菜又不能营业，现在求：</p>
 <p data-pid="osC9iCRa">（1）根据前一天剩下的菜量，老板该如何确定后一天的买菜量？</p>
 <p data-pid="QtaZyScR">（2）长期来看，平均而言，在每个星期一到星期六，这个老板分别该买多少菜？</p>
 <p data-pid="2QrilNyS">好了，就是这两道题了。</p>
 <p data-pid="KUJWu1Ym">任何一个烧烤摊老板买菜中，恐怕都会遇到这两种难题，为了更好地帮助烧烤摊老板<b>买菜</b>，我虽然不能不用微积分来解决，但也决定介绍一下这两个题的解法。</p>
 <p data-pid="bvqTNLap">第一题，设客人点菜量为w，服从的对数正态分布概率函数为F（w），密度函数为f（w）。</p>
 <p data-pid="9wCbAN3c">我们把老板的净收益记为Π，净收益就是指他的收入减去成本，显然，他的成本就是买菜所花的钱，单价为c，收入就是卖烧烤的所得，单价为p，我们认为老板是个小资产阶级，不需要雇佣别人工作，所以最大化净收益就是最大化他自己的劳动所得，不需要考虑工资成本，显而易见，所以此时我们的净收益有两种情况，菜够吃和菜不够吃，我们把这两种情况的净收益分别记为Π1和Π2，那么显然有：</p>
 <figure data-size="normal">
  <img src="https://picx.zhimg.com/50/v2-5ddfb3bb0c9f989a251053382fbd3657_720w.jpg?source=1940ef5c" data-rawwidth="339" data-rawheight="141" data-size="normal" data-original-token="v2-6260eb1ed19e6a2f0c1ef64d112600b6" data-default-watermark-src="https://picx.zhimg.com/50/v2-4c9f091c406056444d29a3e0a1f4ce0a_720w.jpg?source=1940ef5c" class="content_image" width="339">
 </figure>
 <p data-pid="0-OYvryf">接下来，我们把每种情况发生的概率分别记为β（Π1）和β（Π2），显然第一种情况发生的概率，就是w大于u的概率，根据分布函数F的定义，F（u）表示的是小于等于u的概率，所以β（Π1）=1-F（u），第二种情况，根据密度函数的定义，显然每个w在dw的无穷小区间发生的概率是密度函数f（w），所以将无穷多个dw的收益加总起来，可以得到收益的数学期望如下：</p>
 <figure data-size="normal">
  <img src="https://picx.zhimg.com/50/v2-50865bfeee65e675b65b9d92619625f4_720w.jpg?source=1940ef5c" data-rawwidth="1032" data-rawheight="133" data-size="normal" data-original-token="v2-50865bfeee65e675b65b9d92619625f4" class="origin_image zh-lightbox-thumb" width="1032" data-original="https://picx.zhimg.com/v2-50865bfeee65e675b65b9d92619625f4_r.jpg?source=1940ef5c">
 </figure>
 <p data-pid="PlodssVn">很容易得知这是个凹函数，所以我们来求个导数，来得到它的极大值。</p>
 <figure data-size="normal">
  <img src="https://picx.zhimg.com/50/v2-c5afa2cb5d4e27bd130e94103c3a509f_720w.jpg?source=1940ef5c" data-rawwidth="301" data-rawheight="133" data-size="normal" data-original-token="v2-7f97650fa790fc9fe4ef09a1a58e60a2" data-default-watermark-src="https://picx.zhimg.com/50/v2-43fd7dc3a95b4ea652c6cd6e8182bee7_720w.jpg?source=1940ef5c" class="content_image" width="301">
 </figure>
 <p data-pid="QmHAJbK7">所以我们可以得到如下方程组：</p>
 <figure data-size="normal">
  <img src="https://pic1.zhimg.com/50/v2-52b3188fd85602798c15dfba5740f7b8_720w.jpg?source=1940ef5c" data-rawwidth="475" data-rawheight="248" data-size="normal" data-original-token="v2-7e91dfb296260743f8495dbf8195f8e9" data-default-watermark-src="https://pic1.zhimg.com/50/v2-3b781d378e1b9d4be10a38085bf50e32_720w.jpg?source=1940ef5c" class="origin_image zh-lightbox-thumb" width="475" data-original="https://picx.zhimg.com/v2-52b3188fd85602798c15dfba5740f7b8_r.jpg?source=1940ef5c">
 </figure>
 <p data-pid="w24zcV5w">（抱歉字母不是很够用，第一行的π在经济学中一般公开表示利润，第二行的π就是大家知道的圆周率。）</p>
 <p data-pid="YYdQ2cvw">这个方程显然只能用计算机代入数据求得，在没给定数据的情况下，我们可以假设它的根是s。</p>
 <p data-pid="ZAsHFV5l">，那么此时，我们就可以知道，烧烤店老板每天应该购买这个方程组的根--s数量的菜。</p>
 <p data-pid="fj4vnlFc">我相信计算机带入数据并不困难，所以这个问题就算是解决了，让我们直接进入第2问吧。</p>
 <p data-pid="Y8FJPU_E">二，这个问题的真正难点就在于现在老板可以将其所买之菜放在第二天，而且每周都要休息一天，这意味着两件事，1，某次买多了对老板而言的损失降低了，因为他可以把多的菜储存起来；2，长期来看，他每天平均所买的菜的数量是不同的，因为他每周周日都要休息。</p>
 <p data-pid="Wh-SYF_u">我们注意到由于所有的菜都只能放1天，而他又周日休息，所以周六所买的菜如果不花光的话，是放不到下周的，所以每周他的菜都会清零，所以我们以一周为单位来进行动态规划。</p>
 <p data-pid="stcyve5S">我们把星期t他所买的菜记为ut，t=1，2，3，4，5，6，随后我们又把每天早上他买菜之前剩下的菜数量记为xt，t=1，2，3，4，5，6，这样每天他所能使用的菜就是xt+ut了。</p>
 <p data-pid="JCGVhWEs">显而易见，因为周日他不营业，所以周六他不需要考虑留下菜的问题，这样这个问题就转化为了和第一题中类似的问题。</p>
 <p data-pid="qrFCJg-L">这里我们引入一个概念J，Jt表示第t天以及第t天之后老板所有净流入的和，比如，J6就是他第六天所卖出菜所赚取的钱，和购买的u6所花的钱的差，而J5，就是第五天的这个差和第六天这个差的和，J4就是第四天第五天和第六天全部的和，因为第六天以后休息了，所以显然，我们由第一题所得有：</p>
 <figure data-size="normal">
  <img src="https://picx.zhimg.com/50/v2-9f33f061f8e4daf1dc422aae95be0eee_720w.jpg?source=1940ef5c" data-rawwidth="928" data-rawheight="168" data-size="normal" data-original-token="v2-b3234250b59c0e4d2924d36fe2e797a4" data-default-watermark-src="https://picx.zhimg.com/50/v2-696b9b4045d31d3123163892a582aa21_720w.jpg?source=1940ef5c" class="origin_image zh-lightbox-thumb" width="928" data-original="https://picx.zhimg.com/v2-9f33f061f8e4daf1dc422aae95be0eee_r.jpg?source=1940ef5c">
 </figure>
 <p data-pid="zt1aESOX">接下来，我们考察一下后一天早上买菜前所剩的菜xt+1和前一天的买菜数量的关系，显然，如果前一天早上剩下的菜就超过了前一天的点菜量，那么因为所有的菜都只能保管两天，那么再前一天的菜不可能还留下，所以只有前一天所买的菜ut留下了；如果前一天早上剩下下的菜没有超过所需，且所需并没有超过前一天买的菜和剩的菜的总和，那么显然有xt+ut-wt留下了，如果前一天需求量实在太大无法满足，那么后一天的剩菜量自然是零。</p>
 <p data-pid="eQo-kVqX">所以我们把xt+1表示为xt和ut的函数G，那么就有：</p>
 <figure data-size="normal">
  <img src="https://picx.zhimg.com/50/v2-221c352c9528eb8f021fe47c86c88bec_720w.jpg?source=1940ef5c" data-rawwidth="195" data-rawheight="48" data-size="normal" data-original-token="v2-221c352c9528eb8f021fe47c86c88bec" class="content_image" width="195">
 </figure>
 <p class="ztext-empty-paragraph"><br></p>
 <figure data-size="normal">
  <img src="https://pic1.zhimg.com/50/v2-350f3be10f8e656fca0b56856e3501d4_720w.jpg?source=1940ef5c" data-rawwidth="507" data-rawheight="144" data-size="normal" data-original-token="v2-0c937c8ada730e980213d76a273536d1" data-default-watermark-src="https://picx.zhimg.com/50/v2-acd79dee86d6e5f80ee7a16db7e42f06_720w.jpg?source=1940ef5c" class="origin_image zh-lightbox-thumb" width="507" data-original="https://pica.zhimg.com/v2-350f3be10f8e656fca0b56856e3501d4_r.jpg?source=1940ef5c">
 </figure>
 <p data-pid="f1V8Y8kv">现在，我们考察函数J的递推式，J表示的是当天和这之后所有的净流入的和，这是什么意思？当天的决策显然已经不可能影响那之前的收益，当天的决策显然只能影响后面的收益，所以第t天决策的目的，就是使得Jt最大，显然，每一天的支出就是买ut所花的钱cut，每一天的收入，就是当天卖出的菜的数量乘以价格，所以显而易见，我们有：</p>
 <figure data-size="normal">
  <img src="https://pic1.zhimg.com/50/v2-7f18feaf7ff39da1e1eda026c00ceaf9_720w.jpg?source=1940ef5c" data-rawwidth="1080" data-rawheight="213" data-size="normal" data-original-token="v2-68738cf496351a5b5bf71f73a74aca9d" data-default-watermark-src="https://pic1.zhimg.com/50/v2-4ae605d5ea091b115d01d873d8161860_720w.jpg?source=1940ef5c" class="origin_image zh-lightbox-thumb" width="1080" data-original="https://pic1.zhimg.com/v2-7f18feaf7ff39da1e1eda026c00ceaf9_r.jpg?source=1940ef5c">
 </figure>
 <p data-pid="YfYsIZzX">第t期的决策就是使得E[Jt（xt）]最大，我们把这个目的写下来：</p>
 <figure data-size="normal">
  <img src="https://pic1.zhimg.com/50/v2-6d1a7b1c9a22eb269da8a69f26aee237_720w.jpg?source=1940ef5c" data-rawwidth="1128" data-rawheight="117" data-size="normal" data-original-token="v2-6d1a7b1c9a22eb269da8a69f26aee237" class="origin_image zh-lightbox-thumb" width="1128" data-original="https://picx.zhimg.com/v2-6d1a7b1c9a22eb269da8a69f26aee237_r.jpg?source=1940ef5c">
 </figure>
 <p data-pid="mMH6GMt4">这就是动态规划Bellman Equation。</p>
 <p data-pid="m694XDQt">那么该怎么解决这个问题呢？这就需要一个被称作DP Algorithm 的算法了，其实这个算法就是暴力破解，第六天后面没有了，所以我们先看第六天早上剩x6的时候，该买多少u6使得期望收益最大，这样，u6就被表示成x6的函数，而x6又被u5决定，u5又被x5决定，以此类推，直到全表示为u1，然后求u1的最值。</p>
 <p data-pid="2W0XLTcc">这个算法既然都叫算法了，所以就是交给计算机处理的意思，我用手演示前面第六天和第五天，</p>
 <figure data-size="normal">
  <img src="https://pica.zhimg.com/50/v2-9f33f061f8e4daf1dc422aae95be0eee_720w.jpg?source=1940ef5c" data-rawwidth="928" data-rawheight="168" data-size="normal" data-original-token="v2-b3234250b59c0e4d2924d36fe2e797a4" data-default-watermark-src="https://pica.zhimg.com/50/v2-696b9b4045d31d3123163892a582aa21_720w.jpg?source=1940ef5c" class="origin_image zh-lightbox-thumb" width="928" data-original="https://pica.zhimg.com/v2-9f33f061f8e4daf1dc422aae95be0eee_r.jpg?source=1940ef5c">
 </figure>
 <p class="ztext-empty-paragraph"><br></p>
 <figure data-size="normal">
  <img src="https://picx.zhimg.com/50/v2-7e9bd2d340385020dba2b44d08cc0bb4_720w.jpg?source=1940ef5c" data-rawwidth="448" data-rawheight="192" data-size="normal" data-original-token="v2-7855ad1776a2ca26c195c867deee91e9" data-default-watermark-src="https://pica.zhimg.com/50/v2-5487f599711f09f008500cfb862ec11d_720w.jpg?source=1940ef5c" class="origin_image zh-lightbox-thumb" width="448" data-original="https://pic1.zhimg.com/v2-7e9bd2d340385020dba2b44d08cc0bb4_r.jpg?source=1940ef5c">
 </figure>
 <p class="ztext-empty-paragraph"><br></p>
 <figure data-size="normal">
  <img src="https://pic1.zhimg.com/50/v2-a3d9cab609bbe76c6ec51e9cf0496251_720w.jpg?source=1940ef5c" data-rawwidth="1251" data-rawheight="381" data-size="normal" data-original-token="v2-dd56ccc876a5c146d0bd63cf5516a76e" data-default-watermark-src="https://picx.zhimg.com/50/v2-f79cc5ae8400500e7f333e776cdec7a0_720w.jpg?source=1940ef5c" class="origin_image zh-lightbox-thumb" width="1251" data-original="https://picx.zhimg.com/v2-a3d9cab609bbe76c6ec51e9cf0496251_r.jpg?source=1940ef5c">
 </figure>
 <p data-pid="4-YWlZRK">显然，如果第五天没有菜剩下，那么第六天的购买量就应该是第一题的解s了，从这里可见第五天的时候已经很复杂了，我们就到此为止吧，只要知道算法，有些事还是该交给计算机。</p>
 <p data-pid="_JMisHHY">我们生活中的任何一件小事，只要你肯钻研，都会用到复杂的数学知识，马克思曾说过：一门学科只有运用到数学的时候，才是真正完善的。冯诺依曼也曾说过：如果你觉得数学比现实困难，那么你一定是没有意识到现实的复杂。</p>
 <p data-pid="21cY_vpn">看完这两个问题，还觉得买菜真的用不到微积分吗？微积分都不会，您配去买菜吗？</p>
 <p data-pid="LTl_OcZD">不学习的人做什么都用不到微积分，就算送他去证券交易所，他也不会用数理分析而是瞎JB操作，就算让他造火箭，他也会造万户式的火箭。</p>
 <p data-pid="1NqA_MZS">不是因为投行和工程这些工作才需要微积分，才让从业者去学习；而是因为投行和工程的从业者普遍会微积分，所以才把微积分引入了这些行业，而过去买菜的从业者自己普遍不会微积分，所以才会说买菜不需要微积分，因为你学会某项技能之前，你永远无法理解它究竟有什么用？</p>
 <p data-pid="ipRaNSsY">贝尔曼的动态规划，本来是发射火箭和跟踪导弹的原理，最初用于火箭，随后用于证券市场，将来用于买菜的时候有何不可？</p>
 <p data-pid="fSc5tDGO">反智者说买菜用不到微积分，侮辱的不是微积分，而是买菜这个伟大的行业。</p>
</body>
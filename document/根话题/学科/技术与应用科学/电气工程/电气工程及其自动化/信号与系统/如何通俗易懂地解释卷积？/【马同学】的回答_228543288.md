# 如何通俗易懂地解释卷积？
- 点赞数：16052
- 更新时间：2024年01月05日10时34分03秒
- 回答url：https://www.zhihu.com/question/22298352/answer/228543288
<body>
 <p data-pid="g-Y8X3fe">从数学上讲，卷积就是一种运算。</p>
 <p data-pid="YfnjTyW1">某种运算，能被定义出来，至少有以下特征：</p>
 <ul>
  <li data-pid="Non1RI_-">首先是抽象的、符号化的</li>
  <li data-pid="_5_mPZyf">其次，在生活、科研中，有着广泛的作用</li>
 </ul>
 <p data-pid="2HmPmgZt">比如加法：</p>
 <ul>
  <li data-pid="282g6Oj0"><img src="https://www.zhihu.com/equation?tex=a%2Bb" alt="a+b" eeimg="1"> ，是抽象的，本身只是一个数学符号</li>
  <li data-pid="2wsCVQfm">在现实中，有非常多的意义，比如增加、合成、旋转等等</li>
 </ul>
 <p data-pid="9whGYnYn">卷积，是我们学习高等数学之后，新接触的一种运算，因为涉及到积分、级数，所以看起来觉得很复杂。</p>
 <p data-pid="YkBgHHdl"><b>1 卷积的定义</b></p>
 <p data-pid="CLKPvasK">我们称 <img src="https://www.zhihu.com/equation?tex=%28f%2Ag%29%28n%29" alt="(f*g)(n)" eeimg="1"> 为 <img src="https://www.zhihu.com/equation?tex=f%2Cg" alt="f,g" eeimg="1"> 的卷积</p>
 <p data-pid="jRRRwSHu">其连续的定义为：</p>
 <p data-pid="Qb5Dpbk0"><img src="https://www.zhihu.com/equation?tex=%5Cdisplaystyle+%28f%2Ag%29%28n%29%3D%5Cint+_%7B-%5Cinfty+%7D%5E%7B%5Cinfty+%7Df%28%5Ctau+%29g%28n-%5Ctau+%29d%5Ctau+%5C%5C" alt="\displaystyle (f*g)(n)=\int _{-\infty }^{\infty }f(\tau )g(n-\tau )d\tau \\" eeimg="1"></p>
 <p data-pid="BpyiQDmM">其离散的定义为：</p>
 <p data-pid="rKo4vVGZ"><img src="https://www.zhihu.com/equation?tex=%5Cdisplaystyle+%28f%2Ag%29%28n%29%3D%5Csum+_%7B%5Ctau+%3D-%5Cinfty+%7D%5E%7B%5Cinfty+%7D%7Bf%28%5Ctau+%29g%28n-%5Ctau+%29%7D%5C%5C" alt="\displaystyle (f*g)(n)=\sum _{\tau =-\infty }^{\infty }{f(\tau )g(n-\tau )}\\" eeimg="1"></p>
 <p data-pid="ZpvQh5FR">这两个式子有一个共同的特征：</p>
 <figure data-size="normal">
  <img src="https://picx.zhimg.com/50/v2-d3df01f12b869d431c65f97ad307508f_720w.jpg?source=1940ef5c" data-caption="" data-size="normal" data-rawwidth="453" data-rawheight="402" data-original-token="v2-d3df01f12b869d431c65f97ad307508f" class="origin_image zh-lightbox-thumb" width="453" data-original="https://pica.zhimg.com/v2-d3df01f12b869d431c65f97ad307508f_r.jpg?source=1940ef5c">
 </figure>
 <p data-pid="VwwaG-eW">这个特征有什么意义？</p>
 <p data-pid="DMXsiPxb">我们令 <img src="https://www.zhihu.com/equation?tex=x%3D%5Ctau+%2Cy%3Dn-%5Ctau+" alt="x=\tau ,y=n-\tau " eeimg="1"> ，那么 <img src="https://www.zhihu.com/equation?tex=x%2By%3Dn" alt="x+y=n" eeimg="1"> 就是下面这些直线：</p>
 <figure data-size="normal">
  <img src="https://pica.zhimg.com/50/v2-8be52f6bada3f7a21cebfc210d2e7ea0_720w.gif?source=1940ef5c" data-caption="" data-size="normal" data-rawwidth="518" data-rawheight="329" data-original-token="v2-8be52f6bada3f7a21cebfc210d2e7ea0" data-thumbnail="https://picx.zhimg.com/50/v2-8be52f6bada3f7a21cebfc210d2e7ea0_720w.jpg?source=1940ef5c" class="origin_image zh-lightbox-thumb" width="518" data-original="https://picx.zhimg.com/v2-8be52f6bada3f7a21cebfc210d2e7ea0_r.jpg?source=1940ef5c">
 </figure>
 <p data-pid="gZ1PQvaG">如果遍历这些直线，就好比，把毛巾沿着角卷起来：</p>
 <figure data-size="normal">
  <img src="https://picx.zhimg.com/50/v2-1d0c819fc7ca6f8da25435da070a2715_720w.gif?source=1940ef5c" data-caption="" data-size="normal" data-rawwidth="400" data-rawheight="225" data-original-token="v2-1d0c819fc7ca6f8da25435da070a2715" data-thumbnail="https://pica.zhimg.com/50/v2-1d0c819fc7ca6f8da25435da070a2715_720w.jpg?source=1940ef5c" class="content_image" width="400">
 </figure>
 <p data-pid="UXXb7E2_">此处受到 <a href="https://zhihu.com/question/54677157/answer/141245297" class="internal">荆哲：卷积为什么叫「卷」积？</a> 答案的启发。</p>
 <p data-pid="8YvDoT4F">只看数学符号，卷积是抽象的，不好理解的，但是，我们可以通过现实中的意义，来<b>习惯</b>卷积这种运算，正如我们小学的时候，学习加减乘除需要各种苹果、糖果来帮助我们习惯一样。</p>
 <p data-pid="qAc-hcN_">我们来看看现实中，这样的定义有什么意义。</p>
 <p data-pid="7qNLqgEx"><b>2 离散卷积的例子：丢骰子</b></p>
 <p data-pid="kwkGjk1P">我有两枚骰子：</p>
 <figure data-size="normal">
  <img src="https://picx.zhimg.com/50/v2-e279045403bb2b0d8de72262f37562cd_720w.jpg?source=1940ef5c" data-caption="" data-size="normal" data-rawwidth="600" data-rawheight="300" data-original-token="v2-e279045403bb2b0d8de72262f37562cd" class="origin_image zh-lightbox-thumb" width="600" data-original="https://picx.zhimg.com/v2-e279045403bb2b0d8de72262f37562cd_r.jpg?source=1940ef5c">
 </figure>
 <p data-pid="izMfcgQl">把这两枚骰子都抛出去：</p>
 <figure data-size="normal">
  <img src="https://picx.zhimg.com/50/v2-53f1a57bc5e9ee0eb6b6f18ab7654337_720w.jpg?source=1940ef5c" data-caption="" data-size="normal" data-rawwidth="626" data-rawheight="665" data-original-token="v2-53f1a57bc5e9ee0eb6b6f18ab7654337" class="origin_image zh-lightbox-thumb" width="626" data-original="https://picx.zhimg.com/v2-53f1a57bc5e9ee0eb6b6f18ab7654337_r.jpg?source=1940ef5c">
 </figure>
 <p data-pid="9OY1flcs">求：</p>
 <figure data-size="normal">
  <img src="https://picx.zhimg.com/50/v2-e8826b4dfaf68b5af638b0c126cb67a7_720w.jpg?source=1940ef5c" data-caption="" data-size="normal" data-rawwidth="615" data-rawheight="402" data-original-token="v2-e8826b4dfaf68b5af638b0c126cb67a7" class="origin_image zh-lightbox-thumb" width="615" data-original="https://pic1.zhimg.com/v2-e8826b4dfaf68b5af638b0c126cb67a7_r.jpg?source=1940ef5c">
 </figure>
 <p data-pid="BXflMJdS">这里问题的关键是，两个骰子加起来要等于4，这正是卷积的应用场景。</p>
 <p data-pid="wlEC9FMf">我们把骰子各个点数出现的概率表示出来：</p>
 <figure data-size="normal">
  <img src="https://picx.zhimg.com/50/v2-4763fd548536b21640d01d3f8a59c546_720w.jpg?source=1940ef5c" data-caption="" data-size="normal" data-rawwidth="736" data-rawheight="402" data-original-token="v2-4763fd548536b21640d01d3f8a59c546" class="origin_image zh-lightbox-thumb" width="736" data-original="https://pic1.zhimg.com/v2-4763fd548536b21640d01d3f8a59c546_r.jpg?source=1940ef5c">
 </figure>
 <p data-pid="7FY1jWWA">那么，两枚骰子点数加起来为4的情况有：</p>
 <figure data-size="normal">
  <img src="https://picx.zhimg.com/50/v2-a67a711702ce48cd7632e783ae0a1f42_720w.jpg?source=1940ef5c" data-caption="" data-size="normal" data-rawwidth="538" data-rawheight="402" data-original-token="v2-a67a711702ce48cd7632e783ae0a1f42" class="origin_image zh-lightbox-thumb" width="538" data-original="https://pica.zhimg.com/v2-a67a711702ce48cd7632e783ae0a1f42_r.jpg?source=1940ef5c">
 </figure>
 <p class="ztext-empty-paragraph"><br></p>
 <figure data-size="normal">
  <img src="https://pica.zhimg.com/50/v2-d6ff10bf39c46397ab2bebb971d4b58c_720w.jpg?source=1940ef5c" data-caption="" data-size="normal" data-rawwidth="538" data-rawheight="402" data-original-token="v2-d6ff10bf39c46397ab2bebb971d4b58c" class="origin_image zh-lightbox-thumb" width="538" data-original="https://picx.zhimg.com/v2-d6ff10bf39c46397ab2bebb971d4b58c_r.jpg?source=1940ef5c">
 </figure>
 <p class="ztext-empty-paragraph"><br></p>
 <figure data-size="normal">
  <img src="https://pic1.zhimg.com/50/v2-0cdabcc04398ea723aa6e47e05072e5c_720w.jpg?source=1940ef5c" data-caption="" data-size="normal" data-rawwidth="538" data-rawheight="402" data-original-token="v2-0cdabcc04398ea723aa6e47e05072e5c" class="origin_image zh-lightbox-thumb" width="538" data-original="https://picx.zhimg.com/v2-0cdabcc04398ea723aa6e47e05072e5c_r.jpg?source=1940ef5c">
 </figure>
 <p data-pid="WfGjB9qA">因此，两枚骰子点数加起来为4的概率为：</p>
 <p data-pid="31FGXNnF"><img src="https://www.zhihu.com/equation?tex=f%281%29g%283%29%2Bf%282%29g%282%29%2Bf%283%29g%281%29%5C%5C" alt="f(1)g(3)+f(2)g(2)+f(3)g(1)\\" eeimg="1"></p>
 <p data-pid="ELfG3kUc">符合卷积的定义，把它写成标准的形式就是：</p>
 <p data-pid="DNNcNZpX"><img src="https://www.zhihu.com/equation?tex=%5Cdisplaystyle+%28f%2Ag%29%284%29%3D%5Csum+_%7Bm%3D1%7D%5E%7B3%7Df%284-m%29g%28m%29%5C%5C" alt="\displaystyle (f*g)(4)=\sum _{m=1}^{3}f(4-m)g(m)\\" eeimg="1"></p>
 <p data-pid="6d9Yx7Cd"><b>3 连续卷积的例子：做馒头</b></p>
 <p data-pid="mtLz2eAl">楼下早点铺子生意太好了，供不应求，就买了一台机器，不断的生产馒头。</p>
 <p data-pid="ewtoLAyi">假设馒头的生产速度是 <img src="https://www.zhihu.com/equation?tex=f%28t%29" alt="f(t)" eeimg="1"> ，那么一天后生产出来的馒头总量为：</p>
 <p data-pid="4VGO8kAX"><img src="https://www.zhihu.com/equation?tex=%5Cint+_%7B0%7D%5E%7B24%7Df%28t%29dt%5C%5C" alt="\int _{0}^{24}f(t)dt\\" eeimg="1"></p>
 <p data-pid="sMDdn9Rj">馒头生产出来之后，就会慢慢腐败，假设腐败函数为 <img src="https://www.zhihu.com/equation?tex=g%28t%29" alt="g(t)" eeimg="1"> ，比如，10个馒头，24小时会腐败：</p>
 <p data-pid="CXan1cH7"><img src="https://www.zhihu.com/equation?tex=10%2Ag%28t%29%5C%5C" alt="10*g(t)\\" eeimg="1"></p>
 <p data-pid="LYQWhptK">想想就知道，第一个小时生产出来的馒头，一天后会经历24小时的腐败，第二个小时生产出来的馒头，一天后会经历23小时的腐败。</p>
 <p data-pid="jMR8ANm8">如此，我们可以知道，一天后，馒头总共腐败了：</p>
 <p data-pid="fV-CCeqV"><img src="https://www.zhihu.com/equation?tex=%5Cint+_%7B0%7D%5E%7B24%7Df%28t%29g%2824-t%29dt%5C%5C" alt="\int _{0}^{24}f(t)g(24-t)dt\\" eeimg="1"></p>
 <p data-pid="1oMRunFi">这就是连续的卷积。</p>
 <p data-pid="IlUAxxH7"><b>4 图像处理</b></p>
 <p data-pid="r2ID7KL1"><b>4.1 原理</b></p>
 <p data-pid="Z5bcK_A1">有这么一副图像，可以看到，图像上有很多噪点：</p>
 <figure data-size="normal">
  <img src="https://pica.zhimg.com/50/v2-8d161328acd72d035e461c0b89b753e5_720w.jpg?source=1940ef5c" data-caption="" data-size="normal" data-rawwidth="823" data-rawheight="402" data-original-token="v2-8d161328acd72d035e461c0b89b753e5" class="origin_image zh-lightbox-thumb" width="823" data-original="https://pic1.zhimg.com/v2-8d161328acd72d035e461c0b89b753e5_r.jpg?source=1940ef5c">
 </figure>
 <p data-pid="UL853nT-">高频信号，就好像平地耸立的山峰：</p>
 <figure data-size="normal">
  <img src="https://pica.zhimg.com/50/v2-294698966c5a833cd750df70c0a00c21_720w.jpg?source=1940ef5c" data-caption="" data-size="normal" data-rawwidth="554" data-rawheight="305" data-original-token="v2-294698966c5a833cd750df70c0a00c21" class="origin_image zh-lightbox-thumb" width="554" data-original="https://pica.zhimg.com/v2-294698966c5a833cd750df70c0a00c21_r.jpg?source=1940ef5c">
 </figure>
 <p data-pid="XERAOrCC">看起来很显眼。</p>
 <p data-pid="v1ox6B3w">平滑这座山峰的办法之一就是，把山峰刨掉一些土，填到山峰周围去。用数学的话来说，就是把山峰周围的高度平均一下。</p>
 <p data-pid="xpsOgEr1">平滑后得到：</p>
 <figure data-size="normal">
  <img src="https://picx.zhimg.com/50/v2-83b24e8ed70f17df6bc3b921ebe6276c_720w.jpg?source=1940ef5c" data-caption="" data-size="normal" data-rawwidth="438" data-rawheight="334" data-original-token="v2-83b24e8ed70f17df6bc3b921ebe6276c" class="origin_image zh-lightbox-thumb" width="438" data-original="https://picx.zhimg.com/v2-83b24e8ed70f17df6bc3b921ebe6276c_r.jpg?source=1940ef5c">
 </figure>
 <p data-pid="t5lkWuNN"><b>4.2 计算</b></p>
 <p data-pid="MCVDdT00">卷积可以帮助实现这个平滑算法。</p>
 <p data-pid="CS7ri8vu">有噪点的原图，可以把它转为一个矩阵：</p>
 <figure data-size="normal">
  <img src="https://pic1.zhimg.com/50/v2-8dd14775ab8c91a09507f52e44f347f3_720w.jpg?source=1940ef5c" data-caption="" data-size="normal" data-rawwidth="888" data-rawheight="402" data-original-token="v2-8dd14775ab8c91a09507f52e44f347f3" class="origin_image zh-lightbox-thumb" width="888" data-original="https://pic1.zhimg.com/v2-8dd14775ab8c91a09507f52e44f347f3_r.jpg?source=1940ef5c">
 </figure>
 <p data-pid="ndSz7fvK">然后用下面这个平均矩阵（说明下，原图的处理实际上用的是正态分布矩阵，这里为了简单，就用了算术平均矩阵）来平滑图像：</p>
 <p data-pid="QaZfSMeq"><img src="https://www.zhihu.com/equation?tex=g%3D%5Cbegin%7Bbmatrix%7D+%5Cfrac%7B1%7D%7B9%7D+%26+%5Cfrac%7B1%7D%7B9%7D+%26+%5Cfrac%7B1%7D%7B9%7D+%5C%5C+%5Cfrac%7B1%7D%7B9%7D+%26+%5Cfrac%7B1%7D%7B9%7D+%26+%5Cfrac%7B1%7D%7B9%7D+%5C%5C+%5Cfrac%7B1%7D%7B9%7D+%26+%5Cfrac%7B1%7D%7B9%7D+%26+%5Cfrac%7B1%7D%7B9%7D+%5Cend%7Bbmatrix%7D%5C%5C" alt="g=\begin{bmatrix} \frac{1}{9} &amp; \frac{1}{9} &amp; \frac{1}{9} \\ \frac{1}{9} &amp; \frac{1}{9} &amp; \frac{1}{9} \\ \frac{1}{9} &amp; \frac{1}{9} &amp; \frac{1}{9} \end{bmatrix}\\" eeimg="1"></p>
 <p data-pid="641ySzsI">记得刚才说过的算法，把高频信号与周围的数值平均一下就可以平滑山峰。</p>
 <p data-pid="gBpri77d">比如我要平滑 <img src="https://www.zhihu.com/equation?tex=a_%7B1%2C1%7D" alt="a_{1,1}" eeimg="1"> 点，就在矩阵中，取出 <img src="https://www.zhihu.com/equation?tex=a_%7B1%2C1%7D" alt="a_{1,1}" eeimg="1"> 点附近的点组成矩阵 <img src="https://www.zhihu.com/equation?tex=f" alt="f" eeimg="1"> ，和 <img src="https://www.zhihu.com/equation?tex=g" alt="g" eeimg="1"> 进行卷积计算后，再填回去：</p>
 <figure data-size="normal">
  <img src="https://picx.zhimg.com/50/v2-5ee9a99988137a42d1067deab36c4e51_720w.jpg?source=1940ef5c" data-caption="" data-size="normal" data-rawwidth="851" data-rawheight="402" data-original-token="v2-5ee9a99988137a42d1067deab36c4e51" class="origin_image zh-lightbox-thumb" width="851" data-original="https://pic1.zhimg.com/v2-5ee9a99988137a42d1067deab36c4e51_r.jpg?source=1940ef5c">
 </figure>
 <p data-pid="hh1kkAMl">要注意一点，为了运用卷积， <img src="https://www.zhihu.com/equation?tex=g" alt="g" eeimg="1"> 虽然和 <img src="https://www.zhihu.com/equation?tex=f" alt="f" eeimg="1"> 同维度，但下标有点不一样：</p>
 <figure data-size="normal">
  <img src="https://pic1.zhimg.com/50/v2-779d4e972dc557be55e6131edbb8db9f_720w.jpg?source=1940ef5c" data-caption="" data-size="normal" data-rawwidth="707" data-rawheight="402" data-original-token="v2-779d4e972dc557be55e6131edbb8db9f" class="origin_image zh-lightbox-thumb" width="707" data-original="https://picx.zhimg.com/v2-779d4e972dc557be55e6131edbb8db9f_r.jpg?source=1940ef5c">
 </figure>
 <p data-pid="bjMe-S_x">我用一个动图来说明下计算过程：</p>
 <figure data-size="normal">
  <img src="https://pica.zhimg.com/50/v2-c658110eafe027eded16864fb6a28f46_720w.gif?source=1940ef5c" data-caption="" data-size="normal" data-rawwidth="708" data-rawheight="391" data-original-token="v2-c658110eafe027eded16864fb6a28f46" data-thumbnail="https://pic1.zhimg.com/50/v2-c658110eafe027eded16864fb6a28f46_720w.jpg?source=1940ef5c" class="origin_image zh-lightbox-thumb" width="708" data-original="https://pica.zhimg.com/v2-c658110eafe027eded16864fb6a28f46_r.jpg?source=1940ef5c">
 </figure>
 <p data-pid="nu8P61TR">写成卷积公式就是：</p>
 <p data-pid="mDW7ny1T"><img src="https://www.zhihu.com/equation?tex=%5Cdisplaystyle+%28f%2Ag%29%281%2C1%29%3D%5Csum+_%7Bk%3D0%7D%5E%7B2%7D%5Csum+_%7Bh%3D0%7D%5E%7B2%7Df%28h%2Ck%29g%281-h%2C1-k%29%5C%5C" alt="\displaystyle (f*g)(1,1)=\sum _{k=0}^{2}\sum _{h=0}^{2}f(h,k)g(1-h,1-k)\\" eeimg="1"></p>
 <p data-pid="D3jQK04I">要求 <img src="https://www.zhihu.com/equation?tex=c_%7B4%2C5%7D" alt="c_{4,5}" eeimg="1"> ，一样可以套用上面的卷积公式。</p>
 <p data-pid="1-eEcFSp">这样相当于实现了 <img src="https://www.zhihu.com/equation?tex=g" alt="g" eeimg="1"> 这个矩阵在原来图像上的划动（准确来说，下面这幅图把 <img src="https://www.zhihu.com/equation?tex=g" alt="g" eeimg="1"> 矩阵旋转了 <img src="https://www.zhihu.com/equation?tex=180%5E%5Ccirc" alt="180^\circ" eeimg="1"> ）：</p>
 <figure data-size="normal">
  <img src="https://picx.zhimg.com/50/v2-15fea61b768f7561648dbea164fcb75f_720w.gif?source=1940ef5c" data-caption="" data-size="normal" data-rawwidth="543" data-rawheight="544" data-original-token="v2-15fea61b768f7561648dbea164fcb75f" data-thumbnail="https://pica.zhimg.com/50/v2-15fea61b768f7561648dbea164fcb75f_720w.jpg?source=1940ef5c" class="origin_image zh-lightbox-thumb" width="543" data-original="https://pic1.zhimg.com/v2-15fea61b768f7561648dbea164fcb75f_r.jpg?source=1940ef5c">
 </figure>
 <p data-pid="pT9bH3Vd">此图出处：<a href="https://link.zhihu.com/?target=https%3A//mlnotebook.github.io/post/CNN1/" class=" wrap external" target="_blank" rel="nofollow noreferrer">Convolutional Neural Networks - Basics</a></p>
 <p data-pid="HUJfrdNe">文章最新版本在（有可能会有后续更新）：<a href="https://link.zhihu.com/?target=https%3A//www.matongxue.com/madocs/32.html" class=" wrap external" target="_blank" rel="nofollow noreferrer">如何通俗地理解卷积？</a></p>
 <p data-pid="FxTXhNsE">更多内容推荐<b>马同学图解数学</b>系列</p><a data-draft-node="block" data-draft-type="mcn-link-card" data-mcn-id="1726551845181169664"></a><a data-draft-node="block" data-draft-type="mcn-link-card" data-mcn-id="1632014883154718720"></a><a data-draft-node="block" data-draft-type="mcn-link-card" data-mcn-id="1554218929404407808"></a>
 <p></p>
</body>
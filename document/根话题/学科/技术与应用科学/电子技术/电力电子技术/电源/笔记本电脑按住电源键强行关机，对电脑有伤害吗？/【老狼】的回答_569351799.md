# 笔记本电脑按住电源键强行关机，对电脑有伤害吗？
- 点赞数：19470
- 更新时间：2021年05月07日13时02分54秒
- 回答url：https://www.zhihu.com/question/20771900/answer/569351799
<body>
 <p data-pid="N4MT4Zs1">谢邀。这个问题很老了，有很多答案，但所有的答案都没有触及一个根本的问题。那就是<b>按住电源键强制关机和拔电源关机并不一样</b>，这点对笔记本和台式机都是如此。</p>
 <p data-pid="vQ6MUN_m">按住电源键关机，在硬件上看就是拉住PWRBTN#引脚，保持一段时间。在电源键按下后，也就是PWRBTN#被置高后，硬件会开启一个时钟Timer，超过5秒还没有抬起，也就是PWRBTN#没有被置低，会触发关机动作。这个关机动作并不是切断电源了事，而是遵循普通的关机<b>硬件</b>流程。大家要知道，实际上CPU和主板上有很多power rail，关机并不是简简单单切断电源就好了，有复杂的关闭各个power rail的时序，要按照一定的顺序来，大家可以看看芯片手册了解一下，这里不再详述。这时进入的ACPI模式是G2，不是拔电源的G3，主板还有部分区域是有电的。</p>
 <p data-pid="2Y9MfrvQ">也就是说按住电源键关机，<b>看起来像一下关闭电源了，实际上还是要经历一个完整的关机硬件流程，和普通的正常关机在硬件流程上没有什么不同。和拔电源也有本质的不同。</b></p>
 <h2><b>和正常关机有什么不同？</b></h2>
 <p data-pid="Khb82uCz">硬件流程上一样，那么和普通关机在什么地方不同了呢？差别就是操作系统被跳过了。无论我们是鼠标点选关机，还是按了一下电源键关机（详见 <a href="https://zhuanlan.zhihu.com/p/27257961" class="internal">老狼：按下电源键后发生了什么？电脑是如何关机的？</a>），操作系统也就是Windows或者Linux都会受到通知，尝试安全关机。操作系统和固件在ACPI规范下共同工作，不同分工，一步步安全关闭计算机。包括保存文件等等操作。跳过这些动作轻则未保存文件丢失，重则操作系统文件损坏而不能启动。</p>
 <h2><b>结论</b></h2>
 <p data-pid="Yb1B6bCM">所以说按住电源键关机对硬件完全没有损伤，硬盘也不会一下掉电而要用到掉电保护的功能：</p><a href="https://zhuanlan.zhihu.com/p/32907254" data-draft-node="block" data-draft-type="link-card" data-image="https://pic4.zhimg.com/v2-78cc3d5138abf240a53cbc8465097527_180x120.jpg" data-image-width="670" data-image-height="335" class="internal">老狼：硬盘忽然掉电会损坏硬盘和数据吗？</a>
 <p data-pid="2TpU6RY0">和正常关机一样。真正需要担忧的是数据的安全问题。</p>
 <h2><b>其他</b></h2>
 <p data-pid="Xkp4Xu19"><b>话说回来拔电源或者家里如果停电会伤害硬件吗？</b>实际上机械硬盘并不需要担心，<b>真正需要担心的是SSD和主板</b>。看过我们固态硬盘系列的读者应该都知道FTL的存在（<a href="https://zhuanlan.zhihu.com/p/26944064" class="internal">杂谈闪存三：FTL</a>）。FTL的逻辑块和物理块的转换表必须存储在NAND Flash上，否则会造成混乱；高端企业级硬盘上有大量的DRAM来加速，其中的内容也必须存储下来。</p>
 <p data-pid="A-h7FpMA">在正常关电的时候，和机械硬盘类似，SATA的STANDBY IMMEDIATE命令和SCSI的Stop指令是合适的存储这些信息的机会。SSD控制器可以从容的将这些信息写在合适的地方。</p>
 <p data-pid="hZGkm8xh">在意外掉电的情况下，情况就复杂不少。不知道大家注意过没有，现在M.2的SSD上面有很多很小的电容：</p>
 <figure data-size="normal">
  <img src="https://picx.zhimg.com/50/v2-8790d2570f16ced5f95e6551e67b255d_720w.jpg?source=1940ef5c" data-caption="" data-size="normal" data-rawwidth="640" data-rawheight="203" data-original-token="v2-8790d2570f16ced5f95e6551e67b255d" class="origin_image zh-lightbox-thumb" width="640" data-original="https://picx.zhimg.com/v2-8790d2570f16ced5f95e6551e67b255d_r.jpg?source=1940ef5c">
 </figure>
 <p data-pid="-Zn1gbl3">在Vcc没电的时候，这些电容的gate就会打开，会为主控争取1ms左右的时间。主控会立刻放弃现在所有没有存储的数据，而立刻开始存储FTL表，保证不会出大问题。</p>
 <p data-pid="Ho4iyp2n">在企业级的SSD中，有的DRAM大小将近1GB，而企业SSD的数据完整性要求极高，不容有失，不但FTL表要存好，DRAM中没有存储过的，也必须全部存下来。这就需要很大的电容，来争取更多的时间，如果我们拆开企业SSD，就会发现很多大黄快：</p>
 <figure data-size="normal">
  <img src="https://picx.zhimg.com/50/v2-fdff20662afd517482f6902489065af5_720w.jpg?source=1940ef5c" data-caption="" data-size="normal" data-rawwidth="640" data-rawheight="421" data-original-token="v2-fdff20662afd517482f6902489065af5" class="origin_image zh-lightbox-thumb" width="640" data-original="https://picx.zhimg.com/v2-fdff20662afd517482f6902489065af5_r.jpg?source=1940ef5c">
 </figure>
 <p data-pid="EEi0M_jq">这个Micron的SSD有3块，而Intel的部分SSD，因为DRAM很大，大电容达到8块！</p>
 <p data-pid="YlLamsPn"><b>有些低端SSD厂商，没有电容，或者在长时间使用后电容能力下降。在掉电后，FTL表并没有存下来。而是采取在下一次上电的时候重建FTL表，这是用户就会发现SSD反应很慢，要一会才会恢复正常。SSD固件写的不好的，SSD不能用也是可能的。</b></p>
 <p data-pid="b1bxpa8i"><b>对主板的伤害主要在于掉电前后的电涌和电流波动，不好的电源+劣质主板有可能损坏主板。这样是我推荐电源一定要选个好的原因之一。</b></p>
 <p data-pid="Filue6c0">=======评论区分界==========</p>
 <p data-pid="Cs1VlKrQ">评论区有同学提到电源的保持时间最少有16ms（最低标准），不是够SSD保存数据了吗？这个16ms实际上是一个交流周期，它是和UPS来一起工作的。这个16ms对SSD和硬盘没有帮助，因为电源和硬盘之间是没有信号交换的，就是说电源不能把“我要马上没电了，快保存吧！”传给硬盘。对于硬盘和SSD来说还是忽然掉电。</p>
 <p data-pid="FleRbmsQ">文章颇受好评，评论区读下来发现大家对<b>计算机/笔记本电源都有一个深深地误解</b>，认为电源按钮没按，CPU风扇没转，整个主板和计算机系统就没电；关机按钮按下，风扇不转了，主板和计算机系统也就没电了。可你们发现没有，前面板的电源按钮连接的电源开关线恰恰就直接连接到主板上：</p>
 <figure data-size="normal">
  <img src="https://picx.zhimg.com/50/v2-c58dcb1ecee9c1428b4efb197612387c_720w.jpg?source=1940ef5c" data-caption="" data-size="normal" data-rawwidth="500" data-rawheight="375" data-original-token="v2-184eceae985e0d49275953dea89f918e" data-default-watermark-src="https://pic1.zhimg.com/50/v2-075d2f46c103debcf35727c086936ada_720w.jpg?source=1940ef5c" class="origin_image zh-lightbox-thumb" width="500" data-original="https://picx.zhimg.com/v2-c58dcb1ecee9c1428b4efb197612387c_r.jpg?source=1940ef5c">
 </figure>
 <p data-pid="6nyT9sjY">前面板的电源按钮并没有连接到电源上。如果主板没电，按钮按下的信号如何传递给电源呢？关机后又如何开机呢？实际上只要电源线没有被拔掉，无论电源按键按下与否，主板的部分还是有点的，包括：EC（如果有）、BMC（如果有）、CPLD、ME和围绕它们的电路。这就是G3和G2的区别。我写了篇文章专门介绍了一下：</p><a href="https://zhuanlan.zhihu.com/p/54734880" data-draft-node="block" data-draft-type="link-card" data-image="https://pic4.zhimg.com/v2-5a42866b242d1f6898f4d36a00586203_180x120.jpg" data-image-width="1200" data-image-height="800" class="internal">老狼：电源是如何供给电力主板的，又是如何切断的？</a>
 <p data-pid="tpZd8jbi"><b>BIOS培训云课堂</b>：</p><a href="https://link.zhihu.com/?target=https%3A//cloudclass.zqtong.com/hall" data-draft-node="block" data-draft-type="link-card" class=" wrap external" target="_blank" rel="nofollow noreferrer">卓易云课堂</a>
 <p data-pid="HgYjy84j">欢迎大家关注我的专栏和用微信扫描下方二维码加入微信公众号"UEFIBlog"，在那里有最新的文章。</p>
 <figure data-size="normal">
  <img src="https://picx.zhimg.com/50/v2-121ecd3d4080deb1c557bf47dc00d246_720w.jpg?source=1940ef5c" data-size="normal" data-rawwidth="511" data-rawheight="368" data-original-token="v2-121ecd3d4080deb1c557bf47dc00d246" class="origin_image zh-lightbox-thumb" width="511" data-original="https://pica.zhimg.com/v2-121ecd3d4080deb1c557bf47dc00d246_r.jpg?source=1940ef5c">
  <figcaption>
   用微信扫描二维码加入UEFIBlog公众号
  </figcaption>
 </figure>
 <p></p>
</body>
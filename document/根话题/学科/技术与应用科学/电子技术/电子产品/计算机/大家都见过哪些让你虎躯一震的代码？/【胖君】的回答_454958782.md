# 大家都见过哪些让你虎躯一震的代码？
- 点赞数：6039
- 更新时间：2022年03月29日10时53分15秒
- 回答url：https://www.zhihu.com/question/287421003/answer/454958782
<body>
 <p data-pid="dPg_wiBO">主要是刚做了个leetcode每周contest。被第一名的答案吓到了。。。可能对大神来说是雕虫小技，anyway╮(╯▽╰)╭</p>
 <p class="ztext-empty-paragraph"><br></p>
 <p data-pid="k0WNBTXb">是这样，说有偶数个数字，alex和lee两个人比赛，由alex先选，每次轮流从第一个数字或最后一个数字中拿走一个（偶数个数字，所以他俩拿的数字个数相同），最后比谁拿的数字总和大。题目是让我们设计一个算法，对于任意给定的一系列数字，假设双方都能做出最优选择的情况下，判断输赢（所有数加起来是奇数，所以不存在平局）？alex赢返回true，bob赢返回false。比如有，</p>
 <div class="highlight">
  <pre><code class="language-text">[4,3,5,9,11,6,2,1]</code></pre>
 </div>
 <p data-pid="hAQReVTA">alex拿掉开头的4，剩下，</p>
 <div class="highlight">
  <pre><code class="language-text">[3,5,9,11,6,2,1]</code></pre>
 </div>
 <p data-pid="ILJhA1zp">lee再拿掉开头的3，剩下</p>
 <div class="highlight">
  <pre><code class="language-text">[5,9,11,6,2,1]</code></pre>
 </div>
 <p data-pid="UxdpiON8">以此类推。</p>
 <p data-pid="swVFpqa8">力扣原题链接：</p><a href="https://link.zhihu.com/?target=https%3A//leetcode.com/problems/stone-game/" data-draft-node="block" data-draft-type="link-card" data-image="https://pic1.zhimg.com/v2-0c435ab948b151fd834be55f80a09794_180x120.jpg" data-image-width="500" data-image-height="260" class=" wrap external" target="_blank" rel="nofollow noreferrer">leetcode-877. Stone Game</a>
 <p class="ztext-empty-paragraph"><br></p>
 <p data-pid="QHW7MifO">题目不难，朴素的暴力递归所有可能的走法，回归的时候只贪心地保留更优的那个解就可以了。然后对于可能的重复的子问题，用一个表储存之前所有解决过的子问题解（动态规划）就可以避免指数级增长的复杂度。</p>
 <div class="highlight">
  <pre><code class="language-java"><span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">stoneGame</span><span class="o">(</span><span class="kt">int</span><span class="o">[]</span> <span class="n">piles</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">p</span> <span class="o">=</span> <span class="n">piles</span><span class="o">;</span>
    <span class="kt">int</span> <span class="n">len</span> <span class="o">=</span> <span class="n">piles</span><span class="o">.</span><span class="na">length</span><span class="o">;</span>
    <span class="n">dp</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">int</span><span class="o">[</span><span class="n">len</span><span class="o">][</span><span class="n">len</span><span class="o">];</span>
    <span class="k">return</span> <span class="n">dp</span><span class="o">(</span><span class="n">0</span><span class="o">,</span><span class="n">piles</span><span class="o">.</span><span class="na">length</span><span class="o">-</span><span class="n">1</span><span class="o">)</span> <span class="o">&gt;</span> <span class="n">0</span><span class="o">;</span>
<span class="o">}</span>

<span class="kd">private</span> <span class="kt">int</span><span class="o">[]</span> <span class="n">p</span><span class="o">;</span>        <span class="c1">//copy of piles
</span><span class="c1"></span><span class="kd">private</span> <span class="kt">int</span><span class="o">[][]</span> <span class="n">dp</span><span class="o">;</span>     <span class="c1">//solved subproblems
</span><span class="c1"></span>
<span class="kd">private</span> <span class="kt">int</span> <span class="nf">dp</span><span class="o">(</span><span class="kt">int</span> <span class="n">lo</span><span class="o">,</span> <span class="kt">int</span> <span class="n">hi</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">lo</span> <span class="o">&gt;</span> <span class="n">hi</span><span class="o">)</span> <span class="k">return</span> <span class="n">0</span><span class="o">;</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">dp</span><span class="o">[</span><span class="n">lo</span><span class="o">][</span><span class="n">hi</span><span class="o">]</span> <span class="o">!=</span> <span class="n">0</span><span class="o">)</span> <span class="k">return</span> <span class="n">dp</span><span class="o">[</span><span class="n">lo</span><span class="o">][</span><span class="n">hi</span><span class="o">];</span>
    <span class="kt">int</span> <span class="n">res</span> <span class="o">=</span> <span class="n">0</span><span class="o">;</span>
    <span class="k">if</span> <span class="o">((</span><span class="n">hi</span> <span class="o">-</span> <span class="n">lo</span> <span class="o">+</span> <span class="n">1</span><span class="o">)</span> <span class="o">%</span> <span class="n">2</span> <span class="o">==</span> <span class="n">0</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">res</span> <span class="o">=</span> <span class="n">Math</span><span class="o">.</span><span class="na">max</span><span class="o">(</span><span class="n">dp</span><span class="o">(</span><span class="n">lo</span><span class="o">+</span><span class="n">1</span><span class="o">,</span><span class="n">hi</span><span class="o">)</span> <span class="o">+</span> <span class="n">p</span><span class="o">[</span><span class="n">lo</span><span class="o">],</span> <span class="n">dp</span><span class="o">(</span><span class="n">lo</span><span class="o">,</span><span class="n">hi</span><span class="o">-</span><span class="n">1</span><span class="o">)</span> <span class="o">+</span> <span class="n">p</span><span class="o">[</span><span class="n">hi</span><span class="o">]);</span>
    <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
        <span class="n">res</span> <span class="o">=</span> <span class="n">Math</span><span class="o">.</span><span class="na">min</span><span class="o">(</span><span class="n">dp</span><span class="o">(</span><span class="n">lo</span><span class="o">+</span><span class="n">1</span><span class="o">,</span><span class="n">hi</span><span class="o">)</span> <span class="o">-</span> <span class="n">p</span><span class="o">[</span><span class="n">lo</span><span class="o">],</span> <span class="n">dp</span><span class="o">(</span><span class="n">lo</span><span class="o">,</span><span class="n">hi</span><span class="o">-</span><span class="n">1</span><span class="o">)</span> <span class="o">-</span> <span class="n">p</span><span class="o">[</span><span class="n">hi</span><span class="o">]);</span>
    <span class="o">}</span>
    <span class="n">dp</span><span class="o">[</span><span class="n">lo</span><span class="o">][</span><span class="n">hi</span><span class="o">]</span> <span class="o">=</span> <span class="n">res</span><span class="o">;</span>
    <span class="k">return</span> <span class="n">res</span><span class="o">;</span>
<span class="o">}</span></code></pre>
 </div>
 <p class="ztext-empty-paragraph"><br></p>
 <p data-pid="MZ8wV2a6">也可以写成自底向上的动态规划，</p>
 <div class="highlight">
  <pre><code class="language-java"><span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">stoneGame</span><span class="o">(</span><span class="kt">int</span><span class="o">[]</span> <span class="n">piles</span><span class="o">)</span> <span class="o">{</span>
    <span class="kt">int</span> <span class="n">len</span> <span class="o">=</span> <span class="n">piles</span><span class="o">.</span><span class="na">length</span><span class="o">;</span>
    <span class="kt">int</span><span class="o">[][]</span> <span class="n">dp</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">int</span><span class="o">[</span><span class="n">len</span><span class="o">][</span><span class="n">len</span><span class="o">];</span>
    <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">len</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="n">dp</span><span class="o">[</span><span class="n">i</span><span class="o">][</span><span class="n">i</span><span class="o">]</span> <span class="o">=</span> <span class="o">-</span><span class="n">piles</span><span class="o">[</span><span class="n">i</span><span class="o">];</span>
    <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">dis</span> <span class="o">=</span> <span class="n">1</span><span class="o">,</span> <span class="n">isAlex</span> <span class="o">=</span> <span class="n">1</span><span class="o">;</span> <span class="n">dis</span> <span class="o">&lt;</span> <span class="n">len</span><span class="o">;</span> <span class="n">dis</span><span class="o">++,</span> <span class="n">isAlex</span> <span class="o">=</span> <span class="o">-</span><span class="n">isAlex</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">lo</span> <span class="o">=</span> <span class="n">0</span><span class="o">,</span> <span class="n">hi</span> <span class="o">=</span> <span class="n">lo</span> <span class="o">+</span> <span class="n">dis</span><span class="o">;</span> <span class="n">lo</span> <span class="o">&lt;</span> <span class="n">len</span> <span class="o">-</span> <span class="n">dis</span><span class="o">;</span> <span class="n">lo</span><span class="o">++)</span> <span class="o">{</span>
            <span class="kt">int</span> <span class="n">takeHead</span> <span class="o">=</span> <span class="n">piles</span><span class="o">[</span><span class="n">lo</span><span class="o">]</span> <span class="o">*</span> <span class="n">isAlex</span> <span class="o">+</span> <span class="n">dp</span><span class="o">[</span><span class="n">lo</span> <span class="o">+</span> <span class="n">1</span><span class="o">][</span><span class="n">hi</span><span class="o">];</span>
            <span class="kt">int</span> <span class="n">takeTail</span> <span class="o">=</span> <span class="n">piles</span><span class="o">[</span><span class="n">hi</span><span class="o">]</span> <span class="o">*</span> <span class="n">isAlex</span> <span class="o">+</span> <span class="n">dp</span><span class="o">[</span><span class="n">lo</span><span class="o">][</span><span class="n">hi</span> <span class="o">-</span> <span class="n">1</span><span class="o">];</span>
            <span class="n">dp</span><span class="o">[</span><span class="n">lo</span><span class="o">][</span><span class="n">hi</span><span class="o">]</span> <span class="o">=</span> <span class="n">Math</span><span class="o">.</span><span class="na">max</span><span class="o">(</span><span class="n">takeHead</span><span class="o">,</span> <span class="n">takeTail</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="n">dp</span><span class="o">[</span><span class="n">0</span><span class="o">][</span><span class="n">len</span> <span class="o">-</span> <span class="n">1</span><span class="o">]</span> <span class="o">&gt;</span> <span class="n">0</span><span class="o">;</span>
<span class="o">}</span></code></pre>
 </div>
 <p class="ztext-empty-paragraph"><br></p>
 <p data-pid="9FO3gCf_">结束以后，发现排名第一的日本选手<b>从读题，到思考，到写出代码，并被判定为有效，一共只用了1分34秒。纳尼？</b></p>
 <figure data-size="normal">
  <img src="https://picx.zhimg.com/50/v2-c0446085c6def01c58610dc488793ade_720w.jpg?source=1940ef5c" data-caption="" data-size="normal" data-rawwidth="2546" data-rawheight="756" data-original-token="v2-29aec13042d861dc46b30d1772ff0da7" data-default-watermark-src="https://pic1.zhimg.com/50/v2-15a20e653ed115230e0088e41948f149_720w.jpg?source=1940ef5c" class="origin_image zh-lightbox-thumb" width="2546" data-original="https://picx.zhimg.com/v2-c0446085c6def01c58610dc488793ade_r.jpg?source=1940ef5c">
 </figure>
 <figure data-size="normal">
  <img src="https://picx.zhimg.com/50/v2-a69701c7053b95a388b3d83676187441_720w.jpg?source=1940ef5c" data-size="normal" data-rawwidth="474" data-rawheight="66" data-original-token="v2-a69701c7053b95a388b3d83676187441" class="origin_image zh-lightbox-thumb" width="474" data-original="https://pic1.zhimg.com/v2-a69701c7053b95a388b3d83676187441_r.jpg?source=1940ef5c">
  <figcaption>
   3分53秒提交第一题，5分27秒提交第本题（第二题）
  </figcaption>
 </figure>
 <p data-pid="janYYDB8">1分34秒是一个什么概念？像我这种英文蹩脚的，应该连题都没读完（原题一两百个英文单词）。前十名里多半是现役ACM竞赛选手，基本思路也都是动态规划，5分钟能写出来并且bug free已经不错了。</p>
 <p data-pid="S2EsHwmq">我当然就很好奇，这位骨骼清奇的少年到底是怎么做到的，结果点进去看他的答案，</p>
 <figure data-size="normal">
  <img src="https://picx.zhimg.com/50/v2-2372eb817f8c182d1b81891248658b9b_720w.jpg?source=1940ef5c" data-size="normal" data-rawwidth="2314" data-rawheight="824" data-original-token="v2-03577ed72fca6a9f25a2873be76d57b8" data-default-watermark-src="https://pic1.zhimg.com/50/v2-2f2bffcf3e180c28308ff3651b9b14b0_720w.jpg?source=1940ef5c" class="origin_image zh-lightbox-thumb" width="2314" data-original="https://pic1.zhimg.com/v2-2372eb817f8c182d1b81891248658b9b_r.jpg?source=1940ef5c">
  <figcaption>
   一行代码: return true
  </figcaption>
 </figure>
 <p class="ztext-empty-paragraph"><br></p>
 <p data-pid="7pyG0Z4H">是的！事实就是，</p>
 <blockquote data-pid="zU2MHIYD">
  <b>先走的人必胜</b>！
 </blockquote>
 <p data-pid="4benKfgc">请记住这位风一样的少年，他叫uwi!</p>
 <p data-pid="QvZ-xXNs">凡夫俗子是用程序解问题，人家嫌太慢，直接用肉脑解决好问题告诉电脑答案。简直是作弊好吗。</p>
 <p class="ztext-empty-paragraph"><br></p>
 <p data-pid="S1me5Isb">看了 <a class="member_mention" href="https://www.zhihu.com/people/ea0ab6a59e9a8224983ef7fdf61ac229" data-hash="ea0ab6a59e9a8224983ef7fdf61ac229" data-hovercard="p$b$ea0ab6a59e9a8224983ef7fdf61ac229">@张一钊</a> 同学的评论，跑去翻了一下uwi资料，原来人家常年霸占Leetcode以及HackerRank排名第一。</p>
 <figure data-size="normal">
  <img src="https://pic1.zhimg.com/50/v2-9401dd64dbae0dce11c911411339d051_720w.jpg?source=1940ef5c" data-caption="" data-size="normal" data-rawwidth="750" data-rawheight="92" data-original-token="v2-9401dd64dbae0dce11c911411339d051" class="origin_image zh-lightbox-thumb" width="750" data-original="https://picx.zhimg.com/v2-9401dd64dbae0dce11c911411339d051_r.jpg?source=1940ef5c">
 </figure>
 <p data-pid="IZkWTCoa">如果OJ只是他周末的一个娱乐项目，你怕不怕？</p>
 <figure data-size="normal">
  <img src="https://picx.zhimg.com/50/v2-e4a3251ad4f561f88872b36c984e69ea_720w.jpg?source=1940ef5c" data-caption="" data-size="normal" data-rawwidth="1590" data-rawheight="440" data-original-token="v2-8f5a3367445ae9244087256db5ecf563" data-default-watermark-src="https://picx.zhimg.com/50/v2-fc39e77385a60ec5b1179e7212525529_720w.jpg?source=1940ef5c" class="origin_image zh-lightbox-thumb" width="1590" data-original="https://picx.zhimg.com/v2-e4a3251ad4f561f88872b36c984e69ea_r.jpg?source=1940ef5c">
 </figure>
 <p class="ztext-empty-paragraph"><br></p>
 <p data-pid="AQKnteZr">------分割分割---------</p>
 <p data-pid="s0l1c-V1">评论区说这题是套路，确实。我其实挺佩服这帮搞竞赛的，普通人能思考一会儿的问题，到他们这里就是彻底被玩坏了。鄙人区区一介搬砖码农，格局还是小了。</p>
 <p class="ztext-empty-paragraph"><br></p>
 <p data-pid="x1Dh3v7Z">------------安利--------------</p>
 <p data-pid="6jThW6W9">还是喜欢用自己的编辑器解leetcode？又觉得每题自己搭环境，写测试很麻烦？推荐给用Java刷leetcode的小伙伴一个小工具：<code><b>leetcode-helper</b></code> 。自动帮你生成骨架类，可以节省好多时间。</p><a href="https://link.zhihu.com/?target=https%3A//github.com/helloShen/leetcode-helper" data-draft-node="block" data-draft-type="link-card" data-image="https://pic2.zhimg.com/v2-781a721c01a4139223f17e089d52135d_ipico.jpg" data-image-width="171" data-image-height="171" class=" wrap external" target="_blank" rel="nofollow noreferrer">helloShen/leetcode-helper</a>
 <p data-pid="aYrM3yzy">下载地址（最新v0.55）:</p>
 <ul>
  <li data-pid="7rUPIiFf">【<a href="https://link.zhihu.com/?target=https%3A//github.com/helloShen/leetcode-helper/releases/download/v0.55/leetcode-helper-v0.55.tar" class=" wrap external" target="_blank" rel="nofollow noreferrer">leetcode-helper-v0.55.tar</a>】</li>
  <li data-pid="DxbeNGaG">【<a href="https://link.zhihu.com/?target=https%3A//github.com/helloShen/leetcode-helper/releases/download/v0.55/leetcode-helper-v0.55.tar.gz" class=" wrap external" target="_blank" rel="nofollow noreferrer">leetcode-helper-v0.55.tar.gz</a>】</li>
  <li data-pid="zCo14KAu">【<a href="https://link.zhihu.com/?target=https%3A//github.com/helloShen/leetcode-helper/releases/download/v0.55/leetcode-helper-v0.55.zip" class=" wrap external" target="_blank" rel="nofollow noreferrer">leetcode-helper-v0.55.zip</a>】</li>
 </ul>
 <p class="ztext-empty-paragraph"><br></p>
 <p data-pid="zHv0oWwE">一键生成[Soluiton/Test/TestRunner]骨架。一键编译，运行JUnit单元测试（内置JUnit,log4j,slf4j）</p>
 <figure data-size="normal">
  <img src="https://pica.zhimg.com/50/v2-d0b6e9e0bfa8c421e3b0a9dc7603393d_720w.gif?source=1940ef5c" data-size="normal" data-rawwidth="640" data-rawheight="320" data-original-token="v2-d0b6e9e0bfa8c421e3b0a9dc7603393d" data-thumbnail="https://pic1.zhimg.com/50/v2-d0b6e9e0bfa8c421e3b0a9dc7603393d_720w.jpg?source=1940ef5c" class="origin_image zh-lightbox-thumb" width="640" data-original="https://pica.zhimg.com/v2-d0b6e9e0bfa8c421e3b0a9dc7603393d_r.jpg?source=1940ef5c">
  <figcaption>
   一键生成[Solution/Test/TestRunner]骨架
  </figcaption>
 </figure>
 <figure data-size="normal">
  <img src="https://pic1.zhimg.com/50/v2-75912eaa385c4d3f65c18234b02aa298_720w.gif?source=1940ef5c" data-size="normal" data-rawwidth="640" data-rawheight="346" data-original-token="v2-75912eaa385c4d3f65c18234b02aa298" data-thumbnail="https://picx.zhimg.com/50/v2-75912eaa385c4d3f65c18234b02aa298_720w.jpg?source=1940ef5c" class="origin_image zh-lightbox-thumb" width="640" data-original="https://picx.zhimg.com/v2-75912eaa385c4d3f65c18234b02aa298_r.jpg?source=1940ef5c">
  <figcaption>
   一键编译，运行JUnit单元测试
  </figcaption>
 </figure>
 <p data-pid="3_cVto4l">另外还内置了leetcode常用数据结构包<code>com.ciaoshen.leetcode.util</code>。 比如常用的<code>ListNode</code>，<code>TreeNode</code>的基本实现都写好了。</p>
 <p data-pid="ZL0biWcv">只有一个单独<code>leetcode-helper.jar</code>包， 放到你的classpath底下，再把<code>build.xml</code>和<code>problem.properties</code>放到项目根目录就行了。</p>
 <p data-pid="uRb_qdyL">节省很多搭环境的时间，专注在算法上。</p>
</body>
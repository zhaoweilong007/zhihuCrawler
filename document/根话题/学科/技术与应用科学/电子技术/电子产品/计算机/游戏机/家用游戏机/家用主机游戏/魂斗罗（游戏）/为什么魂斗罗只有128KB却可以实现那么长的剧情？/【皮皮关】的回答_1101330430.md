# 为什么魂斗罗只有128KB却可以实现那么长的剧情？
- 点赞数：21699
- 更新时间：2020年04月13日15时12分27秒
- 回答url：https://www.zhihu.com/question/50076174/answer/1101330430
<body>
 <p data-pid="2kLYaD60">统一声明：有好几位网友发私信评论告诉我，最近著名公众号“差评”也发布了与这个知乎问题主题一致的文章，核心内容借鉴了本问题下几个答主的主要思想。</p>
 <p data-pid="H2fU94mp">我认为红白机时代的资源压缩技术属于网络上公开的知识，并不是某个答主的专利，所以每个人都可以用自己的话总结成科普文章发表。将文章结构分为数据容量、图形、音乐三部分，算是思路上的借鉴。</p>
 <p data-pid="qvpDSx2I">互联网时代的“原创”文章内容总会出现重叠和交集，如果是某人原创的思想被别人借用，就涉嫌“抄袭或洗稿”；如果是公开的知识则不算。还是要具体问题具体分析。</p>
 <p data-pid="mBi3VbRA">———————————————————————————</p>
 <p data-pid="0LgZtcyl">现代程序员A和1980年代游戏程序员B的对话：</p>
 <p data-pid="dw9BdOm0">A：为什么你用128KB能实现这么多画面、音乐、动画？</p>
 <p data-pid="aV4eCkRG">B：128KB还不够么？其实为了表现力已经相当奢侈了，加了很多不重要的细节。</p>
 <p data-pid="il3-iyAP">A：就说你们的音乐，这个音乐，我压到最低码率的mp3，也得至少1MB吧。</p>
 <p data-pid="bPijEX8f">B：你怎么压的？一首背景音乐怎么可能超过1KB。</p>
 <p data-pid="VCN9TXS8">A：那你实现全屏卷轴，用了多少显存？</p>
 <p data-pid="2uwZAXt_">B：一共就只有2KB显存，多了也放不下啊。</p>
 <p data-pid="U79pZBkm">A：……</p>
 <h2>1、我们对“数据量”无法直观认识</h2>
 <p data-pid="wiLgDd5r">除非是专家，一般人根本无法估算到底多大算大，多小算小。</p>
 <p data-pid="kq3DDzjb">一般人对“数据量”并没什么概念。一篇800字的作文有多少数据量？按照GBK编码，约1.6KB，按照UTF-8编码，则是2.4KB。</p>
 <p data-pid="EKClj3sK">只写了1个字的作文，按理来说1字节~3字节就够了。但只写1个字的word文档，有10956字节【汗】。而由于硬盘格式化要求，再多占用1332字节【再汗】。</p>
 <figure data-size="normal">
  <img src="https://pica.zhimg.com/50/v2-a4c3bd416e7d77c8b5833a1e0148f5a6_720w.jpg?source=1940ef5c" data-size="normal" data-rawwidth="264" data-rawheight="70" data-original-token="v2-0899a0f51e0d6a48e5b5c0a87e8bb031" data-default-watermark-src="https://pic1.zhimg.com/50/v2-2f7f36fbc327301ed8b0db2c383a9783_720w.jpg?source=1940ef5c" class="content_image" width="264">
  <figcaption>
   我就写了一个字，真的什么都没干
  </figcaption>
 </figure>
 <p data-pid="110vMWFk">现实中常见的产品、流行的技术，实际上和时代背景密切相关。</p>
 <p data-pid="747N-qQt">当你抱着15寸笔记本还嫌小的时候，1990年代初的家庭，可是一家人围着14~18寸的球面电视看的。把雪碧拿给古代人喝一口，估计他会齁得要死，必须喝点水压压惊。</p>
 <p data-pid="ocsX3G3o">当物质基础变得十分丰富的时候，一定会产生无法避免的“浪费”，这种“浪费”会进一步改变人感受的阈值，对度量的估计都变得紊乱了。</p>
 <h2>2、FC时代的图形技术</h2>
 <p data-pid="cJYeguHz">由于早期的记忆芯片（ROM）非常贵，而且大容量磁盘的技术也不成熟，所以暂且不论硬件计算能力，仅仅是想增加游戏的总容量也非常困难。所以自然会使用符合当时水平的数据结构。</p>
 <p data-pid="-1mA3MVN">以红白机FC为例，它的分辨率为256x240。分辨率不算低，但却只有2KB显存，而且还要实现全屏卷轴效果。所以在FC设计之初，从硬件上就提供了充分利用显存的方法——使用Tile（瓦片）。</p>
 <p data-pid="v36qTynb">对每一个场景来说，使用若干数量的瓦片，场景用有限的瓦片拼接即可。这种“二级”表示方法能极大节约存储量。具体一些原理讲解可以看一些科普，比如这个：</p><a href="https://link.zhihu.com/?target=https%3A//www.bilibili.com/video/BV19J411e763" data-draft-node="block" data-draft-type="link-card" data-image="https://pic2.zhimg.com/v2-eb335d3301d2c898b9ea2cd553774cd9_180x120.jpg" data-image-width="1280" data-image-height="800" class=" wrap external" target="_blank" rel="nofollow noreferrer">【萌新图形学】TileMap瓦片地图简介，以及它的优化原理_哔哩哔哩 (゜-゜)つロ 干杯~-bilibili</a>
 <figure data-size="normal">
  <img src="https://pic1.zhimg.com/50/v2-289430bedc0eeba0c7d8de060aeb2f68_720w.jpg?source=1940ef5c" data-caption="" data-size="normal" data-rawwidth="965" data-rawheight="535" data-original-token="v2-6f0414f5a58fcbbb678ca46f1464a400" data-default-watermark-src="https://pic1.zhimg.com/50/v2-a7f3aded0d98de71ecad120d2d3833a4_720w.jpg?source=1940ef5c" class="origin_image zh-lightbox-thumb" width="965" data-original="https://picx.zhimg.com/v2-289430bedc0eeba0c7d8de060aeb2f68_r.jpg?source=1940ef5c">
 </figure>
 <h2>3、音频容量和代码容量</h2>
 <p data-pid="VkftlaVu">现代音乐格式往往直接保存声道的波形，这种做法保真度高、通用性强，但很显然占用空间多，一首曲子的容量以千字节、兆字节计算。</p>
 <p data-pid="i4mEQxiJ">而八位芯片时代的音频解决方案，关键是一颗专用芯片，例如FC用的理光2A03：</p>
 <figure data-size="normal">
  <img src="https://pic1.zhimg.com/50/v2-eab21a7523d4412fd4b437f842696991_720w.jpg?source=1940ef5c" data-size="normal" data-rawwidth="500" data-rawheight="500" data-original-token="v2-6d77db14205baa608c02c69e7caf811c" data-default-watermark-src="https://pica.zhimg.com/50/v2-466144932bfa4e9701b46b5371617ebe_720w.jpg?source=1940ef5c" class="origin_image zh-lightbox-thumb" width="500" data-original="https://picx.zhimg.com/v2-eab21a7523d4412fd4b437f842696991_r.jpg?source=1940ef5c">
  <figcaption>
   下：理光2A03
  </figcaption>
 </figure>
 <p data-pid="wMwXmaNC">音频芯片可以产生合成音效，能提供的音色可以在一定程度上配置，但非常有限。听听FC游戏的音乐可以体会到常用的音色几乎一样。我觉得这个音频芯片最厉害的地方是可以同时播放几个音轨（但不能是和弦那种“同时”），《魂斗罗》、《沙罗曼蛇》、《忍者龙剑传》的殿堂级音乐，主要是靠多个音轨的交替配合实现的。</p>
 <p data-pid="WnWczcnM">每个音符只要记录音色、频率和音高就足够了，音频芯片自然会识别出来。把音符按时间排列好就是“乐谱”了，可以简单理解为“简谱”。这种简谱需要的数据量十分有限，而且大部分游戏音乐都是循环播放，数据量更是小的可怜。</p>
 <p data-pid="gpWsas7f">代码也是类似的。</p>
 <p data-pid="hZnoDqpC">FC时代的游戏，没有所谓的“引擎层”，或者说引擎层就是“硬件层”。任天堂的主机完全是为游戏而设计的，瓦片、调色板、音乐、音效等基本功能已经预先考虑到了，这样一来就节约了大量底层代码。</p>
 <p data-pid="Cl4HZEpX">程序员要仔细研究文档，在硬件框架下思考问题，比如如何显示图片、如何卷动屏幕等等；而且还要非常熟悉硬件底层和汇编，不要浪费代码空间。</p>
 <p data-pid="oiAWnAq2">一来二去，代码也能写的非常小。</p>
 <p class="ztext-empty-paragraph"><br></p>
 <p data-pid="PVR4s3Pi">总的来说，128KB的游戏大作，在30年前稀松平常，放到现在简直就是黑科技。科技的剧烈变革带来技术指标非线性的变化，让我们的记忆和直觉彻底落伍 ：）</p>
</body>
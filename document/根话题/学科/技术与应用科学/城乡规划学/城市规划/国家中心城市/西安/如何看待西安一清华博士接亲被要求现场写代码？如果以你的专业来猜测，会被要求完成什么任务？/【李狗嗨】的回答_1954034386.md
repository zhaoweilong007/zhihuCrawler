# 如何看待西安一清华博士接亲被要求现场写代码？如果以你的专业来猜测，会被要求完成什么任务？
- 点赞数：5440
- 更新时间：2021年07月12日17时43分11秒
- 回答url：https://www.zhihu.com/question/466165757/answer/1954034386
<body>
 <p></p>
 <p data-pid="wQG1d13O">为了防止以后有哪位男士娶亲时又遇到该要求而感到捉鸡，我觉得我得做些什么。既然有人提到了新闻中的新郎使用的是 <b>MATLAB</b> 编程，我这个人比较实在，我就直接附上 <b>MATLAB</b> 代码，各位可以收藏一下，以备不时之需。（后面又增添了 Python 版和 Mathematica 版的代码，并将持续更新新的编程语言，也希望各位大佬能够提供其他编程语言的代码。）</p>
 <p data-pid="soHHVBZR">众所周知（狗头），一个完美的三维爱心曲面方程满足下式<sup data-text="Heart Surface" data-url="https://mathworld.wolfram.com/HeartSurface.html" data-draft-node="inline" data-draft-type="reference" data-numero="1">[1]</sup>：</p>
 <p data-pid="2yFWguEW"><img src="https://www.zhihu.com/equation?tex=%28x%5E2%2B%5Cfrac%7B9%7D%7B4%7Dy%5E2%2Bz%5E2-1%29%5E3-x%5E2z%5E3-%5Cfrac%7B9%7D%7B80%7Dy%5E2z%5E3%3D0%5Ctag%7B1%7D" alt="(x^2+\frac{9}{4}y^2+z^2-1)^3-x^2z^3-\frac{9}{80}y^2z^3=0\tag{1}" eeimg="1"></p>
 <p data-pid="EqAqd6uS">所以，不论是采用何种编程语言进行绘图，均是基于该方程。</p>
 <hr>
 <h2>Matlab</h2>
 <h3>红色</h3>
 <div class="highlight">
  <pre><code class="language-matlab"><span class="n">clc</span><span class="p">;</span><span class="n">clear</span><span class="p">;</span><span class="n">close</span> <span class="n">all</span>
<span class="p">[</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">z</span><span class="p">]=</span><span class="nb">meshgrid</span><span class="p">(</span><span class="nb">linspace</span><span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">));</span>
<span class="n">val</span><span class="p">=(</span><span class="n">x</span><span class="o">.^</span><span class="mi">2</span><span class="o">+</span><span class="p">(</span><span class="mi">9</span><span class="o">/</span><span class="mi">4</span><span class="p">)</span><span class="o">*</span><span class="n">y</span><span class="o">.^</span><span class="mi">2</span><span class="o">+</span><span class="n">z</span><span class="o">.^</span><span class="mi">2</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">.^</span><span class="mi">3</span><span class="o">-</span><span class="n">x</span><span class="o">.^</span><span class="mf">2.</span><span class="o">*</span><span class="n">z</span><span class="o">.^</span><span class="mi">3</span><span class="o">-</span><span class="p">(</span><span class="mi">9</span><span class="o">/</span><span class="mi">80</span><span class="p">)</span><span class="o">.*</span><span class="n">y</span><span class="o">.^</span><span class="mf">2.</span><span class="o">*</span><span class="n">z</span><span class="o">.^</span><span class="mi">3</span><span class="p">;</span>
<span class="n">isosurface</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">z</span><span class="p">,</span><span class="n">val</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="n">p</span> <span class="p">=</span> <span class="n">patch</span><span class="p">(</span><span class="n">isosurface</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">z</span><span class="p">,</span><span class="n">val</span><span class="p">,</span><span class="mi">0</span><span class="p">));</span>
<span class="n">set</span><span class="p">(</span><span class="n">p</span><span class="p">,</span><span class="s">'facecolor'</span><span class="p">,</span><span class="s">'red'</span><span class="p">,</span><span class="s">'edgecolor'</span><span class="p">,</span><span class="s">'none'</span><span class="p">);</span>
<span class="n">view</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span>
<span class="n">axis</span> <span class="n">equal</span><span class="p">;</span>
<span class="n">title</span><span class="p">(</span><span class="s">'\fontsize{14}\fontname{songti}你爱我'</span><span class="p">,</span><span class="s">'color'</span><span class="p">,</span><span class="s">'r'</span><span class="p">)</span>
<span class="n">set</span><span class="p">(</span><span class="n">gcf</span><span class="p">,</span><span class="s">'unit'</span><span class="p">,</span><span class="s">'centimeters'</span><span class="p">,</span><span class="s">'position'</span><span class="p">,[</span><span class="mi">18</span> <span class="mi">5</span> <span class="mf">13.53</span> <span class="mf">9.03</span><span class="p">],</span><span class="s">'color'</span><span class="p">,</span><span class="s">'white'</span><span class="p">);</span>
<span class="n">grid</span> <span class="n">on</span></code></pre>
 </div>
 <p data-pid="au2jNh8r">效果图如下：</p>
 <figure data-size="normal">
  <img src="https://picx.zhimg.com/50/v2-d0a1218e3fc772e559946f617faa4c0f_720w.jpg?source=1940ef5c" data-caption="" data-size="normal" data-rawwidth="512" data-rawheight="341" data-original-token="v2-c533294d325aaff60a81178055d5608f" data-default-watermark-src="https://pic1.zhimg.com/50/v2-e78f24674bb86b4ff05d170f98a64df9_720w.jpg?source=1940ef5c" class="origin_image zh-lightbox-thumb" width="512" data-original="https://pic1.zhimg.com/v2-d0a1218e3fc772e559946f617faa4c0f_r.jpg?source=1940ef5c">
 </figure>
 <hr>
 <h3>五彩斑斓</h3>
 <p data-pid="5Kr6oHjU">还有五彩斑斓的：</p>
 <div class="highlight">
  <pre><code class="language-matlab"><span class="n">clc</span><span class="p">;</span><span class="n">clear</span><span class="p">;</span><span class="n">close</span> <span class="n">all</span>
<span class="n">figure</span>
<span class="n">f</span><span class="p">=@(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">z</span><span class="p">)(</span><span class="n">x</span><span class="o">.^</span><span class="mi">2</span><span class="o">+</span><span class="p">(</span><span class="mi">9</span><span class="o">/</span><span class="mi">4</span><span class="p">)</span><span class="o">*</span><span class="n">y</span><span class="o">.^</span><span class="mi">2</span><span class="o">+</span><span class="n">z</span><span class="o">.^</span><span class="mi">2</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">.^</span><span class="mi">3</span><span class="o">-</span><span class="n">x</span><span class="o">.^</span><span class="mf">2.</span><span class="o">*</span><span class="n">z</span><span class="o">.^</span><span class="mi">3</span><span class="o">-</span><span class="p">(</span><span class="mi">9</span><span class="o">/</span><span class="mi">80</span><span class="p">)</span><span class="o">*</span><span class="n">y</span><span class="o">.^</span><span class="mf">2.</span><span class="o">*</span><span class="n">z</span><span class="o">.^</span><span class="mi">3</span><span class="p">;</span>
<span class="p">[</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">z</span><span class="p">]=</span><span class="nb">meshgrid</span><span class="p">(</span><span class="nb">linspace</span><span class="p">(</span><span class="o">-</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">));</span>
<span class="n">val</span><span class="p">=</span><span class="n">f</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">z</span><span class="p">);</span>
<span class="p">[</span><span class="n">p</span><span class="p">,</span><span class="n">v</span><span class="p">]=</span><span class="n">isosurface</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">z</span><span class="p">,</span><span class="n">val</span><span class="p">,</span><span class="mi">0</span><span class="p">);</span>
<span class="n">patch</span><span class="p">(</span><span class="s">'faces'</span><span class="p">,</span><span class="n">p</span><span class="p">,</span><span class="s">'vertices'</span><span class="p">,</span><span class="n">v</span><span class="p">,</span><span class="s">'facevertexcdata'</span><span class="p">,</span><span class="n">jet</span><span class="p">(</span><span class="nb">size</span><span class="p">(</span><span class="n">v</span><span class="p">,</span><span class="mi">1</span><span class="p">)),</span><span class="s">'facecolor'</span><span class="p">,</span><span class="s">'w'</span><span class="p">,</span><span class="s">'edgecolor'</span><span class="p">,</span><span class="s">'flat'</span><span class="p">);</span>
<span class="n">view</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span>
<span class="n">axis</span> <span class="n">equal</span><span class="p">;</span>
<span class="n">title</span><span class="p">(</span><span class="s">'\fontsize{14}\fontname{songti}我爱你'</span><span class="p">,</span><span class="s">'color'</span><span class="p">,</span><span class="s">'r'</span><span class="p">)</span>
<span class="n">set</span><span class="p">(</span><span class="n">gcf</span><span class="p">,</span><span class="s">'unit'</span><span class="p">,</span><span class="s">'centimeters'</span><span class="p">,</span><span class="s">'position'</span><span class="p">,[</span><span class="mi">18</span> <span class="mi">5</span> <span class="mf">13.53</span> <span class="mf">9.03</span><span class="p">],</span><span class="s">'color'</span><span class="p">,</span><span class="s">'white'</span><span class="p">);</span>
<span class="n">grid</span> <span class="n">on</span></code></pre>
 </div>
 <p data-pid="nAGCeDaR">效果图如下：</p>
 <figure data-size="normal">
  <img src="https://picx.zhimg.com/50/v2-9ac469035a0311e019ae945b2435ccff_720w.jpg?source=1940ef5c" data-caption="" data-size="normal" data-rawwidth="512" data-rawheight="341" data-original-token="v2-30ef73a859b2aa682ac6efdda78d3deb" data-default-watermark-src="https://picx.zhimg.com/50/v2-b5557637c9866694fd1339fa200954f7_720w.jpg?source=1940ef5c" class="origin_image zh-lightbox-thumb" width="512" data-original="https://picx.zhimg.com/v2-9ac469035a0311e019ae945b2435ccff_r.jpg?source=1940ef5c">
 </figure>
 <hr>
 <h2>Python</h2>
 <p data-pid="sBGeosy3">你们要的 <b>Python</b> 版来了：</p>
 <div class="highlight">
  <pre><code class="language-python"><span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">skimage</span> <span class="kn">import</span> <span class="n">measure</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">as</span> <span class="nn">plt</span>
<span class="n">plt</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">'font.sans-serif'</span><span class="p">]</span><span class="o">=</span><span class="p">[</span><span class="s1">'SimHei'</span><span class="p">]</span>
<span class="n">plt</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">'axes.unicode_minus'</span><span class="p">]</span> <span class="o">=</span> <span class="bp">False</span>
<span class="k">def</span> <span class="nf">fun</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">x</span><span class="o">**</span><span class="mi">2</span><span class="o">+</span><span class="p">(</span><span class="mi">9</span><span class="o">/</span><span class="mi">4</span><span class="p">)</span><span class="o">*</span><span class="n">y</span><span class="o">**</span><span class="mi">2</span><span class="o">+</span><span class="n">z</span><span class="o">**</span><span class="mi">2</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">**</span><span class="mi">3</span><span class="o">-</span><span class="n">x</span><span class="o">**</span><span class="mi">2</span><span class="o">*</span><span class="n">z</span><span class="o">**</span><span class="mi">3</span><span class="o">-</span><span class="p">(</span><span class="mi">9</span><span class="o">/</span><span class="mi">80</span><span class="p">)</span><span class="o">*</span><span class="n">y</span><span class="o">**</span><span class="mi">2</span><span class="o">*</span><span class="n">z</span><span class="o">**</span><span class="mi">3</span>
<span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mgrid</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">:</span><span class="mi">2</span><span class="p">:</span><span class="mi">100j</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">:</span><span class="mi">2</span><span class="p">:</span><span class="mi">100j</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">:</span><span class="mi">2</span><span class="p">:</span><span class="mi">100j</span><span class="p">]</span>
<span class="n">vol</span> <span class="o">=</span> <span class="n">fun</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">)</span>
<span class="n">iso_val</span><span class="o">=</span><span class="mf">0.0</span>
<span class="n">verts</span><span class="p">,</span> <span class="n">faces</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">measure</span><span class="o">.</span><span class="n">marching_cubes</span><span class="p">(</span><span class="n">vol</span><span class="p">,</span> <span class="n">iso_val</span><span class="p">,</span> <span class="n">spacing</span><span class="o">=</span><span class="p">(</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">))</span>
<span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">111</span><span class="p">,</span> <span class="n">projection</span><span class="o">=</span><span class="s1">'3d'</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot_trisurf</span><span class="p">(</span><span class="n">verts</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">verts</span><span class="p">[:,</span><span class="mi">1</span><span class="p">],</span> <span class="n">faces</span><span class="p">,</span> <span class="n">verts</span><span class="p">[:,</span> <span class="mi">2</span><span class="p">],</span><span class="n">color</span> <span class="o">=</span> <span class="s1">'red'</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">view_init</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span> <span class="o">-</span><span class="mi">120</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">'蜜雪冰城甜蜜蜜'</span><span class="p">,</span><span class="n">color</span><span class="o">=</span><span class="s1">'red'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">'figure.dpi'</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1500</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span></code></pre>
 </div>
 <p data-pid="TOaxdwbF">效果图如下：</p>
 <figure data-size="small">
  <img src="https://pic1.zhimg.com/50/v2-bc635c7ce47722b7151ebcfcf8aa72ff_720w.jpg?source=1940ef5c" data-caption="" data-size="small" data-rawwidth="4914" data-rawheight="5128" data-original-token="v2-7802b8748855ab9e61995089d914a978" data-default-watermark-src="https://picx.zhimg.com/50/v2-4bd58e9c9beead83734dd932066e618a_720w.jpg?source=1940ef5c" class="origin_image zh-lightbox-thumb" width="4914" data-original="https://picx.zhimg.com/v2-bc635c7ce47722b7151ebcfcf8aa72ff_r.jpg?source=1940ef5c">
 </figure>
 <p data-pid="kFdXrcZ2">注意：在运行 Python 代码时，可能会因为个人软件安装的问题出现不同的错误，这里给出两种常见的，一种是：ModuleNotFoundError: No module named 'skimage'</p>
 <p data-pid="aGao2is0">遇到这种报错时，需要在 <b>cmd</b> 中运行：</p>
 <div class="highlight">
  <pre><code class="language-text">pip install scikit-image</code></pre>
 </div>
 <p data-pid="F_HKAe4u">该命令是添加“skimage ”包。</p>
 <p data-pid="EKpaX_Hv">还有一种错误是：ValueError: Unknown projection '3d'</p>
 <p data-pid="7hv5k3bQ">遇到这种错误需要在本文给出的 <b>Python</b> 代码最前面添加一行代码，即可正常运行：</p>
 <div class="highlight">
  <pre><code class="language-python"><span class="kn">from</span> <span class="nn">mpl_toolkits.mplot3d</span> <span class="kn">import</span> <span class="n">Axes3D</span></code></pre>
 </div>
 <hr>
 <h2>Mathematica</h2>
 <p data-pid="o2sV2uKc">感谢 <a class="member_mention" href="https://www.zhihu.com/people/61de364381945d6981019925bea8fbae" data-hash="61de364381945d6981019925bea8fbae" data-hovercard="p$b$61de364381945d6981019925bea8fbae">@mathematica</a> 提供的 <b>Mathematica</b> 代码，看起来更加简洁哈：</p>
 <div class="highlight">
  <pre><code class="language-mathematica"><span class="n">ContourPlot3D</span><span class="p">[(</span><span class="n">x</span><span class="o">^</span><span class="mi">2</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="p">(</span><span class="mi">9</span><span class="o">/</span><span class="mi">4</span><span class="p">)</span><span class="o">*</span><span class="n">y</span><span class="o">^</span><span class="mi">2</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">z</span><span class="o">^</span><span class="mi">2</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="o">^</span><span class="mi">3</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">x</span><span class="o">^</span><span class="mi">2</span><span class="o">*</span><span class="n">z</span><span class="o">^</span><span class="mi">3</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="p">(</span><span class="mi">9</span><span class="o">/</span><span class="mi">80</span><span class="p">)</span><span class="o">*</span><span class="n">y</span><span class="o">^</span><span class="mi">2</span><span class="o">*</span><span class="n">z</span><span class="o">^</span><span class="mi">3</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="mi">-2</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="n">y</span><span class="p">,</span><span class="w"> </span><span class="mi">-1</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="n">z</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">-2</span><span class="p">},</span><span class="w"> 
</span><span class="w"> </span><span class="n">PlotPoints</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w"> </span><span class="n">BoxRatios</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">Automatic</span><span class="p">,</span><span class="w"> </span><span class="n">Mesh</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">None</span><span class="p">,</span><span class="w">  </span><span class="n">Axes</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">None</span><span class="p">,</span><span class="w"> </span><span class="n">Boxed</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">False</span><span class="p">,</span><span class="w"> 
</span><span class="w"> </span><span class="n">ContourStyle</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">{</span><span class="n">Red</span><span class="p">,</span><span class="w"> </span><span class="n">Specularity</span><span class="p">[</span><span class="n">White</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="p">]}]</span></code></pre>
 </div>
 <p data-pid="HXTiGGNm">效果图如下：</p>
 <figure data-size="normal">
  <img src="https://pic1.zhimg.com/50/v2-a983fb028efb2cf6b0300742be8dc693_720w.jpg?source=1940ef5c" data-caption="" data-size="normal" data-rawwidth="394" data-rawheight="250" data-original-token="v2-f98f67fd5798c2cea1e8d402cd63c358" data-default-watermark-src="https://picx.zhimg.com/50/v2-0cb4a6b807250178db8188305b59233a_720w.jpg?source=1940ef5c" class="content_image" width="394">
 </figure>
 <p></p>
</body>
# 搭建家庭 NAS 服务器有什么好方案？
- 点赞数：5580
- 更新时间：2019年09月01日14时51分27秒
- 回答url：https://www.zhihu.com/question/21359049/answer/588579088
<body>
 <p data-pid="I8DKwu_o">我也来说下我的方案，自认为比较完美了，先说效果：</p>
 <p data-pid="k9j8IB6b">1. 7*24小时开机，小型UPS电源保护，断电可自动让NAS优雅的关机，防止对硬盘造成不良影响，电力恢复后自动开机，意外关机后也可远程开机。</p>
 <p data-pid="-vfZ8I00">2. 家庭影院服务器，影视剧使用自动化工具下载，只要把想看的添加进去就可以了，如果有了资源，系统会自动下载并分类整理，包括重命名下载字幕等，当然也可以手动添加种子下载，特别适合玩PT。</p>
 <p data-pid="4nY1o9qe">3. NAS上存储的海量影视等多媒体资源，在家可以在电视上观看，在外可通过手机或电脑客户端在线观看，不需要下载。</p>
 <p data-pid="KQPoqErr">4. 文件共享服务，这是最基本的了，可以很方便的开启SMB、FTP等服务。</p>
 <p data-pid="VHU97J86">5. 私有云盘，实现类似Dropbox和OneDrive的自动同步功能，比如今天我在家拿主力机工作，明天拿轻薄本出去，相关数据在后台自动同步，不需要手动来回拷贝；另外手机客户端可实现照片自动上传至NAS服务器，手机小容量的福音。</p>
 <p data-pid="OaXgP6sh">6. 家里局域网在外随时连接，只要有互联网，可以访问家里任一设备，包括路由器打印机等，和在家访问没有多大区别。其实这个功能是通过另外一个独立的小盒子实现。</p>
 <p data-pid="fQY3rEsK">7，硬件和软件均为DIY，非成品，系统采用开源方案Openmediavault（OMV），需要较强动手能力，暂时想到这么多，有人感兴趣再补充细节……</p>
 <p data-pid="uJv4VlE2">======分割线======</p>
 <p data-pid="OmIxGpmd">2月9日更新：</p>
 <p data-pid="i8I50bb6">有人看了今天就来更新一下。</p>
 <p data-pid="bogD5eYM">先说硬件，上面说了那么多功能，其实硬件配置很简单，照例先上图：</p>
 <figure data-size="normal">
  <img src="https://pic1.zhimg.com/50/v2-d32b535d8fbf8e1fe064d0a280df21bd_720w.jpg?source=1940ef5c" data-rawwidth="300" data-rawheight="211" data-size="normal" data-original-token="v2-d32b535d8fbf8e1fe064d0a280df21bd" data-default-watermark-src="https://pic1.zhimg.com/50/v2-b4f8c17d35eeaa525efd600740d9b054_720w.jpg?source=1940ef5c" class="content_image" width="300">
  <figcaption>
   四盘位U-NAS
  </figcaption>
 </figure>
 <p data-pid="-7m0FNW4">万由四盘位NAS，华擎Q1900-ITX主板，J1900CPU，4G内存，目前我放置了4块4T硬盘，两两做成RAID1，一个主要用来存储个人及工作文档，另一个主要用来存储多媒体资料，为了不占用硬盘插槽，操作系统装在了从主板扩展出来的SATA接口的固态硬盘上。可能有人会问这点配置够吗？可以做HTPC吗，可以看4K视频吗？我的想法是，NAS就回归NAS的本质，做好网络存储功能，将NAS做HTPC使用完全没有必要，因为：1、把NAS同时作为HTPC使用，需要有较高的硬件配置，成本会更高；2、NAS一般需要24小时开机，HTPC需要放在显示器或电视附近，这时候就得考虑位置、散热、噪音等等问题，这些条件都满足吗？3、如果家里部署了千兆网络，使用高清播放盒即可实现高清播放需求，完全没必要利用NAS。因此，这台NAS对于我来说，完全足够，放在阳台角落的一个机柜里，7*24小时开机，功耗、噪音等问题统统可以忽略，非常省心。</p>
 <p data-pid="o2yPwG8j">主要的硬件设备介绍完，但是我认为还缺一项非常重要的设备，即UPS不间断电源。为什么？既然使用NAS了，大家一定比较关注设备和数据的安全性，而家里时不时的会有突然停电的可能，万一硬盘正在读写的过程中突然断电，数据丢失怎么办？虽然我还没有遇到过这种情况，但是考虑到整个NAS系统的完备性与稳定性，防止不必要的麻烦，我在很早的时候就购入了一小型UPS电源，该UPS可支撑NAS运行半个小时左右，有了它，停电时就会通知NAS：“现在停电了，我正在给你供电呢，你需要准备关机了，倒计时开始：45秒，44秒，43秒......（倒计时参数可设置）”，倒计时结束后NAS就可以从容不迫以优雅的姿态关机啦，完全不用担心上述突然断电可能会造成的影响，如果这45秒内电力又恢复了，则取消自动关机。关机后等到电力恢复，NAS会自动开机，也可以手动远程唤醒开机。还是上个图吧，UPS就是这货：</p>
 <figure data-size="normal">
  <img src="https://pic1.zhimg.com/50/v2-6e4044d714c38edd8de1f81399663902_720w.jpg?source=1940ef5c" data-rawwidth="391" data-rawheight="226" data-size="normal" data-original-token="v2-6e4044d714c38edd8de1f81399663902" data-default-watermark-src="https://picx.zhimg.com/50/v2-f8e050cc83c7623d42389b89d34f7b95_720w.jpg?source=1940ef5c" class="content_image" width="391">
  <figcaption>
   APC BK650-CH UPS不间断电源400W 自动开关机电脑 防浪涌
  </figcaption>
 </figure>
 <p data-pid="YVK3gUKD">好了，硬件部分基本介绍完，软件部分涉及的内容比较多，下次有空再继续更新...</p>
 <p data-pid="CB55tcNO">======分割线======</p>
 <p data-pid="sotLkCa8">2月12日更新：</p>
 <p data-pid="d3BX2mPm">大家好，忙完正事了，今天来更新一下，感谢关注。</p>
 <p data-pid="rTlq41_l">在更新之前，先申明几点：</p>
 <p data-pid="Ix3wXsv4">1、关于NAS系统的选择，每个人的需求不尽相同，该方案不一定适合所有人，也有一定的难度。如果你在用成熟的商业软件比如群晖，我建议你继续使用，并不断根据自己的需求增加和配置功能，没有必要从头更换另外一个方案，当然这里指的正版商业软件，不建议盗版。</p>
 <p data-pid="t2-DBHak">2、关于软件功能实现，有些选择也不是唯一的，这里主要提供思路，不会详细到每个软件的具体配置，我会介绍一下大概方向，感兴趣的伙伴可以自行去谷歌或百度，家里搭建NAS服务器的童鞋动手能力应该都不差，之后若有时间可视情况更新一些软件使用经验。</p>
 <p data-pid="e-N3K1IT">3、天下没有免费的午餐，该方案里涉及的某些服务也是收费的，但物有所值。</p>
 <p data-pid="ZJAP-lE4">嗯，啰嗦完了，现在正式开始（好像又要开始重新编号了）。</p>
 <p data-pid="4gIrTsiN">1、系统：前面已经提了，系统采用的是OMV，即openmediavault，我为什么要采用OMV而不是FreeNAS，一是因为FreeNAS需要大内存，我的设备只有4G内存，二是我本人比较熟悉Debian，而OMV正是基于Debian的。OMV官网在此：<a href="https://link.zhihu.com/?target=https%3A//www.openmediavault.org/" class=" wrap external" target="_blank" rel="nofollow noreferrer">The open network attached storage solution</a>。</p>
 <p data-pid="XXfgaBvA">为了不熟悉的童鞋有个直观感受，照例上图：</p>
 <figure data-size="normal">
  <img src="https://pica.zhimg.com/50/v2-79e716d4e2a8057f71e89ab1216a5ef1_720w.jpg?source=1940ef5c" data-rawwidth="2157" data-rawheight="1213" data-size="normal" data-original-token="v2-79e716d4e2a8057f71e89ab1216a5ef1" data-default-watermark-src="https://pic1.zhimg.com/50/v2-6c6b72cefc90a98f098ddbb4a6fdc9f6_720w.jpg?source=1940ef5c" class="origin_image zh-lightbox-thumb" width="2157" data-original="https://pica.zhimg.com/v2-79e716d4e2a8057f71e89ab1216a5ef1_r.jpg?source=1940ef5c">
  <figcaption>
   openmediavault
  </figcaption>
 </figure>
 <p data-pid="RoT0HYzW">由于我家NAS是放阳台的，并没有接显示器和键鼠，也没有图形界面，行话就是headless server，一根网线完事，平时管理NAS，除了登录web界面外，就是ssh远程登录啦，画风是这样的：</p>
 <figure data-size="normal">
  <img src="https://picx.zhimg.com/50/v2-9255a4f5c2f754167d97917c44080e9b_720w.jpg?source=1940ef5c" data-rawwidth="1303" data-rawheight="484" data-size="normal" data-original-token="v2-9255a4f5c2f754167d97917c44080e9b" data-default-watermark-src="https://pic1.zhimg.com/50/v2-f6988a9eb6cdf32921f79b0af08d16d4_720w.jpg?source=1940ef5c" class="origin_image zh-lightbox-thumb" width="1303" data-original="https://picx.zhimg.com/v2-9255a4f5c2f754167d97917c44080e9b_r.jpg?source=1940ef5c">
  <figcaption>
   ssh远程登录nas（你并没有看到密码，因为配置了密钥登录）
  </figcaption>
 </figure>
 <p data-pid="FZAZ0Xif">关于文件共享，我开启了SMB服务，平时使用的画风是这样的，打开我的电脑（不对，WIN10变成了此电脑...），网络位置里多了我映射的网络磁盘即NAS的共享文件夹，双击进入，就和本地硬盘一样。</p>
 <p data-pid="sXagwtu4">细心的人可能还发现了OMV管理界面服务（Service）里面有一项UPS，OMV方便之处就是可以安装各种插件来扩充系统功能，这个UPS插件就叫做openmediavault-nut(Network UPS Tools)。好像有人问怎么配置的，我再来个图吧，注意驱动那一块的设置，因为是通过USB连接的；另外注意Shutdown mode和Shutdown timer的设置，意思就是当检测到UPS电池供电后，倒计时45秒，45秒之内如果还没有恢复供电，则自动关机，如果恢复供电，则取消自动关机。</p>
 <figure data-size="normal">
  <img src="https://pic1.zhimg.com/50/v2-d82ce8ab079ae61b63392b55f8df6138_720w.jpg?source=1940ef5c" data-rawwidth="1716" data-rawheight="699" data-size="normal" data-original-token="v2-d82ce8ab079ae61b63392b55f8df6138" data-default-watermark-src="https://picx.zhimg.com/50/v2-e246aac6f084333408281bd89e8029ed_720w.jpg?source=1940ef5c" class="origin_image zh-lightbox-thumb" width="1716" data-original="https://pic1.zhimg.com/v2-d82ce8ab079ae61b63392b55f8df6138_r.jpg?source=1940ef5c">
  <figcaption>
   openmediavault-nut设置
  </figcaption>
 </figure>
 <p data-pid="AZLs5SjE">好了，系统部分就先简单介绍到这吧，下一部分是重点，多媒体服务器。</p>
 <p data-pid="_62yERG8">2、多媒体部分：</p>
 <p data-pid="HxQG0qa5">答主是是个比较喜欢看电影的人，欧美影视居多，这一块其实涉及的软件还是蛮多的，今天先介绍其中之一吧，当然这款软件很多回答都已经提到了，它就是大名鼎鼎的——Plex。</p>
 <p data-pid="uOlN03M0">1) Plex：</p>
 <p data-pid="kwK7P6RR">大名鼎鼎的Plex，服务端叫作Plex Media Server，客户端涵盖网页浏览器、安卓、苹果等全平台。除了自动从imdb等数据库补全影片介绍等meta信息进行索引外，最重要的还能实时转码，解决客户端不支持某些视频格式或是网速慢等问题。不想打字了，继续上效果图吧。</p>
 <figure data-size="normal">
  <img src="https://pic1.zhimg.com/50/v2-80699a9008334c3ec3f92a7a90dbf7b5_720w.jpg?source=1940ef5c" data-rawwidth="2144" data-rawheight="1038" data-size="normal" data-caption="" data-original-token="v2-80699a9008334c3ec3f92a7a90dbf7b5" data-default-watermark-src="https://pic1.zhimg.com/50/v2-f57a89e9849ff252879420c27b54bfb7_720w.jpg?source=1940ef5c" class="origin_image zh-lightbox-thumb" width="2144" data-original="https://pic1.zhimg.com/v2-80699a9008334c3ec3f92a7a90dbf7b5_r.jpg?source=1940ef5c">
 </figure>
 <figure data-size="normal">
  <img src="https://picx.zhimg.com/50/v2-29796d7010a1b64033b60075cb36780f_720w.jpg?source=1940ef5c" data-rawwidth="2125" data-rawheight="1048" data-size="normal" data-caption="" data-original-token="v2-29796d7010a1b64033b60075cb36780f" data-default-watermark-src="https://picx.zhimg.com/50/v2-a69bf9656795a80658cd3b0ad81b8dbb_720w.jpg?source=1940ef5c" class="origin_image zh-lightbox-thumb" width="2125" data-original="https://picx.zhimg.com/v2-29796d7010a1b64033b60075cb36780f_r.jpg?source=1940ef5c">
 </figure>
 <p data-pid="VtkQamCI">感觉上这两张图把自己收藏的电影电视剧都暴露了......</p>
 <p data-pid="XRHZfMDL">======分割线======</p>
 <p data-pid="M773Igoe">2月15日更新：</p>
 <p data-pid="bMkrg_Tr">大家好，今天我又来更新了，直接进入正题。</p>
 <p data-pid="U8S0yupP">2）自动化工具：</p>
 <p data-pid="femrKQEm">多媒体服务器作为NAS的一项重要功能，如果影视资源能够实现自动化（或半自动化）的下载或整理，无疑将极大提高使用体验，试想一下如果想看一部电影或电视剧，还得满世界寻找资源，好不容易下载到了还需要手动归类整理，下载字幕等等，整个流程十分繁琐，浪费时间不说，兴致可能都减少了一半。</p>
 <p data-pid="_0Ja04iA">好了，我先直接给出我NAS中使用的软件，这些软件相互配合，配置好以后，几乎完全实现了自动化管理，日常我只需要将想看的电影添加进去就行了，寻找资源、下载、整理、字幕等等，都是由这些软件自动完成的。还有一个好消息是：这些软件均是开源的！不需要付任何费用！</p>
 <p data-pid="SB6aLHsy">这些软件分别是:</p>
 <ul>
  <li data-pid="-19l2ZyI"><a href="https://link.zhihu.com/?target=https%3A//sonarr.tv/" class=" wrap external" target="_blank" rel="nofollow noreferrer">Sonarr</a>（我个人将它翻译为“声纳”，电视剧自动化管理软件）;</li>
  <li data-pid="KbdONfjz"><a href="https://link.zhihu.com/?target=https%3A//radarr.video/" class=" wrap external" target="_blank" rel="nofollow noreferrer">Radarr</a>（暂且叫“雷达”吧，电影自动化管理软件）;</li>
  <li data-pid="6YcNsk_i"><a href="https://link.zhihu.com/?target=https%3A//sabnzbd.org/" class=" wrap external" target="_blank" rel="nofollow noreferrer">SABnzb</a>d（Usenet下载客户端）;</li>
  <li data-pid="YUI-WzlE"><a href="https://link.zhihu.com/?target=https%3A//transmissionbt.com/" class=" wrap external" target="_blank" rel="nofollow noreferrer">Transmission</a>（bt下载客户端）。</li>
 </ul>
 <p data-pid="vJUtowl6">以上每个软件都有其它的功能类似的软件可以完成相似的功能，这里列出的是目前比较主流或是社区比较活跃的。</p>
 <p data-pid="phTgb0RC">Transmission，bt客户端就不做过多介绍。<a href="https://link.zhihu.com/?target=https%3A//sabnzbd.org/" class=" wrap external" target="_blank" rel="nofollow noreferrer">SABnzb</a>d是Usenet下载客户端，什么又是Usenet呢？这里引用一下维基百科的介绍：</p>
 <blockquote data-pid="V_p-gEWI">
  Usenet是一种分布式的互联网交流系统，源自通用用途的UUCP网络（名字亦类似），它的发明是在1979年由杜克大学的研究生Tom Truscott与Jim Ellis所设想出来的，Usenet包含众多新闻组，它是新闻组（异于传统，新闻指交流、信息）及其消息的网络集合。Usenet里的消息（帖子）根据所分Usenet层级（新闻组）存储在服务器，多数服务器不断转发其消息给其他服务器，最终新闻组消息被分布式存储于全球大量的计算机中，但它不是万维网。
  <br>
  通过软件用户能够选择订阅感兴趣的新闻组、消息进行阅读、索引、删除过期消息等。Usenet的最初构想是借助网络进行技术信息交流，后来被广泛推广到大众领域，如社会新闻、业余爱好、个人兴趣等主题。现在默认情况下，它使用NNTP协议。Usenet最主要的特色是统一分组、全球转信（转发消息）。一些人认为Usenet一词来自于User Network。
 </blockquote>
 <p data-pid="X0duyM_m">可以看出Usenet是一种非常古老的技术，甚至比万维网还要早。Usenet发展至今，二进制新闻组的数据交流占据了很大一部分，里面的资源非常丰富，这里只简单介绍一下Usenet怎么使用：</p>
 <ul>
  <li data-pid="T41UhOhT">下载软件：<a href="https://link.zhihu.com/?target=https%3A//sabnzbd.org/" class=" wrap external" target="_blank" rel="nofollow noreferrer">SABnzbd</a>就是其中之一；</li>
  <li data-pid="eGlm_kNv">nzb索引网站：通过nzb文件搜索，找到自己需要下载的文件，有免费的索引网站，比如<a href="https://link.zhihu.com/?target=http%3A//binsearch.info/" class=" wrap external" target="_blank" rel="nofollow noreferrer">Binsearch</a>，也有收费的，个人建议使用收费的索引网站，索引质量和稳定性较高；</li>
  <li data-pid="7dc5_Vth">购买Usenet服务：有很多Usenet服务提供商，购买后服务商会给你服务器地址和账号，把这些信息配置到下载客户端比如SABnzbd里面。</li>
 </ul>
 <p data-pid="EcRXOS1t">好了，有了以上的这些，你其实就可以手动下载了：在nzb索引网站找到你想下载资源的nzb文件下载下来，使用SABnzbd等客户端打开，由于下载软件里面已经配置好了服务器，所以你的资源就会从这些服务器上下载了，不是很难是吧？</p>
 <p data-pid="PSvrPWLL">但是上面的流程还是复杂了，说了半天还是需要手动下载，这时候Sonnar和Radarr就派上用场了。</p>
 <p data-pid="8aPkNDuZ"><a href="https://link.zhihu.com/?target=https%3A//sonarr.tv/" class=" wrap external" target="_blank" rel="nofollow noreferrer">Sonarr</a>是自动化的电视剧管理软件，用来追剧再合适不过了，软件里面将重命名规则、清晰度要求、nzb索引、bt索引（当然不要忘了bt哦，是个很好的补充）、nzb或bt下载软件等都配置好后，剩下的都交给Sonarr吧，Sonarr里面有保存你的想看列表，并会定期自动在索引网站上寻找是否有这些资源，如果有并且清晰度符合要求，则会自动交给nzb或bt下载软件，下载完成后Sonarr就会根据重命名规则自动完成归类整理。</p>
 <p data-pid="mBHMU_B5">Radarr其实和Sonnar非常类似，连界面都很像，它其实是Sonnar的一个分支，只不过是用来管理电影罢了，只要你会配置其中任何一个，另外一个应该就会了。</p>
 <p data-pid="ZZAyhXRx">最后还有字幕的自动化，这个其实是可以交给Plex去做的，Plex有个插件叫Sub-Zero，可以很好的完成字幕自动匹配和下载的工作。</p>
 <p data-pid="j-XgIAxY">再上几个截图说明一下：</p>
 <figure data-size="normal">
  <img src="https://pic1.zhimg.com/50/v2-cd041b140fbf33442912587bb0569e96_720w.jpg?source=1940ef5c" data-rawwidth="2134" data-rawheight="1226" data-size="normal" data-original-token="v2-cd041b140fbf33442912587bb0569e96" data-default-watermark-src="https://picx.zhimg.com/50/v2-6e06926bcd7cd556d39ec2b84324509f_720w.jpg?source=1940ef5c" class="origin_image zh-lightbox-thumb" width="2134" data-original="https://pic1.zhimg.com/v2-cd041b140fbf33442912587bb0569e96_r.jpg?source=1940ef5c">
  <figcaption>
   Sonarr主界面
  </figcaption>
 </figure>
 <figure data-size="normal">
  <img src="https://pic1.zhimg.com/50/v2-6ef23766ce7a95d8b63168d645dfd21d_720w.jpg?source=1940ef5c" data-rawwidth="2094" data-rawheight="1218" data-size="normal" data-original-token="v2-6ef23766ce7a95d8b63168d645dfd21d" data-default-watermark-src="https://pic1.zhimg.com/50/v2-c8e121d51e527a20456b1c1aa3bc1360_720w.jpg?source=1940ef5c" class="origin_image zh-lightbox-thumb" width="2094" data-original="https://pic1.zhimg.com/v2-6ef23766ce7a95d8b63168d645dfd21d_r.jpg?source=1940ef5c">
  <figcaption>
   Sonarr点开某个剧的样子（大猫）
  </figcaption>
 </figure>
 <figure data-size="normal">
  <img src="https://picx.zhimg.com/50/v2-85920a7f80c3006dd166e5392b6ae563_720w.jpg?source=1940ef5c" data-rawwidth="2068" data-rawheight="1107" data-size="normal" data-original-token="v2-85920a7f80c3006dd166e5392b6ae563" data-default-watermark-src="https://pica.zhimg.com/50/v2-e69f0eb53a82e72e26959e9f4d5bc475_720w.jpg?source=1940ef5c" class="origin_image zh-lightbox-thumb" width="2068" data-original="https://pic1.zhimg.com/v2-85920a7f80c3006dd166e5392b6ae563_r.jpg?source=1940ef5c">
  <figcaption>
   Sonarr添加自己想看的剧，就是这么简单！
  </figcaption>
 </figure>
 <figure data-size="normal">
  <img src="https://pica.zhimg.com/50/v2-2851623cf353689f3881cc49ef9c2cfb_720w.jpg?source=1940ef5c" data-rawwidth="2135" data-rawheight="1192" data-size="normal" data-original-token="v2-2851623cf353689f3881cc49ef9c2cfb" data-default-watermark-src="https://picx.zhimg.com/50/v2-bcd8a4f7093afe2f2d1204780bebbf93_720w.jpg?source=1940ef5c" class="origin_image zh-lightbox-thumb" width="2135" data-original="https://picx.zhimg.com/v2-2851623cf353689f3881cc49ef9c2cfb_r.jpg?source=1940ef5c">
  <figcaption>
   Radarr，电影自动化，界面功能和Sonarr都很类似~
  </figcaption>
 </figure>
 <figure data-size="normal">
  <img src="https://pic1.zhimg.com/50/v2-5a8284b41fcf872dc9641bed77a7c6ed_720w.jpg?source=1940ef5c" data-rawwidth="1000" data-rawheight="820" data-size="normal" data-original-token="v2-5a8284b41fcf872dc9641bed77a7c6ed" data-default-watermark-src="https://pica.zhimg.com/50/v2-96f1e879816ed2876e291f59bdc42855_720w.jpg?source=1940ef5c" class="origin_image zh-lightbox-thumb" width="1000" data-original="https://picx.zhimg.com/v2-5a8284b41fcf872dc9641bed77a7c6ed_r.jpg?source=1940ef5c">
  <figcaption>
   SABnzbd，盗用官网图，逃~~~
  </figcaption>
 </figure>
 <figure data-size="normal">
  <img src="https://pica.zhimg.com/50/v2-c2007cefb6d26badfeaa18ef961c0d82_720w.jpg?source=1940ef5c" data-rawwidth="1460" data-rawheight="945" data-size="normal" data-original-token="v2-c2007cefb6d26badfeaa18ef961c0d82" data-default-watermark-src="https://pic1.zhimg.com/50/v2-d658253b85220b9bd5839eb004f3fbd6_720w.jpg?source=1940ef5c" class="origin_image zh-lightbox-thumb" width="1460" data-original="https://picx.zhimg.com/v2-c2007cefb6d26badfeaa18ef961c0d82_r.jpg?source=1940ef5c">
  <figcaption>
   Transmission，盗用官网图，再逃~~~
  </figcaption>
 </figure>
 <p data-pid="jlKBM5Ts">3、私有云盘：</p>
 <p data-pid="m36QUbhN">私有云盘，文件自动同步，评论里也有人提到，我使用的其实就是Nextcloud，这个东西其实就跟Dropbox，OneDrive一样，类似网盘的功能，非常推荐有多个设备文件自动同步需求的人使用，建立自己的网盘，不再依赖互联网网盘服务。这个安装起来稍微有点麻烦，我装了很多次才成功，服务端装好以后，下载电脑和手机客户端，添加需要同步的文件夹就可以了。手机客户端可以设置照片后台自动上传，不过IOS端的后台自动上传需要依赖GPS定位，有时候需要打开客户端才能上传，安卓版的据说没有问题，由于没有安卓手机，还有待验证~~~</p>
 <figure data-size="normal">
  <img src="https://pica.zhimg.com/50/v2-df954949f417e6318cab4c83a8f61a8a_720w.jpg?source=1940ef5c" data-rawwidth="2159" data-rawheight="1186" data-size="normal" data-caption="" data-original-token="v2-df954949f417e6318cab4c83a8f61a8a" data-default-watermark-src="https://pica.zhimg.com/50/v2-d8760b5cf968ffa36e5b6a5a9181f567_720w.jpg?source=1940ef5c" class="origin_image zh-lightbox-thumb" width="2159" data-original="https://picx.zhimg.com/v2-df954949f417e6318cab4c83a8f61a8a_r.jpg?source=1940ef5c">
 </figure>
 <figure data-size="normal">
  <img src="https://pica.zhimg.com/50/v2-c44743f7a76256a6e27181e14ac004be_720w.jpg?source=1940ef5c" data-rawwidth="2159" data-rawheight="1225" data-size="normal" data-caption="" data-original-token="v2-c44743f7a76256a6e27181e14ac004be" data-default-watermark-src="https://picx.zhimg.com/50/v2-38fd3a52acedfcf6eaa1e2a8d0d0b485_720w.jpg?source=1940ef5c" class="origin_image zh-lightbox-thumb" width="2159" data-original="https://picx.zhimg.com/v2-c44743f7a76256a6e27181e14ac004be_r.jpg?source=1940ef5c">
 </figure>
 <p data-pid="vVFfLZLO">客户端的图就不上了，感兴趣可以自己下载下来看看，设置非常简单。</p>
 <p data-pid="OPPxuI5G">最后，这些服务Openmediavault都有对应的插件，但是我本人建议最好使用docker安装！（重要的事情说三遍！）给大家推荐linuxserver的docker容器：<a href="https://link.zhihu.com/?target=https%3A//hub.docker.com/r/linuxserver/plex" class=" wrap external" target="_blank" rel="nofollow noreferrer">plex</a>, <a href="https://link.zhihu.com/?target=https%3A//hub.docker.com/r/linuxserver/sonarr" class=" wrap external" target="_blank" rel="nofollow noreferrer">sonarr</a>, <a href="https://link.zhihu.com/?target=https%3A//hub.docker.com/r/linuxserver/radarr" class=" wrap external" target="_blank" rel="nofollow noreferrer">radarr</a>, <a href="https://link.zhihu.com/?target=https%3A//hub.docker.com/r/linuxserver/sabnzbd" class=" wrap external" target="_blank" rel="nofollow noreferrer">sabnzbd</a>, <a href="https://link.zhihu.com/?target=https%3A//hub.docker.com/r/linuxserver/transmission" class=" wrap external" target="_blank" rel="nofollow noreferrer">transmission</a>, 以及官网的<a href="https://link.zhihu.com/?target=https%3A//hub.docker.com/_/nextcloud" class=" wrap external" target="_blank" rel="nofollow noreferrer">nextcloud</a>容器。</p>
 <p data-pid="Xg5ZYNXY">======分割线======</p>
 <p data-pid="cDZ0E52F">4、内网穿透</p>
 <p data-pid="ZFqrX519">网络这部分留到最后，也是最重要的，NAS如果仅仅只能在家里访问也就没有多大意义了，我们需要的是在世界任何一个角落，只要有互联网，就能方便的访问NAS。</p>
 <p data-pid="lGFAMbD3">要能实现这一点，第一个想到的方案自然是：公网IP+DDNS+端口映射了，可惜，我的宽带服务商并没有提供公网IP，我甚至一度想打运营商电话投诉，但是后来发现了其它方案，也就作罢。</p>
 <p data-pid="g7bo8VCP">后来目光一度转向了花生壳盒子之类的设备，仔细看了介绍之后，价格贵不说，还有端口和流量限制等等，实在是有点坑啊，果断弃之。</p>
 <p data-pid="IQTsH_v2">直到我发现了这款神器——Zerotier。</p>
 <p data-pid="gsUi-j6O">Zerotier的介绍和使用方法大家可以自行上网查查资料，简单来说，Zerotier可以创建一个虚拟局域网，将设备加入这个虚拟局域网后，就能像在一个局域网内那样方便的访问了，如果我们将手机、笔记本电脑、平板电脑等常用的终端和NAS都加入这个虚拟局域网，那么我们无论在哪里都可以访问NAS中的资源了，就像在家一样！经过实际使用测试发现，这玩意速度也出奇的好，在外面ping值通常只有几十，据说使用了点对点技术。</p>
 <p data-pid="kYqm3Nm9">好像一切都很完美，NAS、手机、电脑、ipad等都有对应的Zerotier客户端，安装起来不麻烦，然而问题来了，NAS中装Zerotier虽然可以，但如果NAS意外关机了怎么办，关机了NAS就没法加入虚拟局域网了，还怎么远程访问，怎么远程开机呢？这好像是个鸡生蛋蛋生鸡的问题？另外还有一些设备比如智能家电、网络打印机等，是不可能装Zerotier的，在外面怎么访问这些设备呢？</p>
 <p data-pid="cAIVenYZ">再想想还有没有解决方案？看来好像还需要一个“跳板”？</p>
 <p data-pid="zw3tpi8N">直到某一天，我逛Zerotier官网时发现了这货：<a href="https://link.zhihu.com/?target=https%3A//www.indiegogo.com/projects/zerotier-edge-open-source-enterprise-vpn-sd-wan%23/" class=" wrap external" target="_blank" rel="nofollow noreferrer">ZeroTier Edge</a>，一个小盒子，看介绍貌似可以即插即用，不需要什么配置，接在路由器下面应该就可以实现内网穿透了，看起来很神奇，真是良心产品，可是这货貌似还在众筹阶段，国内买起来不太方便，价格也比较感人，这盒子的内核无非还是Zerotier嘛，于是......我若有所思，能不能自己实现一个呢？</p>
 <p data-pid="B4vKDS9b">最后直接上图吧，我完成的“山寨”盒子长这样的（话说这盒子我不满的地方就是灯太亮了，所以贴了胶带，请无视）：</p>
 <figure data-size="normal">
  <img src="https://picx.zhimg.com/50/v2-e12fff8862f868bf2d57ec2eaf369ebb_720w.jpg?source=1940ef5c" data-rawwidth="3264" data-rawheight="2448" data-size="normal" data-caption="" data-original-token="v2-e12fff8862f868bf2d57ec2eaf369ebb" data-default-watermark-src="https://pica.zhimg.com/50/v2-62c422365e6978e94ecc4e45355a8f9c_720w.jpg?source=1940ef5c" class="origin_image zh-lightbox-thumb" width="3264" data-original="https://picx.zhimg.com/v2-e12fff8862f868bf2d57ec2eaf369ebb_r.jpg?source=1940ef5c">
 </figure>
 <p data-pid="Rzcw2RRl">盒子已经配置好了Zerotier并加入了我的虚拟网络，接在路由器下面一个lan口，只要这个盒子保持开机状态且网络正常，就能在外访问家里的网络，这样的好处还有如果NAS意外关机了，可以用手机连上Zerotier虚拟网络，发送一个网络唤醒（wake on lan)请求给NAS就可以远程开机了，完美！给想琢磨的童鞋奉上一张原理图吧：</p>
 <figure data-size="normal">
  <img src="https://pica.zhimg.com/50/v2-d51af7ee88b8257893bea8ff8601e425_720w.jpg?source=1940ef5c" data-rawwidth="985" data-rawheight="329" data-size="normal" data-caption="" data-original-token="v2-d51af7ee88b8257893bea8ff8601e425" data-default-watermark-src="https://pic1.zhimg.com/50/v2-8dadaf0e7d5fe08a05600a0047c2c16e_720w.jpg?source=1940ef5c" class="origin_image zh-lightbox-thumb" width="985" data-original="https://pic1.zhimg.com/v2-d51af7ee88b8257893bea8ff8601e425_r.jpg?source=1940ef5c">
 </figure>
 <p data-pid="--f9lWP9">======分割线======</p>
 <p data-pid="u5tV_KrR">评论里有人问这个盒子怎么实现的，其实就是刷了OpenWrt，装好Zerotier，加入你的虚拟局域网，然后把虚拟局域网接口和实际lan接口桥接，原理如上图所示，因为这个盒子只干这一件事，可以把一些其他无关的服务关掉，就像官方盒子宣传的一样：Do One Thing and Do It Well，哈哈。</p>
</body>
# 你见过最烂的代码长什么样子？
- 点赞数：5132
- 更新时间：2020年11月01日16时00分04秒
- 回答url：https://www.zhihu.com/question/265453795/answer/1548504596
<body>
 <p data-pid="D8CMazDU">翻硬盘时翻出来个小玩意，试了试 现在还能跑起来，哈哈。</p>
 <p data-pid="sNKDwDfP">当时答主事带一学生，很有精神；刚学一点西加加；头发浓密。萌新的憧憬之下，用devcpp这个瞎眼ide 写了个控制台坦克大战。3k来行</p>
 <figure data-size="normal">
  <img src="https://pic1.zhimg.com/50/v2-ec4738712b99c3bae97401b9fc09907a_720w.jpg?source=1940ef5c" data-size="normal" data-rawwidth="1855" data-rawheight="476" data-original-token="v2-ec4738712b99c3bae97401b9fc09907a" data-default-watermark-src="https://pic1.zhimg.com/50/v2-d541eadf223b8acfe2469e233b51fad1_720w.jpg?source=1940ef5c" class="origin_image zh-lightbox-thumb" width="1855" data-original="https://picx.zhimg.com/v2-ec4738712b99c3bae97401b9fc09907a_r.jpg?source=1940ef5c">
  <figcaption>
   那会刚看完少战，中二附体max
  </figcaption>
 </figure>
 <figure data-size="small">
  <img src="https://picx.zhimg.com/50/v2-972a0124b392a0bdf509d72fe5d19cfa_720w.jpg?source=1940ef5c" data-size="small" data-rawwidth="1183" data-rawheight="741" data-original-token="v2-972a0124b392a0bdf509d72fe5d19cfa" data-default-watermark-src="https://pic1.zhimg.com/50/v2-89ebabdf281ee585cb414200b29b9328_720w.jpg?source=1940ef5c" class="origin_image zh-lightbox-thumb" width="1183" data-original="https://pic1.zhimg.com/v2-972a0124b392a0bdf509d72fe5d19cfa_r.jpg?source=1940ef5c">
  <figcaption>
   手打像素矩阵
  </figcaption>
 </figure>
 <figure data-size="small">
  <img src="https://picx.zhimg.com/50/v2-858d787c791781e775ba3ad1290c145d_720w.jpg?source=1940ef5c" data-size="small" data-rawwidth="1203" data-rawheight="703" data-original-token="v2-858d787c791781e775ba3ad1290c145d" data-default-watermark-src="https://pic1.zhimg.com/50/v2-ad104aaeabb2d676839746e6be2f5ab4_720w.jpg?source=1940ef5c" class="origin_image zh-lightbox-thumb" width="1203" data-original="https://picx.zhimg.com/v2-858d787c791781e775ba3ad1290c145d_r.jpg?source=1940ef5c">
  <figcaption>
   欢乐の小曲儿
  </figcaption>
 </figure>
 <figure data-size="normal">
  <img src="https://pic1.zhimg.com/50/v2-ece6595fb41761cc204f843d7a548500_720w.jpg?source=1940ef5c" data-size="normal" data-rawwidth="1555" data-rawheight="819" data-original-token="v2-ece6595fb41761cc204f843d7a548500" data-default-watermark-src="https://pica.zhimg.com/50/v2-5fab11f2b898344ce7e0209449338450_720w.jpg?source=1940ef5c" class="origin_image zh-lightbox-thumb" width="1555" data-original="https://pic1.zhimg.com/v2-ece6595fb41761cc204f843d7a548500_r.jpg?source=1940ef5c">
  <figcaption>
   穿甲爆炸燃烧 瞬间完成，事战车中的豪杰
  </figcaption>
 </figure>
 <figure data-size="normal">
  <img src="https://picx.zhimg.com/50/v2-732e70eeaf1f81f4fd7bfdd2b3997f17_720w.jpg?source=1940ef5c" data-caption="" data-size="normal" data-rawwidth="1212" data-rawheight="916" data-original-token="v2-732e70eeaf1f81f4fd7bfdd2b3997f17" data-default-watermark-src="https://picx.zhimg.com/50/v2-7260a4d335e48f4f958dcf08179631e1_720w.jpg?source=1940ef5c" class="origin_image zh-lightbox-thumb" width="1212" data-original="https://picx.zhimg.com/v2-732e70eeaf1f81f4fd7bfdd2b3997f17_r.jpg?source=1940ef5c">
 </figure>
 <p class="ztext-empty-paragraph"><br></p>
 <p class="ztext-empty-paragraph"><br></p>
 <p data-pid="6q-Z3mNB">用txt文件储存地图，玩家可自己设计地图，哈哈。当时还想弄地图编辑器的，最后还是咕咕咕了</p>
 <figure data-size="normal">
  <img src="https://picx.zhimg.com/50/v2-2e8d01e17dd79961ef706da39570ef6c_720w.jpg?source=1940ef5c" data-caption="" data-size="normal" data-rawwidth="1162" data-rawheight="621" data-original-token="v2-2e8d01e17dd79961ef706da39570ef6c" data-default-watermark-src="https://picx.zhimg.com/50/v2-0eaf06547f5ca0b9728b83bafacde748_720w.jpg?source=1940ef5c" class="origin_image zh-lightbox-thumb" width="1162" data-original="https://picx.zhimg.com/v2-2e8d01e17dd79961ef706da39570ef6c_r.jpg?source=1940ef5c">
 </figure>
 <p data-pid="3hQB8SN0">相当搞笑的一点：前面有段代码是获取地图文件夹下所有文件名，存入字符数组。当时<b>不知道字符串尾部要加结束符</b>，导致后面使用该字符串读入文件时屡屡崩溃(没有结束符嘛)。</p>
 <figure data-size="normal">
  <img src="https://picx.zhimg.com/50/v2-13bbb26d99131dba08380059230bed83_720w.jpg?source=1940ef5c" data-caption="" data-size="normal" data-rawwidth="1102" data-rawheight="400" data-original-token="v2-13bbb26d99131dba08380059230bed83" data-default-watermark-src="https://picx.zhimg.com/50/v2-c3c70b4fd9e2726058826abb7cb53f1c_720w.jpg?source=1940ef5c" class="origin_image zh-lightbox-thumb" width="1102" data-original="https://pic1.zhimg.com/v2-13bbb26d99131dba08380059230bed83_r.jpg?source=1940ef5c">
 </figure>
 <p data-pid="5Dg8UlYb">于是，宇宙大聪明答主写了这么一段处理代码，大概思路是将这个字符串<b>复制一遍</b>，检查复制后字符串的长度是否异常，<b>如果异常则再复制一遍</b>……（笑哭.jpg）</p>
 <p class="ztext-empty-paragraph"><br></p>
 <p class="ztext-empty-paragraph"><br></p>
 <figure data-size="normal">
  <img src="https://pic1.zhimg.com/50/v2-1d8821a51923b9cee08f80e080ba7e4c_720w.jpg?source=1940ef5c" data-size="normal" data-rawwidth="1894" data-rawheight="964" data-original-token="v2-1d8821a51923b9cee08f80e080ba7e4c" data-default-watermark-src="https://picx.zhimg.com/50/v2-e0c33193f85f1aa749ad2e8046ae10ca_720w.jpg?source=1940ef5c" class="origin_image zh-lightbox-thumb" width="1894" data-original="https://pic1.zhimg.com/v2-1d8821a51923b9cee08f80e080ba7e4c_r.jpg?source=1940ef5c">
  <figcaption>
   当时win7和现在win10的控制台空格长度不相同，现在运行会字符错位，地图看上去乱糟糟。正常应该是没有这些缝缝的。
  </figcaption>
 </figure>
 <figure data-size="normal">
  <img src="https://pica.zhimg.com/50/v2-6966b19b732e439c5ce73743377b69cf_720w.gif?source=1940ef5c" data-size="normal" data-rawwidth="491" data-rawheight="282" data-original-token="v2-6966b19b732e439c5ce73743377b69cf" data-thumbnail="https://picx.zhimg.com/50/v2-6966b19b732e439c5ce73743377b69cf_720w.jpg?source=1940ef5c" class="origin_image zh-lightbox-thumb" width="491" data-original="https://picx.zhimg.com/v2-6966b19b732e439c5ce73743377b69cf_r.jpg?source=1940ef5c">
  <figcaption>
   穿甲弹，击中墙壁后产生2格杀伤区
  </figcaption>
 </figure>
 <figure data-size="normal">
  <img src="https://pica.zhimg.com/50/v2-886b98a40656c050229cea22dff3bbc0_720w.gif?source=1940ef5c" data-size="normal" data-rawwidth="360" data-rawheight="452" data-original-token="v2-886b98a40656c050229cea22dff3bbc0" data-thumbnail="https://picx.zhimg.com/50/v2-886b98a40656c050229cea22dff3bbc0_720w.jpg?source=1940ef5c" class="content_image" width="360">
  <figcaption>
   穿甲弹杀伤大，但是有几率跳弹。有效击穿时会在对方炮塔处显示“#”。
  </figcaption>
 </figure>
 <figure data-size="normal">
  <img src="https://picx.zhimg.com/50/v2-236b5c00a658af9b17627ee3a29eb91b_720w.gif?source=1940ef5c" data-size="normal" data-rawwidth="475" data-rawheight="378" data-original-token="v2-236b5c00a658af9b17627ee3a29eb91b" data-thumbnail="https://pic1.zhimg.com/50/v2-236b5c00a658af9b17627ee3a29eb91b_720w.jpg?source=1940ef5c" class="origin_image zh-lightbox-thumb" width="475" data-original="https://picx.zhimg.com/v2-236b5c00a658af9b17627ee3a29eb91b_r.jpg?source=1940ef5c">
  <figcaption>
   高爆弹，产生3x3爆炸范围
  </figcaption>
 </figure>
 <figure data-size="normal">
  <img src="https://picx.zhimg.com/50/v2-b1b4a81e5f9eff7adfdcc948c2543fa0_720w.gif?source=1940ef5c" data-size="normal" data-rawwidth="577" data-rawheight="256" data-original-token="v2-b1b4a81e5f9eff7adfdcc948c2543fa0" data-thumbnail="https://picx.zhimg.com/50/v2-b1b4a81e5f9eff7adfdcc948c2543fa0_720w.jpg?source=1940ef5c" class="origin_image zh-lightbox-thumb" width="577" data-original="https://pica.zhimg.com/v2-b1b4a81e5f9eff7adfdcc948c2543fa0_r.jpg?source=1940ef5c">
  <figcaption>
   “谢尔曼M1型”自带速射主炮，每分钟350发(大雾)。可惜为了平衡，并没有采用原版APHEI（高爆穿甲燃烧弹），而是杀伤力很低的糖豆炮。
  </figcaption>
 </figure>
 <figure data-size="normal">
  <img src="https://pic1.zhimg.com/50/v2-c7f22b8897ab4870e992d6ebfcc180b1_720w.gif?source=1940ef5c" data-size="normal" data-rawwidth="577" data-rawheight="417" data-original-token="v2-c7f22b8897ab4870e992d6ebfcc180b1" data-thumbnail="https://pic1.zhimg.com/50/v2-c7f22b8897ab4870e992d6ebfcc180b1_720w.jpg?source=1940ef5c" class="origin_image zh-lightbox-thumb" width="577" data-original="https://picx.zhimg.com/v2-c7f22b8897ab4870e992d6ebfcc180b1_r.jpg?source=1940ef5c">
  <figcaption>
   炮射导弹，射出去能拐个弯。cd长 伤害低，但打掩体后的敌人是为一绝。
  </figcaption>
 </figure>
 <figure data-size="normal">
  <img src="https://picx.zhimg.com/50/v2-ef465c93a065f3365e91b58339bd467b_720w.gif?source=1940ef5c" data-size="normal" data-rawwidth="705" data-rawheight="356" data-original-token="v2-ef465c93a065f3365e91b58339bd467b" data-thumbnail="https://picx.zhimg.com/50/v2-ef465c93a065f3365e91b58339bd467b_720w.jpg?source=1940ef5c" class="origin_image zh-lightbox-thumb" width="705" data-original="https://pic1.zhimg.com/v2-ef465c93a065f3365e91b58339bd467b_r.jpg?source=1940ef5c">
  <figcaption>
   炸药桶地图块，被击中产生5x5爆炸范围。灰色地图块无法被破坏，浅黄色的可以。
  </figcaption>
 </figure>
 <figure data-size="normal">
  <img src="https://pic1.zhimg.com/50/v2-ed3896f8e7294cffcfdb4f686499420f_720w.gif?source=1940ef5c" data-size="normal" data-rawwidth="360" data-rawheight="452" data-original-token="v2-ed3896f8e7294cffcfdb4f686499420f" data-thumbnail="https://picx.zhimg.com/50/v2-ed3896f8e7294cffcfdb4f686499420f_720w.jpg?source=1940ef5c" class="content_image" width="360">
  <figcaption>
   坦克被击毁时有几率殉爆，产生5x5爆炸范围，而且持续时间比炸药桶长得多。
  </figcaption>
 </figure>
 <p data-pid="yF1tsikO">程序的稳定性相当差劲，截这些图的时候答主n次卡死或控制台弹窗报错了……</p>
 <p class="ztext-empty-paragraph"><br></p>
 <p class="ztext-empty-paragraph"><br></p>
 <figure data-size="small">
  <img src="https://picx.zhimg.com/50/v2-7edd6d34a6439f2325db91dafc646c33_720w.jpg?source=1940ef5c" data-caption="" data-size="small" data-rawwidth="559" data-rawheight="793" data-original-token="v2-7edd6d34a6439f2325db91dafc646c33" data-default-watermark-src="https://picx.zhimg.com/50/v2-88a53354b145d23e4c8016ec6c5edf97_720w.jpg?source=1940ef5c" class="origin_image zh-lightbox-thumb" width="559" data-original="https://pic1.zhimg.com/v2-7edd6d34a6439f2325db91dafc646c33_r.jpg?source=1940ef5c">
 </figure>
 <figure data-size="small">
  <img src="https://pic1.zhimg.com/50/v2-dbfbb4724a314510c61a7f18b0fd3152_720w.jpg?source=1940ef5c" data-caption="" data-size="small" data-rawwidth="709" data-rawheight="742" data-original-token="v2-dbfbb4724a314510c61a7f18b0fd3152" data-default-watermark-src="https://picx.zhimg.com/50/v2-19423caa4047dd3e5ccab51c12058eff_720w.jpg?source=1940ef5c" class="origin_image zh-lightbox-thumb" width="709" data-original="https://pica.zhimg.com/v2-dbfbb4724a314510c61a7f18b0fd3152_r.jpg?source=1940ef5c">
 </figure>
 <p data-pid="6Wwl51e9">是的，当时连printf都不知道，打印字符用效率奇低的cout；而且一帧里逻辑处理和渲染混杂执行，导致画面容易闪烁甚至掉帧……</p>
 <p class="ztext-empty-paragraph"><br></p>
 <p class="ztext-empty-paragraph"><br></p>
 <figure data-size="normal">
  <img src="https://pic1.zhimg.com/50/v2-f4a7cdbc794a161ee23315a1af82a6b2_720w.jpg?source=1940ef5c" data-caption="" data-size="normal" data-rawwidth="1271" data-rawheight="814" data-original-token="v2-f4a7cdbc794a161ee23315a1af82a6b2" data-default-watermark-src="https://picx.zhimg.com/50/v2-5d8c0deea413e643353a0e4f13cdc771_720w.jpg?source=1940ef5c" class="origin_image zh-lightbox-thumb" width="1271" data-original="https://picx.zhimg.com/v2-f4a7cdbc794a161ee23315a1af82a6b2_r.jpg?source=1940ef5c">
 </figure>
 <figure data-size="normal">
  <img src="https://pica.zhimg.com/50/v2-8be94fba0d1a73f7ffc221ffdf03c6fa_720w.gif?source=1940ef5c" data-caption="" data-size="normal" data-rawwidth="1189" data-rawheight="956" data-original-token="v2-8be94fba0d1a73f7ffc221ffdf03c6fa" data-thumbnail="https://pica.zhimg.com/50/v2-8be94fba0d1a73f7ffc221ffdf03c6fa_720w.jpg?source=1940ef5c" class="origin_image zh-lightbox-thumb" width="1189" data-original="https://picx.zhimg.com/v2-8be94fba0d1a73f7ffc221ffdf03c6fa_r.jpg?source=1940ef5c">
 </figure>
 <p data-pid="ep5mhK4N">这是敌人AI的一部分，用n个套娃循环实现类似A*算法的寻路。AI寻找能射击到敌人的最近位置，还会根据自身血量等计算攻击欲望，躲避可能伤害到自己的炮弹，拾取有用的道具。整套算法效率特别特别低，每帧都要完整执行一次；容易导致掉帧。所以场上<b>只能有一只精英怪使用完整的AI</b>，其他小怪用随机函数xjb乱逛。</p>
 <figure data-size="small">
  <img src="https://pic1.zhimg.com/50/v2-850803deea6dfc56b30fa7b3cd3524c6_720w.jpg?source=1940ef5c" data-size="small" data-rawwidth="1091" data-rawheight="611" data-original-token="v2-850803deea6dfc56b30fa7b3cd3524c6" data-default-watermark-src="https://pica.zhimg.com/50/v2-ecae1e8f80478fdca9c29feccee55de7_720w.jpg?source=1940ef5c" class="origin_image zh-lightbox-thumb" width="1091" data-original="https://pic1.zhimg.com/v2-850803deea6dfc56b30fa7b3cd3524c6_r.jpg?source=1940ef5c">
  <figcaption>
   小怪：不是很聪明的亚子
  </figcaption>
 </figure>
 <p data-pid="PD650HgI">类似移动、碰撞检测之类的部分，每一份代码都要手动复制四次，对应上下左右四个方向。</p>
 <figure data-size="normal">
  <img src="https://pic1.zhimg.com/50/v2-530d50155b948f138e5cd7a1674f00e9_720w.jpg?source=1940ef5c" data-caption="" data-size="normal" data-rawwidth="184" data-rawheight="285" data-original-token="v2-530d50155b948f138e5cd7a1674f00e9" class="content_image" width="184">
 </figure>
 <p class="ztext-empty-paragraph"><br></p>
 <p class="ztext-empty-paragraph"><br></p>
 <p data-pid="k_HbRr0q">再放开头定义的一段吧：</p>
 <div class="highlight">
  <pre><code class="language-text">#include &lt;iostream&gt;
#include &lt;windows.h&gt;
#include &lt;fstream&gt;
//#include &lt;iomanip&gt;
//#include &lt;string.h&gt;
//#include &lt;stdio.h&gt;
//#include &lt;conio.h&gt;
#include &lt;sstream&gt;
#include &lt;cstdlib&gt;
#include &lt;ctime&gt;
#include &lt;io.h&gt;//文件
#include &lt;vector&gt;//文件
#include&lt;Mmsystem.h&gt;//音频相关
#pragma comment(lib,"winmm.lib")//音频
#define KEY_DOWN(VK_NONAME) ((GetAsyncKeyState(VK_NONAME) &amp; 0x8000) ? 1:0)
using namespace std;

int map[38][55] = {0};//储存地图
int mapX = 55;//地图x大小
int mapY = 38;//地图y大小
int allX = 30;//整体x位移
int allY = 0;//整体y位移
int circlet = 0;//循环次数
int model;//当前游玩模式
int buff[3] = {0};//0[储存道具：1动能弹，2高爆弹,9生命值 ] ,1x,2y
int tank[10][8] = {0};//储存坦克：[编号]，[0朝向，1x，2y，3生命值，4武器，5移速，6外形，7开炮装填时间]
//武器：0普通炮，1速射炮，2高爆弹，3破甲弹，4跟踪弹
int shell[10][10][4] = {0};//储存炮弹：[所属坦克]，[编号]，[0朝向，1x，2y，3类型]
int smoke[100][3] = {0};//储存硝烟"＃":[编号]，[0已歼灭时间，1x，2y]

//**********基础功能**********
void ProgramBegin();//初始化程序
void FuZhi();//初始赋值
void gotoxy(int,int);//跳转光标
void color(int);//颜色
void getFiles(string, vector&lt;string&gt;&amp;);//获取目标文件夹内所有文件名
void InMap(char*);//将地图导入数组
void Tout(int);//打印地图方块
void PrintMap();//打印地图
void PrintTank(int,int,int,int);//打印坦克，朝向，x，y，类型
void DelTank(int,int);//屏幕删除坦克
void sound(int);//音效
//**********菜单界面**********
int MenuModel();//模式菜单
char* MenuMap();//选图菜单
void MenuTank1vN();//选车菜单1vN模式
void MenuTank1v1();//选车菜单1v1模式
void Interface();//玩家状态界面
void NewUI();//刷新状态界面
int MenuPveWin(int);//结束人机战局
int MenuPvpWin(int);//结束双人战局
//**********战斗功能**********
void CtrlTank(int,int);//坦克控制
void InShell(int);//载入炮弹
void SkyShell();//炮弹移动
bool HitTank(int,int,int);//判断坦克是否受到伤害
void HitShell(int,int,int,int,int,int);//炮弹命中.朝向，x，y，弹药类型，被命中者 ，发射者
void Boom(int,int,int);//爆炸。半径，x，y
void InBuff();//载入道具
void OffBuff(int);//使用(消除)道具
void InSmoke(int,int);//载入硝烟
void OffSmoke();//删除硝烟
//**********AI功能**********
int FindMap(int,int,int,int);//寻路。起点x，y，终点x，y。返回方向，1234上下左右。
void AiTank();//坦克AI
void XieTank(int);//屑AI
void Born(int,int);//生成新车，编号、难度
//**********模式**********
void annihilate();//歼灭模式
void pve();//人机
void pvp();//双人对战
//**********附加**********
void op();//片头
void loading();//伪加载界面
void xy();//显示硝烟参数
void pd();//显示炮弹参数
void MenuZhanYi();//战役</code></pre>
 </div>
 <p data-pid="dpa_0BLi">是不是已经想吐了~3.5k行代码塞在一个.cpp里</p>
 <p data-pid="B6PnlgiH">有没有留意到，上面那一堆全局变量的数据结构只有int数组。怎么用它储存数量和参数不等的坦克、炮弹、粒子(爆炸火光、烟雾……)等东西的呢？答主“发明”了这样一种方法：</p>
 <p data-pid="kqrVd1EZ">一个数组储存一种类的物体，第一维记录该类所有物体。如坦克tank数组第一维长度是10，那地图上最多只能同时存在10辆坦克；tank[5] 表示编号为5的坦克。数组第二维储存这个物体的个体属性。如tank[5][0]代表5号坦克的朝向，[1]、[2]代表其坐标，等。</p>
 <p data-pid="i-hoZ5dy">游戏中每一帧，依次遍历坦克、炮弹、特效等数组，提取数组中每一位物体，根据玩家输入和游戏逻辑更新该物体的参数(也就是更新这个数组)。</p>
 <p data-pid="kbd5nVKu">关键的来了：怎么实现生成和销毁物体，比如炮弹命中时销毁自身？很简单，要销毁物体，将那个物体所在的数组第二维清零就行了。刷新物体遍历数组时，遇到这种“空槽”就跳过。要增加物体，也遍历一遍该数组，找到一个“空槽”，将新物体的初始数据写入。</p>
 <figure data-size="small">
  <img src="https://pica.zhimg.com/50/v2-d7f2a837045531080e1067bdd91c4b09_720w.jpg?source=1940ef5c" data-caption="" data-size="small" data-rawwidth="652" data-rawheight="660" data-original-token="v2-d7f2a837045531080e1067bdd91c4b09" data-default-watermark-src="https://picx.zhimg.com/50/v2-2407cd5d90df0fa0dc45fbc87fc2aa87_720w.jpg?source=1940ef5c" class="origin_image zh-lightbox-thumb" width="652" data-original="https://picx.zhimg.com/v2-d7f2a837045531080e1067bdd91c4b09_r.jpg?source=1940ef5c">
 </figure>
 <p data-pid="N0fhOzT6">一段时间后，答主知道了有种东西叫结构体，有门课叫数据结构，有种数据结构叫链表，有种对象叫面向对象。可惜到现在也没找到对象，唉。</p>
 <p class="ztext-empty-paragraph"><br></p>
 <p data-pid="BolnLcuM">最烂的代码果然还是自己写的代码，这简直是个珠穆奥力给峰。好在没有人需要为这个“项目”负责，没有人需要维护它，它只需要静静地躺在硬盘深处的角落就行了。</p>
 <p data-pid="FMDPs4ei"><b>总结：</b></p>
 <figure data-size="normal">
  <img src="https://picx.zhimg.com/50/v2-a54bbc0eacdbe2ed776700f150bc78cc_720w.jpg?source=1940ef5c" data-caption="" data-size="normal" data-rawwidth="562" data-rawheight="509" data-original-token="v2-a54bbc0eacdbe2ed776700f150bc78cc" data-default-watermark-src="https://picx.zhimg.com/50/v2-82a8409a25bf18fea3407a3930442629_720w.jpg?source=1940ef5c" class="origin_image zh-lightbox-thumb" width="562" data-original="https://picx.zhimg.com/v2-a54bbc0eacdbe2ed776700f150bc78cc_r.jpg?source=1940ef5c">
 </figure>
 <hr>
 <p data-pid="nUTsrvf2">后来呢我还是一直热衷于游戏开发。坦克大战后不久，写的第二个“大工程”是基于qt的2d海战游戏，有点类似顶视角的wows。为啥当时突然想学qt？也许是前一个学期写作业用mfc太痛苦了吧。总之，按我的坏习惯，看了两三天文档就兴冲冲开工写demo了。后期的代码和工程现在已经找不到了，只找到一些前期的素材：</p>
 <figure data-size="normal">
  <img src="https://picx.zhimg.com/50/v2-ae66c88c3a818b16b262a5ffbecde461_720w.jpg?source=1940ef5c" data-size="normal" data-rawwidth="405" data-rawheight="288" data-original-token="v2-ae66c88c3a818b16b262a5ffbecde461" data-default-watermark-src="https://picx.zhimg.com/50/v2-29af31182434d7a715dc531243e42db9_720w.jpg?source=1940ef5c" class="content_image" width="405">
  <figcaption>
   按照舰船的真实顶视图 用ps画svg矢量图精灵
  </figcaption>
 </figure>
 <p data-pid="PdkWMfoG">代码风格也是极其奥力给，回忆一下大概像这样：</p>
 <div class="highlight">
  <pre><code class="language-text">thisGuanQia-&gt;ui-&gt;myship-&gt;labelPao-&gt;setText("主炮0开火cd："+QString::number(thisGuanQia-&gt;jianDui-&gt;ship-&gt;my-&gt;ship[0]-&gt;wuQiZu[0]-&gt;pao[0]-&gt;cd-&gt;nowCD));//在标签上打印 我方舰队 第一只船 第一个武器组 第一门炮的cd
thisGuanQia-&gt;ui-&gt;myship-&gt;labelKey-&gt;setText("W"+QString::number(ctrl.keyW)+"S"+QString::number(ctrl.keyS)+"A"+QString::number(ctrl.keyA)+"D"+QString::number(ctrl.keyD)+"↑"+QString::number(ctrl.keyUp)+"↓"+QString::number(ctrl.keyDown)+"←"+QString::number(ctrl.keyLeft)+"→"+QString::number(ctrl.keyRight)+"GN"+QString::number(ctrl.keyShift)+QString::number(ctrl.keyCtrl)+QString::number(ctrl.keyAlt)); //打印键盘事件</code></pre>
 </div>
 <p data-pid="3y_pf1BH">那时不会调编辑器缩进，现在也忘了qt原生编辑器是长啥样的。反正基本上整段代码写在一行里…………看代码要按紧shift+滚轮，对小拇指可是个考验。</p>
 <p data-pid="Sxlb4Nl2">终于会用队列了，比如开炮时的火光就是将特效序列帧存入一个队列，然后每帧读取一张。还写了一套几何碰撞检测，虽然只支持点、线、椭圆、长方形这四种元素。逻辑和渲染终于分开了。还写了一段帧率控制算法，按本帧逻辑部分的执行时间决定接下来sleep多久，使帧率尽量稳定在30。(然而加这玩意使帧率更不稳定，后来全删了)</p>
 <p data-pid="m1IWkTJG">最后先帝创业未半而中道崩黜，加了很多功能后帧率实在太低。用的应该是2代i5m集显，帧率只有12不到……</p>
 <hr>
 <p data-pid="bNRLFWzW">再后来接触了“真正”的游戏引擎，发现啊这个也太方便太易用了。原来之前花了很多时间瞎折腾的烂代码，在引擎里竟然全有对应功能的接口？我想到的，前人全都想到过啊。</p>
 <p data-pid="vWUjOGZv">随便聊一下，引擎里最让我愉悦的是cocos creator。新手教程级的文档，极其舒服的环境。对比隔壁unity，去unity和ccc的api文档用中文搜点东西，ccc大多是你想要的，unity文档搜索是什么玩意。ccc的中文社区建设的也挺好，活跃度高，干货多；而且中文搜索引擎能直接搜到帖子内容。unity中文社区，？？？ 可惜ccc本质还是个轻(棋)量(牌)级引擎，论功能跟unity、ue暂时还没得比。</p>
</body>
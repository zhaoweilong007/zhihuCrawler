# 中国的铁路订票系统在世界上属于什么水平？
- 点赞数：16621
- 更新时间：2021年11月15日19时05分45秒
- 回答url：https://www.zhihu.com/question/315887668/answer/1686693922
<body>
 <p data-pid="ouTNypj_"><b>没错，就是世界第一，而且极其牛逼。我很佩服设计这套算法和系统的人。</b></p>
 <p data-pid="wCd5MLC3">牛逼主要有以下三点：</p>
 <ul>
  <li data-pid="1RRZcRoK">所销售商品极其复杂（SKU极多）</li>
  <li data-pid="iTpmFqSZ">商品和商品之间、横跨全国的渠道之间，都相互干涉</li>
  <li data-pid="iTM-F4bF">访问量极大</li>
 </ul>
 <p data-pid="iEtW50bX">另外，我还会和各个主要国家对比，告诉你为什么在世界上也是最牛逼的。（好像其他回答都忘了题目问的是在世界上属于什么水平？）</p>
 <h2>销售商品多且复杂</h2>
 <blockquote data-pid="DJ6wluf5">
  在电商平台上，每个商品对应一个SKU，有人购买1件，库存就减1。而12306的特殊性在于，火车票是一种动态的SKU，计算起来的数据量可能是普通电商产品的数百倍。
  <br>
  以北京西到深圳福田的G71次高铁为例，共有17个站、3种座位。表面看起来是3个SKU，即G71商务座、一等座、二等座，但实际上，G71次高铁有408个SKU。
  <br>
  原因很简单：从北京西站始发的车票，后面有16个车站，即16种不同的车票；涿州东站是第二站，有15种不同的车票，以此类推，单以上下车的站来计算，G71次高铁就会有16+15……+2+1=136个SKU，而每种票对应3种座位，一共是408个商品。
  <br>
  也就是说，如果旅客购买了一张北京西站到涿州东站的车票，G71次高铁的SKU要减去16；而如果购买的是北京西站到深圳福田站的车票，则要减去136个SKU。
  <br>
  以上只是SKU的减值。若旅客购买的是短途票，如北京西站到涿州东站，则在SKU减去16的同时，还要增加涿州东站到之后各站、之后各站相互间的SKU，即增加120个SKU。
  <br>
  若再叠加当前的选座功能（A、B、C、D、F），计算数量可能还要再翻倍。而这些计算数据，需要在大量购票者抢票的数秒，甚至数毫秒内完成。
 </blockquote>
 <p data-pid="z4IWII1m">中国有1805个客运火车站，且每条线路上一天有几十~数百班次的火车。如此排列组合算下来，SKU数是天文数字。</p>
 <h2>商品间、渠道间相互干涉</h2>
 <p data-pid="hoEBlx9J">12306相比淘宝，“商品”间还会互相干涉。比如如果有人 买了济南到南京的高铁票，那么其他涉及同路段的高铁票也需要校验是否还能售卖。比如北京到天津的就不受影响（不重叠），但徐州到上海的可能就售空了。</p>
 <p data-pid="62SEemb4">而如果有退票、改签，同样需要相应给其他SKU加上库存，这是其他电商平台所没有的情况（例如南京到上海有人退票，北京到上海、上海到天津可能就有了一张票可以卖）。</p>
 <p data-pid="U16hPrpl">这一切操作，还需要在无数的手机、车站窗口、自助售票机、代理商之间<b><u>实时同步</u></b>。一旦一边卖出，其他渠道就不能买被影响的任何库存。一旦一个渠道退票，其他渠道要能买到。否则两个渠道很有可能同时售出同一张票，尤其是春运抢票时。但我们几乎没有听说过这样的新闻。</p>
 <h2>访问量极大</h2>
 <p class="ztext-empty-paragraph"><br></p>
 <blockquote data-pid="hTUjvJra">
  据铁科院首席研究员、12306技术部主任单杏花介绍，2020年春运期间，12306在高峰日网络点击量高达1495亿次。
  <br>
  也就是说，12306在高峰日平均1秒就要承受170多万次点击，大概相当于每个中国人每天在12306上点击了100次。
  <br>
  12306面临的流量压力，可想而知。一名IT工程师在听到《中国经济周刊》记者转述的这组数据时，表示自己很难想象，“即便是百度，也很难有这样的点击量，可以说是一组天文数字。”
  <br>
  作为对比，2019年淘宝的订单创建峰值，是54.4万笔/秒。Trustdata的数据显示，淘宝APP 2019年“双11”当天的日活跃用户为4.76亿。
  <br>
  若以此计算，12306的最高访问量，相当于淘宝“双11”当天活跃用户每人点击超过300次。
  <br>
  对此，杨立鹏自嘲道，12306系统面临的，基本上是“天天被秒杀、天天被抢购、天天‘双11’”。
 </blockquote>
 <p data-pid="iqsScH_A">2020年春运期间，12306在高峰日网络点击量高达1495亿次。作为对比，著名视频网站P站每天访问量约1.15亿次。根据个人经验，每次访问浏览应该不超过10个网页，最多不超过50个，也就是点击量最多50余亿次。那么可以说，P站相比高峰的12306，点击量只是个零头。</p>
 <p data-pid="OgWs6FQz">（当然，视频和订票对系统的压力类型是不一样的。但是，缓存视频需要的校验、计算、操作也相对较少）</p>
 <p class="ztext-empty-paragraph"><br></p>
 <p data-pid="9MC1UwQ7"><b>在这样的高难度下，12306几乎不挂，买票、查票反应较快，购买和退票能够实时返回结果，实在是一件很牛逼的事。</b></p>
 <h2><b>国际对比</b></h2>
 <p data-pid="FGkgfqRs">为了切题，让我们再来和各国对比一下。</p>
 <p data-pid="pRDDGcOV">人口太小和不太发达的国家跳过，一起比较一下以下几个国家的主要铁路公司：</p>
 <ol>
  <li data-pid="ioQ4HrID">日本（1亿+人口，铁路大国）：JR（这里把6家JR加起来）2018年运送旅客95.56亿人<sup data-draft-node="inline" data-draft-type="reference" data-numero="1" data-text="" data-url="https://news.yahoo.co.jp/byline/fuwaraizo/20200101-00157204/">[1]</sup></li>
  <li data-pid="SnJHyK7K">俄罗斯（欧洲人口第一位，1亿+）：俄罗斯国家铁路每年约服务11.52亿旅客<sup data-draft-node="inline" data-draft-type="reference" data-numero="2" data-text="" data-url="https://ftnnews.com/rail/35877-russian-railways-carried-highest-number-of-passengers-in-10-years-in-2018">[2]</sup></li>
  <li data-pid="qZhjaBS-">德国（欧洲人口第二位）：Deutsche Bahn (DB) 2018年服务约26亿旅客<sup data-draft-node="inline" data-draft-type="reference" data-numero="3" data-text="" data-url="https://www.deutschebahn.com/en/group/im_blickpunkt/20190328_BPK_2019-3992878">[3]</sup></li>
  <li data-pid="mx83QAPK">英国（欧洲人口第三位，著名铁路大国）：British railway 2020年服务17.4亿旅客<sup data-draft-node="inline" data-draft-type="reference" data-numero="4" data-text="" data-url="https://www.statista.com/statistics/304957/total-historical-national-rail-passenger-journeys-in-the-united-kingdom-uk/">[4]</sup></li>
  <li data-pid="ScWozp8x">美国（人口最多的发达国家）：Amtrak里程非常长，但业务其实以货运为主，2020年仅运送旅客1680万<sup data-draft-node="inline" data-draft-type="reference" data-numero="5" data-text="" data-url="https://www.statista.com/statistics/553288/ridership-north-america-amtrak/">[5]</sup></li>
 </ol>
 <p data-pid="U0AqxGjJ">首先，美国不用看了。一天五六万人，手工卖票都出不了问题。</p>
 <p data-pid="fca7OL6o">其次，日本和欧洲诸国看起来运送旅客数量和铁道部可以一比（尤其是日本）。但在日本和欧洲，<b>铁路不仅是在城市间通勤，很大程度上也和地铁共同承担着通勤的职责</b>。以北京或者上海类比的话，相当于市区（五环或者外环线内）主要靠地铁，以外的近郊区域主要靠“铁路”。</p>
 <p data-pid="qPH1pWvL">例如德铁（DB）的26亿旅客中，其实24.3亿都是短途、通勤旅客，只有1.48亿长途旅客。日本JR的长途旅客运输绝大部分由新干线和特急（相当于K字头火车）承担，其中新干线又是绝对的大头。2010年新干线共运输旅客3.2亿人次。<sup data-draft-node="inline" data-draft-type="reference" data-numero="6" data-text="" data-url="https://www.mlit.go.jp/common/000232384.pdf">[6]</sup></p>
 <p data-pid="XJS23fRQ">而通勤旅客，是几乎不需要提前买票的……跟地铁一样随到随走，一般是刷交通卡。所以“订票系统”也只是像卖地铁票一样，不需要具体到班次、座位的库存，毫无压力。</p>
 <p data-pid="uoJvhRO4"><b>等于日本和德国能和铁道部对标的最多只有3-5亿人次（这已经是放很大了），对比我国2019年全国铁路旅客发送量36.60亿人，已经只有零头了。</b></p>
 <p data-pid="VGd5c3bw">即使是长途旅客，也有很大一部分是不固定车次、座位的。</p>
 <p data-pid="Vzzqyipu">以我比较熟悉的日本和英国为例。日本的新干线分为自由席和指定席，自由席票可以乘坐任何一班对应区间的列车，有座就坐，没有就站着。指定席是有固定车次、座位的，类似我国的火车票。从个人经验来说，指定席最多占一半。3.2亿人次大约只剩一半。</p>
 <p data-pid="WPJKYxrc">英国则是可以提前购买特定特价车次的票，会打折，只能坐这班车，但我印象中不具体到座位。而占绝大多数的常规票也是买了A站到B站后，做任何一班都可以，也没有固定座位。</p>
 <p data-pid="t9-i85wX"><b>不固定班次、座位的卖票系统，有何难度？</b></p>
 <p data-pid="w4XX1RT4"><b>作为比较，2019年全国铁路旅客发送量完成36.60亿人，全部都是提前买好票，具体到哪一班火车，哪一个座位的。</b></p>
 <p data-pid="YFvlO_YU">业务量、计算量完全不在一个量级的情况下，我们可以放心地说，中国的铁路订票系统在世界上，是最牛逼的。</p>
 <p data-pid="J0sNF9PB">何况刚才我试着打开了下英国铁路，发现它的网站上只有“行程规划（Journey Planner），没有卖票。需要先选好乘坐的区间，再跳转到若干家外部的订票网站之一。而这个“行程规划”，我试着打开了下，结果直接报错：</p>
 <figure data-size="small">
  <img src="https://pic1.zhimg.com/50/v2-4e9b25d454e205282ce2746eb6ab73ac_720w.jpg?source=1940ef5c" data-rawwidth="1201" data-rawheight="889" data-size="small" data-caption="" data-original-token="v2-4e9b25d454e205282ce2746eb6ab73ac" class="origin_image zh-lightbox-thumb" width="1201" data-original="https://pic1.zhimg.com/v2-4e9b25d454e205282ce2746eb6ab73ac_r.jpg?source=1940ef5c">
 </figure>
 <p data-pid="m4HLCWU9">现在可是伦敦时间下午6点。</p>
 <p data-pid="_CHihjBO">嗯，我确定中国的铁路订票系统在世界上是坠流弊的了。</p>
 <hr>
 <p data-pid="0RmjDjDo">感谢大家的支持与建议，我把这篇文章升级成了7000字的上下篇。</p>
 <p data-pid="1IwZWg_f">除了说明得更形象易懂，还增加了：</p>
 <ul>
  <li data-pid="0P9MghGZ">是谁做的12306？真的是铁道部搞不好，然后马云来把它搞好的吗？</li>
  <li data-pid="KzwbYsVc">大佬具体做了什么，让12306可以承受这么大的难度和流量？</li>
 </ul>
 <p data-pid="lQ5c9uHn">发在公众号<b>【上海古美门】，</b>欢迎来阅读哦！</p>
 <p class="ztext-empty-paragraph"><br></p>
 <p data-pid="RJhP8JJT"><i>文中新闻引用来源：</i></p>
 <p data-pid="e9cWR5KU"><i>《中国经济周刊》2020年1月16日，《探秘12306监控中心｜最高日访问量1500 亿次，12306到底有多牛》</i></p>
</body>
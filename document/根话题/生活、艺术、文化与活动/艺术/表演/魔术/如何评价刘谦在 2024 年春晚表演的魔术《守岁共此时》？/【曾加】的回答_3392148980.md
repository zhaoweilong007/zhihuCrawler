# 如何评价刘谦在 2024 年春晚表演的魔术《守岁共此时》？
- 点赞数：6530
- 更新时间：2024年02月12日19时56分25秒
- 回答url：https://www.zhihu.com/question/643785170/answer/3392148980
<body>
 <p data-pid="HbCYkPfd">第二个魔术原理是一个数学的小把戏。下面先复原一下魔术原理，然后给出数学证明：</p>
 <p data-pid="0zy-wjmH">第1步：四张牌，对折后撕开，此时8张牌的位置为：四张一组，然后相同的四张第二组；</p>
 <p data-pid="NSXc0pAB">第2步：把最顶上和名字字数相同的牌数放到最下面，普通人放 2~4 张，具体放几张其实不重要，因为不会改变牌的相对顺序，不妨假定此时 8 张牌按照顺序分别是： A234A234；</p>
 <p data-pid="ptEq7ujw">第3步：从牌顶拿3张牌插到中间，此时顺序变成：4XXXXXX4；（X为未知）</p>
 <p data-pid="IRsiFNQZ">第4步：藏牌，藏了4。</p>
 <p data-pid="C7RbCHxW">第5步：南北方人根据不同属性，从牌顶向中间插入 1~3 张牌，这个步骤不重要，只要保证最末的一张没动就行，此时牌面变成：XXXXXX4</p>
 <p data-pid="8TXWRUCV">第6步：男生丢1张，女生丢2张；此时假设男生手里是：BCDEF4，女生：CDEF4（这里的 B~F 都是未知）。<b><i>这里有一个小彩蛋：如果你是第 3 种性别，丢 3 张牌，或者你是无性别人，一张牌都不丢，魔术亦可成立！这是一个「约瑟夫问题」的特殊形式，关键是第 7 步移动的是 7 张牌。</i></b></p>
 <p data-pid="1JX4L6bj">第7步：「见证奇迹的时刻」，从牌顶往底部放 7 张牌。男生：CDEF4B，女生 EF4CD</p>
 <p data-pid="4DUKTJuU">第8步：留一张放到最下面，然后丢一张。往复循环：</p>
 <p data-pid="GOU6IkM0">1、男生EF4BC，女生 4CDE</p>
 <p data-pid="em3giYfD">2、男生4BCE，女生 DE4</p>
 <p data-pid="cOwoGZaH">3、男生CE4，女生 4D</p>
 <p data-pid="qLEiOUIc">4、男生4C，女生4</p>
 <p data-pid="e7lT47tF">5、男生 4；</p>
 <p data-pid="nuHcELKe" class="ztext-empty-paragraph"><br></p>
 <p data-pid="UNlnMm60">于是留下的牌和藏的牌都是 4</p>
 <p data-pid="If26J67n">推演完毕。</p>
 <hr>
 <p data-pid="qhFBzVfl">复原这个魔术的原理并不复杂，但背后的数学问题其实很有意思。</p>
 <p data-pid="LePXA5gR">在这个数学小把戏中，最精妙的是第 7 步：从牌顶往底部放 7 张牌，这使得，无论第 6 步丢了 0~3 张的任意数量牌，最后一张牌总能被剩下来。这部分的数学证明十分巧妙。</p>
 <p data-pid="GtxNfUNm"><i>我们考虑其背后的「约瑟夫问题」：</i><b><i>如果一共有 n 张牌，每次操作放到牌底一张牌，然后丢一张牌，往复循环，最后剩下的是第几张牌？</i></b></p>
 <p data-pid="vwTRIcY_"><i>先考虑这个问题的特殊情况：n 是 2 的幂次，比如 2、4、8、16 ……此时显而易见，每一个循环后，剩下的牌的张数还是 2 的幂次，最后，第 1 张牌永远会被留下。</i></p>
 <p data-pid="hrYgpEH0"><i>当 n 不是 2 的幂次时，巧妙的部分来了：考虑比 n 小的最大的 2 的幂次，然后在第一个大循环中，我们留一张、丢一张，直到剩下 2 的幂次张牌，此时的牌面就回到了问题的特殊情况，与输出目前留下的第 1 张牌会留到最后。将这个过程逆向，假设这张牌一开始在第 k 张，则满足：</i></p>
 <p data-pid="OgHlwxsC"><img src="https://www.zhihu.com/equation?tex=k+%3D+2%28n-2%5E%7B%5Blog_%7B2%7Dn%5D%7D%29%2B1" alt="k = 2(n-2^{[log_{2}n]})+1" eeimg="1"> （其中方括号代表「取整」）</p>
 <p data-pid="lzcU9tQn"><i>回到原问题，当我们剩下 7 张牌后，假如丢了 a 张牌，再往底部放 7 张牌，由于此时牌的张数是 7-a，距离下一个 2 的幂次（4）是 3-a 张，于是此时会剩下的最后一张牌目前的位置满足：</i></p>
 <p data-pid="w1IdZBaC"><i>k = 2(3-a)+1 = 7-2a </i></p>
 <p data-pid="6Lp5WCYO"><i>在 7-a 张牌中排在第 7-2a 张，那么在移动 7 张牌前，它的位置需要往后挪 7 个，即在第 14-2a 张，它恰好是 7-a 的两倍，也就是说，实际上它在最后一张。</i></p>
 <p data-pid="-0YAkpHz"><i>这就证明了，无论丢掉的牌的张数 a 是 0~3 中哪个数，此时的最后一张牌会被留下来。证毕！</i></p>
 <p data-pid="XJdg6jSL">参照这个「约瑟夫问题」的解答，普通人也可能轻松构造一些系数，达到神奇的魔术效果了~</p>
 <p class="ztext-empty-paragraph"><br></p>
 <p data-pid="L7fnJ_XT"><b>最后祝大家春节快乐，万事如意！</b></p>
</body>
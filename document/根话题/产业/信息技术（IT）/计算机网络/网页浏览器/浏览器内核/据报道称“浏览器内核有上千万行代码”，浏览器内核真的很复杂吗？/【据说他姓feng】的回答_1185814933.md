# 据报道称“浏览器内核有上千万行代码”，浏览器内核真的很复杂吗？
- 点赞数：5557
- 更新时间：2020年05月27日12时39分52秒
- 回答url：https://www.zhihu.com/question/290767285/answer/1185814933
<body>
 <p data-pid="rtR7aH2_">极度复杂，称之为IT界的火星计划都不为过。</p>
 <p data-pid="rvEKHF79">连微软都没有能力再维护一套“跟得上最新标准”的内核而使用Chromium内核。准确地说，是指没有把握在有限的资源内（远超出其他小厂），纯粹通过自身的力量，开发出一套比Chromium更具有竞争力和商业价值的内核。</p>
 <p class="ztext-empty-paragraph"><br></p>
 <p data-pid="9p7P1Vr0">浏览器的复杂，涉及几个方面，稍稍点一下，不作展开：</p>
 <p data-pid="zeoFAmLJ">1、排版与渲染。这一方面的设计，最早最早可以追溯回去Knuth老爷子的《The TeX Book》，诸如px、em、inch、baseline、vbox、hbox这些概念，最早最早都是为 TeX 排版创造出来的，用于字母的定位。CSS 3.0 那些变幻、动画，就更不提了。</p>
 <p data-pid="4RQTX-zl">2、多媒体，包括声频视频。在 Fabrice Bellard 大神的 ffmpeg 之上，还做了非常非常多的工作。需要处理各种播放格式的解码工作，这部分又分为硬件实现和软件实现。</p>
 <p data-pid="a3oN6NaY">3、JavaScript引擎。这里涉及编译原理、JIT优化、垃圾回收。</p>
 <p data-pid="aYcrsyUO">4、图形学。WebGL，底层D3X、OpenGL 适配，现在还多了一个 Mac 的 Metal。还要绕开NVidia、AMD、Intel显卡对各种驱动的可能出现的坑。</p>
 <p data-pid="ALH_qS_l">5、网络。包括完整实现HTTP协议、WebSocket协议、WebRTC协议，还有新协议诸如HTTP2、HTTP3等。对比与渲染与多媒体，这部分反倒是最不困难的，也是确定性最强的。</p>
 <p data-pid="oQTwcut2">6、与OS的交互与优化。这部分至少3套代码，MacOS、Windows、Linux 各不同。</p>
 <p data-pid="wc-XO5xV">7、要实现好上万页的W3C标准，通过兼容性测试。</p>
 <p data-pid="ezEv95Rz">8、安全性。各平台实现的SandBox环境。</p>
 <p class="ztext-empty-paragraph"><br></p>
 <p data-pid="HpHaeppH">另一浏览器Firefox（谢谢指正）内核源代码，都还保留着Netscape浏览器的遗产，有些部分一行都没改过（或者说没有能力读懂，就没改），但还能跑还能用。</p>
 <p class="ztext-empty-paragraph"><br></p>
 <p data-pid="k0yvr6bi">很多人会混淆“难”与“复杂”2个维度，用浏览器这个例子就很能说明这2个维度的差异。难。需要硬功夫去啃，强调的是特定领域的深度。复杂。涉及面广，强调的是多个领域相互配合。对于浏览器前面说的几点，你把每一点单独抽出来，啃个3年5年，总能啃出点成果。例如V8 JS引擎里头的语法解析部分，至少可以理解他怎么运作的。而对浏览器而言，你需要把上述不同领域的都摸一遍，摸清楚难点在那里，摸清楚与其他组件如何配合，可能3-5年也只能知道个大概。</p>
 <p class="ztext-empty-paragraph"><br></p>
 <p data-pid="0LYKp1eC">一个浏览器，涉及了操作系统、图形学、编译原理三座大山的各个方面，需要各个组件精密地配合运作起来，否则就是排版错乱、音频视频变噪音等问题，直接导致产品不可用。</p>
 <p class="ztext-empty-paragraph"><br></p>
 <p data-pid="NUhhuiQR">顺便为自己的愚蠢诚恳认错</p>
 <figure data-size="normal">
  <img src="https://picx.zhimg.com/50/v2-2ad44141213acb6bce53fb4bca8943eb_720w.jpg?source=1940ef5c" data-caption="" data-size="normal" data-rawwidth="1242" data-rawheight="815" data-original-token="v2-4db259f19ebd75f098baa07eafcf2961" data-default-watermark-src="https://picx.zhimg.com/50/v2-c231b9f7117d770bab2ab72085fb0d68_720w.jpg?source=1940ef5c" class="origin_image zh-lightbox-thumb" width="1242" data-original="https://pic1.zhimg.com/v2-2ad44141213acb6bce53fb4bca8943eb_r.jpg?source=1940ef5c">
 </figure>
 <p></p>
</body>
# 电脑上打开浏览器，输入 www.baidu.com，回车，到百度页面出现。中间发生了什么？
- 点赞数：5741
- 更新时间：2021年01月08日11时17分38秒
- 回答url：https://www.zhihu.com/question/437193010/answer/1653724247
<body>
 <p data-pid="Gh3x9zJU">作为浏览器工程师，每每看到这类问题，都会觉得有点尬。如果你对浏览器以及计算机科学了解的越多，你会越发觉得这类问题实在是难以回答。</p>
 <p data-pid="DKXVOtzN">相信这种问题频繁地出现在许多面试中，我不知道面试官期望通过这个问题考察到什么，可能他们期望的答案正如你在网上能搜到的一般，大致输入网址后发生了：</p>
 <ol>
  <li data-pid="Tz4MPdh9">DNS解析域名到ip地址</li>
  <li data-pid="gnjZsq4Y">浏览器发送请求</li>
  <li data-pid="Vr97mHf4">服务器接受到请求进行处理</li>
  <li data-pid="o4BVhN6H">服务器返回响应</li>
  <li data-pid="U7Zlst6T">浏览器针对响应进行解码，获取到html</li>
  <li data-pid="F-cW3xuB">浏览器渲染html、构建dom节点、加载css、运行脚本</li>
 </ol>
 <p data-pid="t41RT9M8">如果这是面试官想要的回答，那么你大可以把这里面每一步都再去了解的深一下。你越了解深入，你越会觉得浏览器输入网址后发生的事情真是涵盖了计算机网络技术发展这几十年来的所有的精髓，你随便展开其中某一步骤都足以触及到任何面试官的技术盲区，是的你没看错，是任何面试官。</p>
 <p data-pid="DaK2gpft">所以我真的很想呼吁面试的时候别再问这道题了，上面写的只不过是看似标准的“标准答案”罢了。</p>
 <p data-pid="fDejwIv5">我这里就不硬扛说输入网址先是由浏览器主进程接受键盘事件这种细活了，不然展开讲各浏览器进程架构又是一大篇。</p>
 <p data-pid="A_2P1vWc">就从DNS解析开始说吧，谁说了浏览器一定要进行DNS解析的？“标准答案”没有考虑到如果浏览器使用代理的情况，如果浏览器使用代理服务器，那么DNS解析的任务是由代理服务器完成的。使用代理服务器和不使用代理服务器是有很大差别的，用了代理后如果是HTTPS请求，那么浏览器会先发一个HTTP CONNECT明文请求给代理，由代理创建TLS隧道后，然后再盲发浏览器和服务器之间的数据，光是这个技术细节都有一大篇RFC标准可以读。</p>
 <p data-pid="kND6Kjvg">然后说第二步浏览器发送请求，谁说浏览器一定发送请求了？baidu我不知道，如果你试着在浏览器里输入<a href="https://link.zhihu.com/?target=http%3A//www.google.com" class=" external" target="_blank" rel="nofollow noreferrer"><span class="invisible">http://www.</span><span class="visible">google.com</span><span class="invisible"></span></a>，那么浏览器会默认你是HTTP协议，发送请求去<b>http</b> :// <a href="https://link.zhihu.com/?target=http%3A//www.google.com" class=" external" target="_blank" rel="nofollow noreferrer"><span class="invisible">http://www.</span><span class="visible">google.com</span><span class="invisible"></span></a>，那么由于google已经禁用HTTP，所以服务器会返回你一个301重定向到<b>https</b> :// <a href="https://link.zhihu.com/?target=http%3A//www.google.com" class=" external" target="_blank" rel="nofollow noreferrer"><span class="invisible">http://www.</span><span class="visible">google.com</span><span class="invisible"></span></a>，这是第一次访问<a href="https://link.zhihu.com/?target=http%3A//www.google.com" class=" external" target="_blank" rel="nofollow noreferrer"><span class="invisible">http://www.</span><span class="visible">google.com</span><span class="invisible"></span></a>会发生的事情。但是第二次你再输入<a href="https://link.zhihu.com/?target=http%3A//www.google.com" class=" external" target="_blank" rel="nofollow noreferrer"><span class="invisible">http://www.</span><span class="visible">google.com</span><span class="invisible"></span></a>，浏览器就不会发送请求去<b>http</b> :// <a href="https://link.zhihu.com/?target=http%3A//www.google.com" class=" external" target="_blank" rel="nofollow noreferrer"><span class="invisible">http://www.</span><span class="visible">google.com</span><span class="invisible"></span></a>了，而是直接去访问<b>https</b> :// <a href="https://link.zhihu.com/?target=http%3A//www.google.com" class=" external" target="_blank" rel="nofollow noreferrer"><span class="invisible">http://www.</span><span class="visible">google.com</span><span class="invisible"></span></a>。这里就牵涉到301重定向这个概念，很多人都知道302，307也是重定向，两者区别是301是Moved Permanently（永久被移除），意味着浏览器可以记住这结果，下次用户访问<b>http</b> :// <a href="https://link.zhihu.com/?target=http%3A//www.google.com/" class=" external" target="_blank" rel="nofollow noreferrer"><span class="invisible">http://www.</span><span class="visible">google.com/</span><span class="invisible"></span></a>时，就不用发请求了，直接访问重定向的https地址吧。而302和307都是临时性的，浏览器不会再缓存里记录重定向的结果。</p>
 <p data-pid="u7ygxemJ">第三第四步服务器接受请求进行处理然后返回就有更多可以展开的，涉及到很多后端的架构体系，请求的资源是动态还是静态的，是不是有load balance，怎么route你这个请求，后端怎么样的缓存策略等等。</p>
 <p data-pid="X1taGd58">再后面浏览器处理响应渲染页面，要多复杂有多复杂。浏览器发展至今也就那么屈指可数的几个渲染引擎。即便如微软在已有trident引擎基础上倾入全力来开发edgehtml，也抵不住最后转向chromium的现实。</p>
 <p data-pid="5ko5wDY4">没想到这个问题还是获得了挺多关注和点赞。</p>
 <p data-pid="io5-yxDJ">其实正如很多人所说这是一道开放问题，但它的问题恰恰是因为太开放了，除非面试的职位就是做浏览器的（比如我所在的组），那么面试官可以从任意角度切入让面试者深入展开其中任意环节（其实做浏览器的也不是太在意服务器后端是怎么处理请求的，浏览器只在乎你回复了什么http状态码、头和主体）。不然的话还是问一些特定范围的和职位息息相关的开放问题都会比这道题来的好，比如：从前或后端角度谈谈网站性能优化，现有的http协议有哪些不足等。并且现在充斥着的这类“标准答案”往往也会让许多面试者甚至面试官有一种自己对浏览器很精通的错觉。其实根本不存在对浏览器很精通的人，即使浏览器的开发人员，大多也只是负责其中的某一部分。</p>
 <p></p>
</body>
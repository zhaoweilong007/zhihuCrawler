# 如何在程序里留下彩蛋？
- 点赞数：12663
- 更新时间：2018年05月10日04时40分05秒
- 回答url：https://www.zhihu.com/question/271409373/answer/367796835
<body>
 <p data-pid="38IzyEC3">把梗埋在代码里，最多一两年就没了，在 API 里，也许能撑个三五年，但是如果把梗埋在基础通讯协议握手验证字段里，就能永垂不朽了……</p>
 <p data-pid="xNQ2Ul_q">我2006年在百度实习的时候做百度搜藏（还有人记得这个东西么），彼时 tech lead 福至心灵想要设计一个新的通用的一点的 RPC 协议。最后不知为什么写代码的变成了我。</p>
 <p data-pid="Bp5IZIIJ">这种二进制协议的消息头里经常会放一个类似江湖切口的 magic number 验证通讯两端是不是讲的同一个协议大小端是否一致之类。然后我放了一个</p>
 <p data-pid="zIWqhZvd"><b>0xfb709394 </b>(粤语数字梗：出来搞三搞四)。</p>
 <p data-pid="K6oDIvlU">后来这个协议 somehow 变成了百度一个蛮通行的通讯协议，几乎全百度的服务器都在呢喃着这句粤语切口，网卡灯的每一次闪烁都是来自大吃省的亲切问候。机房外的北京城漫天黄沙，机房里的空气却是初夏广东露天大排档的味道。</p>
 <p data-pid="XxIsAB_3">作为一个握手验证字段，要改只能服务端和客户端一起改…… 以任何大点的公司都差不多的一团乱麻的内部服务依赖状态这基本是没法动了。就算到了全新的 BRPC, 也不得不留下对这个老接口的兼容代码：</p>
 <p data-pid="dOqI_9X7"><a href="https://link.zhihu.com/?target=https%3A//github.com/brpc/brpc/blob/master/src/brpc/nshead.h%23L21" class=" external" target="_blank" rel="nofollow noreferrer"><span class="invisible">https://</span><span class="visible">github.com/brpc/brpc/bl</span><span class="invisible">ob/master/src/brpc/nshead.h#L21</span><span class="ellipsis"></span></a></p>
 <figure data-size="normal">
  <img src="https://picx.zhimg.com/50/v2-931a3211716539ba821a1404e698c2e1_720w.jpg?source=1940ef5c" data-caption="" data-size="normal" data-rawwidth="1124" data-rawheight="726" data-original-token="v2-931a3211716539ba821a1404e698c2e1" class="origin_image zh-lightbox-thumb" width="1124" data-original="https://picx.zhimg.com/v2-931a3211716539ba821a1404e698c2e1_r.jpg?source=1940ef5c">
 </figure>
</body>
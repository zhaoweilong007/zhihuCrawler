# 用C语言，能在100行之内实现贪吃蛇吗？
- 点赞数：6217
- 更新时间：2020年03月02日15时32分50秒
- 回答url：https://www.zhihu.com/question/360814879/answer/1005146158
<body>
 <p data-pid="ddgP3djF"><b>这段代码会发生内存泄漏，特此备注。</b></p>
 <p data-pid="37-X9sHU">~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</p>
 <p data-pid="LletlG7U">没学到一个小小的贪吃蛇会有怎么多赞，当时想能有100个赞已经很不错了，这个完全超出我的预期啊，啊啊啊~飘了飘了~</p>
 <p data-pid="tQ3-SUB1">小声bb：其实这个代码写得不咋地，有些函数为了能用 return 语句，故意写了一个返回值，但是返回值没有用到，还有就是 Run 这个函数本来不应该接受一个参数，但是为了省一行的代码，把init写进去，才出此下策。这样写的后果就是代码不符合我的预期，不这样写的话又不符合题主的要求，两难啊。所以我才会比较郁闷，说了点脏话，实在抱歉 。（可能自己水平不够，代码还有很多优化空间，我看别的答主根本就用不到100行）</p>
 <p data-pid="3VlkYNZ_">继续努力吧 ~</p>
 <p data-pid="FgljjMfs">~~~~~~~~~~~~原答案~~~~~~~~~~~</p>
 <p data-pid="yItxkpi8">我本来怀着很好的心情来写这个100的贪吃蛇的，不过写到后面就出口成脏了。</p>
 <p data-pid="-Bando31">mmp，写到后面很是郁闷。有图为证。</p>
 <figure data-size="normal">
  <img src="https://picx.zhimg.com/50/v2-24282589875507303953d85b75e61be2_720w.jpg?source=1940ef5c" data-size="normal" data-rawwidth="1228" data-rawheight="331" data-original-token="v2-e63681df0237b2b34a474e6b0d8bfea8" data-default-watermark-src="https://pica.zhimg.com/50/v2-9369f63fcad58ed27f83b05f562fea23_720w.jpg?source=1940ef5c" class="origin_image zh-lightbox-thumb" width="1228" data-original="https://pic1.zhimg.com/v2-24282589875507303953d85b75e61be2_r.jpg?source=1940ef5c">
  <figcaption>
   忍不住说脏话了
  </figcaption>
 </figure>
 <p data-pid="L9dpKCyt">刚刚好一百行代码，我去，这是那我之前写的350多行代码压缩的得到的。</p>
 <p data-pid="vTULuHRc">写得很垃圾，有些东西就是乱写一通，就为了压缩一两行逻辑代码。</p>
 <p data-pid="ne6JgwoK">然后UI部分，这个也没办法压缩，能压缩的都在核心代码上面了。</p>
 <p data-pid="PZzN0bpT">尽量体现出来格式，但是难受啊</p>
 <p data-pid="O-i0LGQn">贪吃蛇的核心代码就在这个switch里面了，10行。也就是占比 1/10。其实还可以...</p>
 <figure data-size="normal">
  <img src="https://picx.zhimg.com/50/v2-3ae05e93ce1c51c1efe8c3743c38c052_720w.jpg?source=1940ef5c" data-caption="" data-size="normal" data-rawwidth="1251" data-rawheight="267" data-original-token="v2-ce62988db28106b5af8c04feec4199d8" data-default-watermark-src="https://picx.zhimg.com/50/v2-a91ea21e5131c8c183f725cce112a6c1_720w.jpg?source=1940ef5c" class="origin_image zh-lightbox-thumb" width="1251" data-original="https://picx.zhimg.com/v2-3ae05e93ce1c51c1efe8c3743c38c052_r.jpg?source=1940ef5c">
 </figure>
 <p data-pid="QyH1goNC">最后的效果图是这个</p>
 <figure data-size="normal">
  <img src="https://picx.zhimg.com/50/v2-c306e9bf2a7c29b76dc2bc5824f5080d_720w.jpg?source=1940ef5c" data-size="normal" data-rawwidth="542" data-rawheight="579" data-original-token="v2-c7309ab47a15d1f8a5706ed2a126b8d7" data-default-watermark-src="https://pic1.zhimg.com/50/v2-62645616295d276f22c5b4bf83bc4f89_720w.jpg?source=1940ef5c" class="origin_image zh-lightbox-thumb" width="542" data-original="https://picx.zhimg.com/v2-c306e9bf2a7c29b76dc2bc5824f5080d_r.jpg?source=1940ef5c">
  <figcaption>
   按空格开始和暂停
  </figcaption>
 </figure>
 <p class="ztext-empty-paragraph"><br></p>
 <p data-pid="62t_v6KJ">直接贴代码吧。</p>
 <div class="highlight">
  <pre><code class="language-c"><span class="cp">#include</span> <span class="cpf">&lt;Windows.h&gt;</span><span class="cp">
</span><span class="cp">#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp">
</span><span class="cp">#include</span> <span class="cpf">&lt;conio.h&gt;</span><span class="cp">
</span><span class="cp">#include</span> <span class="cpf">&lt;time.h&gt;</span><span class="cp">
</span><span class="cp">#define PANIC(err) (fprintf(stderr,"PANIC Line %d : %s",__LINE__,err),exit(-1),1)
</span><span class="cp">#define PANICIFNULL(EXP) ((EXP)==NULL &amp;&amp; PANIC("NULL"))
</span><span class="cp"></span><span class="k">typedef</span> <span class="k">enum</span> <span class="p">{</span> <span class="n">EMPTY</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">WALL</span><span class="p">,</span> <span class="n">BODY</span><span class="p">,</span> <span class="n">FOOD</span> <span class="p">}</span> <span class="n">MAP</span><span class="p">;</span>
<span class="k">typedef</span> <span class="kt">int</span> <span class="n">POSITION</span><span class="p">;</span>
<span class="k">struct</span> <span class="p">{</span> <span class="kt">int</span> <span class="n">color</span><span class="p">;</span> <span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">shape</span><span class="p">;</span> <span class="p">}</span> <span class="n">UI</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span><span class="mi">2</span><span class="p">,</span><span class="s">"■"</span><span class="p">},{</span><span class="mi">4</span><span class="p">,</span><span class="s">"□"</span><span class="p">},{</span><span class="mi">6</span><span class="p">,</span><span class="s">"★"</span><span class="p">},{</span><span class="mi">4</span><span class="p">,</span><span class="s">"●"</span><span class="p">}</span>
<span class="p">};</span>
<span class="k">struct</span> <span class="p">{</span>
	<span class="kt">int</span> <span class="n">WIDTH</span><span class="p">,</span> <span class="n">HEIGHT</span><span class="p">,</span> <span class="n">direction</span><span class="p">,</span> <span class="n">delay</span><span class="p">;</span>
	<span class="n">MAP</span><span class="o">*</span> <span class="n">map</span><span class="p">;</span>
	<span class="n">POSITION</span><span class="o">*</span> <span class="n">body</span><span class="p">,</span> <span class="n">head</span><span class="p">,</span> <span class="n">tail</span><span class="p">,</span> <span class="n">len</span><span class="p">;</span>
<span class="p">}</span> <span class="n">C</span><span class="p">;</span>
<span class="kt">void</span> <span class="nf">initConsole</span><span class="p">(</span><span class="kt">int</span> <span class="n">width</span><span class="p">,</span> <span class="kt">int</span> <span class="n">height</span><span class="p">)</span> <span class="p">{</span>
	<span class="kt">char</span> <span class="n">cmd</span><span class="p">[</span><span class="mi">100</span><span class="p">];</span>
	<span class="n">sprintf_s</span><span class="p">(</span><span class="n">cmd</span><span class="p">,</span><span class="mi">100</span><span class="p">,</span> <span class="s">"mode con cols=%d lines=%d &amp;&amp; title C语言贪吃蛇 By dreamer2q %s"</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">,</span><span class="n">__DATE__</span><span class="p">);</span>
	<span class="n">system</span><span class="p">(</span><span class="n">cmd</span><span class="p">);</span>
	<span class="n">HANDLE</span> <span class="n">handle</span> <span class="o">=</span> <span class="n">GetStdHandle</span><span class="p">(</span><span class="n">STD_OUTPUT_HANDLE</span><span class="p">);</span>
	<span class="n">CONSOLE_CURSOR_INFO</span> <span class="n">cur_info</span><span class="p">;</span>
	<span class="n">GetConsoleCursorInfo</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">cur_info</span><span class="p">);</span>
	<span class="n">cur_info</span><span class="p">.</span><span class="n">bVisible</span> <span class="o">=</span> <span class="n">FALSE</span><span class="p">;</span>
	<span class="n">SetConsoleCursorInfo</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">cur_info</span><span class="p">);</span>
<span class="p">}</span>
<span class="kt">void</span> <span class="nf">updatePosition</span><span class="p">(</span><span class="n">POSITION</span> <span class="n">pos</span><span class="p">)</span> <span class="p">{</span>
	<span class="n">HANDLE</span> <span class="n">handle</span> <span class="o">=</span> <span class="n">GetStdHandle</span><span class="p">(</span><span class="n">STD_OUTPUT_HANDLE</span><span class="p">);</span>
	<span class="n">COORD</span> <span class="n">coord</span> <span class="o">=</span> <span class="p">{</span> <span class="p">(</span><span class="n">pos</span> <span class="o">%</span> <span class="p">(</span><span class="n">C</span><span class="p">.</span><span class="n">WIDTH</span><span class="p">))</span> <span class="o">*</span> <span class="mi">2</span> <span class="p">,</span><span class="n">pos</span> <span class="o">/</span> <span class="p">(</span><span class="n">C</span><span class="p">.</span><span class="n">WIDTH</span><span class="p">)</span> <span class="p">};</span>
	<span class="n">SetConsoleCursorPosition</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="n">coord</span><span class="p">);</span>
	<span class="n">SetConsoleTextAttribute</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="n">UI</span><span class="p">[</span><span class="n">C</span><span class="p">.</span><span class="n">map</span><span class="p">[</span><span class="n">pos</span><span class="p">]].</span><span class="n">color</span><span class="p">);</span>
	<span class="n">printf</span><span class="p">(</span><span class="s">"%s"</span><span class="p">,</span> <span class="n">UI</span><span class="p">[</span><span class="n">C</span><span class="p">.</span><span class="n">map</span><span class="p">[</span><span class="n">pos</span><span class="p">]].</span><span class="n">shape</span><span class="p">);</span>
<span class="p">}</span>
<span class="n">MAP</span> <span class="nf">food</span><span class="p">(</span><span class="kt">int</span> <span class="n">t</span><span class="p">)</span> <span class="p">{</span>
	<span class="n">POSITION</span> <span class="n">pos</span> <span class="o">=</span> <span class="p">(</span><span class="n">rand</span><span class="p">()</span> <span class="o">%</span> <span class="p">((</span><span class="n">C</span><span class="p">.</span><span class="n">WIDTH</span> <span class="o">-</span> <span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">C</span><span class="p">.</span><span class="n">HEIGHT</span> <span class="o">-</span> <span class="mi">2</span><span class="p">)))</span> <span class="o">+</span> <span class="n">C</span><span class="p">.</span><span class="n">WIDTH</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">C</span><span class="p">.</span><span class="n">map</span><span class="p">[</span><span class="n">pos</span><span class="p">])</span> <span class="k">return</span> <span class="n">food</span><span class="p">(</span><span class="n">t</span><span class="p">);</span>
	<span class="k">else</span> <span class="k">return</span>  <span class="p">(</span><span class="n">C</span><span class="p">.</span><span class="n">map</span><span class="p">[</span><span class="n">pos</span><span class="p">]</span> <span class="o">=</span> <span class="n">FOOD</span><span class="p">)</span> <span class="o">?</span> <span class="n">updatePosition</span><span class="p">(</span><span class="n">pos</span><span class="p">),</span> <span class="nl">BODY</span> <span class="p">:</span> <span class="n">BODY</span><span class="p">;</span>
<span class="p">}</span>
<span class="kt">int</span> <span class="nf">init</span><span class="p">()</span> <span class="p">{</span>
	<span class="n">C</span><span class="p">.</span><span class="n">WIDTH</span> <span class="o">=</span> <span class="n">C</span><span class="p">.</span><span class="n">HEIGHT</span> <span class="o">=</span> <span class="mi">30</span><span class="p">;</span>
	<span class="n">initConsole</span><span class="p">(</span><span class="n">C</span><span class="p">.</span><span class="n">WIDTH</span> <span class="o">*</span> <span class="mi">2</span><span class="p">,</span> <span class="n">C</span><span class="p">.</span><span class="n">HEIGHT</span><span class="p">);</span>
	<span class="n">PANICIFNULL</span><span class="p">(</span><span class="n">C</span><span class="p">.</span><span class="n">map</span> <span class="o">=</span> <span class="p">(</span><span class="n">MAP</span><span class="o">*</span><span class="p">)</span><span class="n">malloc</span><span class="p">((</span><span class="n">C</span><span class="p">.</span><span class="n">WIDTH</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">C</span><span class="p">.</span><span class="n">HEIGHT</span><span class="p">)</span> <span class="o">*</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">MAP</span><span class="p">)));</span>
	<span class="n">PANICIFNULL</span><span class="p">(</span><span class="n">C</span><span class="p">.</span><span class="n">body</span> <span class="o">=</span> <span class="p">(</span><span class="n">POSITION</span><span class="o">*</span><span class="p">)</span><span class="n">malloc</span><span class="p">(</span><span class="n">C</span><span class="p">.</span><span class="n">WIDTH</span> <span class="o">*</span> <span class="n">C</span><span class="p">.</span><span class="n">HEIGHT</span> <span class="o">*</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">POSITION</span><span class="p">)));</span>
	<span class="n">C</span><span class="p">.</span><span class="n">head</span> <span class="o">=</span> <span class="p">(</span><span class="n">C</span><span class="p">.</span><span class="n">len</span> <span class="o">=</span> <span class="mi">3</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>
	<span class="n">C</span><span class="p">.</span><span class="n">direction</span> <span class="o">=</span> <span class="p">(</span><span class="n">C</span><span class="p">.</span><span class="n">tail</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
	<span class="n">C</span><span class="p">.</span><span class="n">delay</span> <span class="o">=</span> <span class="o">-</span><span class="mi">150</span><span class="p">;</span>
	<span class="n">memset</span><span class="p">(</span><span class="n">C</span><span class="p">.</span><span class="n">map</span><span class="p">,</span> <span class="n">EMPTY</span><span class="p">,</span> <span class="p">(</span><span class="n">C</span><span class="p">.</span><span class="n">WIDTH</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">C</span><span class="p">.</span><span class="n">HEIGHT</span><span class="p">)</span> <span class="o">*</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">MAP</span><span class="p">));</span>
	<span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="p">(</span><span class="n">C</span><span class="p">.</span><span class="n">WIDTH</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">C</span><span class="p">.</span><span class="n">HEIGHT</span><span class="p">);</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">i</span> <span class="o">&lt;</span> <span class="n">C</span><span class="p">.</span><span class="n">WIDTH</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="n">C</span><span class="p">.</span><span class="n">map</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">C</span><span class="p">.</span><span class="n">map</span><span class="p">[</span><span class="n">C</span><span class="p">.</span><span class="n">WIDTH</span> <span class="o">*</span> <span class="p">(</span><span class="n">C</span><span class="p">.</span><span class="n">HEIGHT</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">WALL</span><span class="p">);</span>
		<span class="n">i</span> <span class="o">&lt;</span> <span class="n">C</span><span class="p">.</span><span class="n">HEIGHT</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="n">C</span><span class="p">.</span><span class="n">map</span><span class="p">[</span><span class="n">C</span><span class="p">.</span><span class="n">WIDTH</span> <span class="o">*</span> <span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">C</span><span class="p">.</span><span class="n">map</span><span class="p">[</span><span class="n">C</span><span class="p">.</span><span class="n">WIDTH</span> <span class="o">*</span> <span class="n">i</span> <span class="o">+</span> <span class="n">C</span><span class="p">.</span><span class="n">WIDTH</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">WALL</span><span class="p">);</span>
		<span class="n">i</span> <span class="o">&lt;</span> <span class="n">C</span><span class="p">.</span><span class="n">len</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="n">C</span><span class="p">.</span><span class="n">map</span><span class="p">[</span><span class="n">C</span><span class="p">.</span><span class="n">body</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">C</span><span class="p">.</span><span class="n">WIDTH</span> <span class="o">*</span> <span class="n">C</span><span class="p">.</span><span class="n">HEIGHT</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">+</span> <span class="n">C</span><span class="p">.</span><span class="n">WIDTH</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">+</span> <span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">BODY</span><span class="p">);</span>
		<span class="n">updatePosition</span><span class="p">(</span><span class="n">i</span><span class="p">);</span>
	<span class="p">}</span>
	<span class="n">srand</span><span class="p">(</span><span class="n">time</span><span class="p">(</span><span class="nb">NULL</span><span class="p">));</span>
	<span class="k">return</span> <span class="n">food</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
<span class="p">}</span>
<span class="kt">int</span> <span class="nf">Run</span><span class="p">(</span><span class="kt">int</span> <span class="n">shit</span><span class="p">)</span> <span class="p">{</span>
	<span class="kt">int</span> <span class="n">prv</span> <span class="o">=</span> <span class="mi">77</span><span class="p">;</span>
	<span class="k">while</span> <span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">_kbhit</span><span class="p">())</span> <span class="p">{</span>
			<span class="kt">int</span> <span class="n">t</span> <span class="o">=</span> <span class="n">_getch</span><span class="p">();</span>
			<span class="k">if</span> <span class="p">((</span><span class="n">prv</span> <span class="o">+</span> <span class="n">t</span><span class="p">)</span> <span class="o">==</span> <span class="mi">152</span><span class="p">)</span><span class="k">continue</span><span class="p">;</span>
			<span class="k">switch</span> <span class="p">(</span><span class="n">t</span><span class="p">)</span> <span class="p">{</span>
			<span class="k">case</span> <span class="mi">72</span><span class="o">:</span><span class="n">C</span><span class="p">.</span><span class="n">direction</span> <span class="o">=</span> <span class="o">-</span><span class="n">C</span><span class="p">.</span><span class="n">WIDTH</span><span class="p">;</span> <span class="k">break</span><span class="p">;</span>
			<span class="k">case</span> <span class="mi">80</span><span class="o">:</span><span class="n">C</span><span class="p">.</span><span class="n">direction</span> <span class="o">=</span> <span class="n">C</span><span class="p">.</span><span class="n">WIDTH</span><span class="p">;</span> <span class="k">break</span><span class="p">;</span>
			<span class="k">case</span> <span class="mi">75</span><span class="o">:</span><span class="n">C</span><span class="p">.</span><span class="n">direction</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span> <span class="k">break</span><span class="p">;</span>
			<span class="k">case</span> <span class="mi">77</span><span class="o">:</span><span class="n">C</span><span class="p">.</span><span class="n">direction</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="k">break</span><span class="p">;</span>
			<span class="k">case</span> <span class="sc">' '</span><span class="o">:</span><span class="n">C</span><span class="p">.</span><span class="n">delay</span> <span class="o">=</span> <span class="o">-</span><span class="n">C</span><span class="p">.</span><span class="n">delay</span><span class="p">;</span> <span class="k">break</span><span class="p">;</span>
			<span class="k">default</span><span class="o">:</span><span class="k">continue</span><span class="p">;</span>
			<span class="p">}</span>
			<span class="n">prv</span> <span class="o">=</span> <span class="n">t</span><span class="p">;</span>
		<span class="p">}</span>
<span class="cp">#define INC(p) (((p)+1)%(C.WIDTH*C.HEIGHT))
</span><span class="cp"></span>		<span class="k">if</span> <span class="p">(</span><span class="n">C</span><span class="p">.</span><span class="n">delay</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="n">Sleep</span><span class="p">(</span><span class="n">C</span><span class="p">.</span><span class="n">delay</span><span class="p">);</span>
		<span class="k">else</span> <span class="k">continue</span><span class="p">;</span>
		<span class="k">switch</span> <span class="p">(</span><span class="n">C</span><span class="p">.</span><span class="n">map</span><span class="p">[</span><span class="n">C</span><span class="p">.</span><span class="n">body</span><span class="p">[</span><span class="n">INC</span><span class="p">(</span><span class="n">C</span><span class="p">.</span><span class="n">head</span><span class="p">)]</span> <span class="o">=</span> <span class="n">C</span><span class="p">.</span><span class="n">body</span><span class="p">[</span><span class="n">C</span><span class="p">.</span><span class="n">head</span><span class="p">]</span> <span class="o">+</span> <span class="n">C</span><span class="p">.</span><span class="n">direction</span><span class="p">])</span> <span class="p">{</span>
		<span class="k">case</span> <span class="nl">FOOD</span><span class="p">:</span><span class="n">food</span><span class="p">(</span><span class="n">C</span><span class="p">.</span><span class="n">len</span> <span class="o">=</span> <span class="o">-</span><span class="n">C</span><span class="p">.</span><span class="n">len</span> <span class="o">-</span> <span class="mi">1</span><span class="p">);</span>
		<span class="k">case</span> <span class="nl">EMPTY</span><span class="p">:</span>
			<span class="n">C</span><span class="p">.</span><span class="n">map</span><span class="p">[</span><span class="n">C</span><span class="p">.</span><span class="n">body</span><span class="p">[</span><span class="n">C</span><span class="p">.</span><span class="n">head</span> <span class="o">=</span> <span class="n">INC</span><span class="p">(</span><span class="n">C</span><span class="p">.</span><span class="n">head</span><span class="p">)]]</span> <span class="o">=</span> <span class="n">BODY</span><span class="p">;</span>
			<span class="n">updatePosition</span><span class="p">(</span><span class="n">C</span><span class="p">.</span><span class="n">body</span><span class="p">[</span><span class="n">C</span><span class="p">.</span><span class="n">head</span><span class="p">]);</span>
			<span class="k">if</span> <span class="p">(</span><span class="n">C</span><span class="p">.</span><span class="n">len</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="n">updatePosition</span><span class="p">((</span><span class="n">C</span><span class="p">.</span><span class="n">map</span><span class="p">[</span><span class="n">C</span><span class="p">.</span><span class="n">body</span><span class="p">[</span><span class="n">C</span><span class="p">.</span><span class="n">tail</span><span class="p">]]</span> <span class="o">=</span> <span class="n">EMPTY</span><span class="p">)</span> <span class="o">?</span> <span class="nl">BODY</span> <span class="p">:</span> <span class="n">C</span><span class="p">.</span><span class="n">body</span><span class="p">[</span><span class="n">C</span><span class="p">.</span><span class="n">tail</span><span class="p">]),</span> <span class="n">C</span><span class="p">.</span><span class="n">tail</span> <span class="o">=</span> <span class="n">INC</span><span class="p">(</span><span class="n">C</span><span class="p">.</span><span class="n">tail</span><span class="p">);</span>
			<span class="k">else</span> <span class="n">C</span><span class="p">.</span><span class="n">len</span> <span class="o">=</span> <span class="o">-</span><span class="n">C</span><span class="p">.</span><span class="n">len</span><span class="p">;</span>
			<span class="k">break</span><span class="p">;</span>
		<span class="k">case</span> <span class="nl">WALL</span><span class="p">:</span><span class="k">case</span> <span class="nl">BODY</span><span class="p">:</span>
			<span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span><span class="c1">//dead
</span><span class="c1"></span>		<span class="p">}</span>
	<span class="p">}</span>
<span class="p">}</span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
	<span class="k">while</span> <span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">initConsole</span><span class="p">(</span><span class="mi">25</span><span class="p">,</span> <span class="mi">10</span><span class="p">);</span>
		<span class="n">printf</span><span class="p">(</span><span class="s">"</span><span class="se">\n\t</span><span class="s">C语言贪吃蛇</span><span class="se">\n\n</span><span class="s">    1. 开始游戏</span><span class="se">\n</span><span class="s">    2. 关于</span><span class="se">\n</span><span class="s">    q. 退出</span><span class="se">\n</span><span class="s">%"</span><span class="p">);</span>
		<span class="k">switch</span> <span class="p">(</span><span class="n">_getch</span><span class="p">())</span> <span class="p">{</span>
		<span class="k">case</span> <span class="sc">'q'</span><span class="o">:</span><span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
		<span class="k">case</span> <span class="sc">'2'</span><span class="o">:</span><span class="n">MessageBoxA</span><span class="p">(</span><span class="n">GetConsoleWindow</span><span class="p">(),</span> <span class="s">"100行代码？"</span><span class="p">,</span> <span class="s">"有病吧你？"</span><span class="p">,</span> <span class="n">MB_OK</span><span class="o">|</span><span class="n">MB_ICONASTERISK</span><span class="p">);</span> <span class="k">continue</span><span class="p">;</span>
		<span class="k">case</span> <span class="sc">'1'</span><span class="o">:</span><span class="n">Run</span><span class="p">(</span><span class="n">init</span><span class="p">());</span>
			<span class="n">MessageBoxA</span><span class="p">(</span><span class="n">GetConsoleWindow</span><span class="p">(),</span> <span class="s">"你死了。有病去看看吧"</span><span class="p">,</span> <span class="s">"SHIT"</span><span class="p">,</span> <span class="n">MB_OK</span> <span class="o">|</span> <span class="n">MB_ICONERROR</span><span class="p">);</span>
		<span class="p">}</span>
	<span class="p">}</span>
<span class="p">}</span></code></pre>
 </div>
 <p class="ztext-empty-paragraph"><br></p>
 <p data-pid="-0qS8tnv">觉得还行就thumbup，写代码也不容易</p>
</body>
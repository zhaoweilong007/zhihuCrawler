# 为什么安卓的手机越用越慢，刷机也不行，是 CPU 老化吗？
- 点赞数：7516
- 更新时间：2021年10月06日18时49分16秒
- 回答url：https://www.zhihu.com/question/57283723/answer/265841305
<body>
 <p data-pid="VZT-LkOY">谢邀。手机越用越慢并不是CPU老化了，也并不一定是垃圾app安装多了。</p>
 <p data-pid="VtfyjCvJ">也许你和我有一样的感受，手机刚买时运行还比较流畅，可是过了一段时间（大概一两年）却越用却卡。这在很多中低端手机尤其明显。你也许会怀疑是不是垃圾应用安装多了，可你会发现很多时候甚至<b>重刷系统都不能解决问题</b>，还是难以回复初始的畅快感。这是不是手机厂商的阴谋，逼迫我们升级手机呢？还是CPU老化了，运行速度越来越慢了呢？</p>
 <p data-pid="EmDpyEip">其实CPU并不会因为老化而变慢，我在这篇专栏文章中有详细解释：</p><a data-draft-node="block" data-draft-type="link-card" href="https://zhuanlan.zhihu.com/p/31572908" data-size="small" data-image="https://pic1.zhimg.com/v2-1fa0676f4534426182dd8f8ff6b18524_720w.jpg" data-entity-type="article" class="internal">CPU能用多久？会不会因为老化而变慢？</a>
 <p data-pid="S00Xb7GS">简单来说就是CPU的速度是恒定的，都是一个基频乘以一个比例(Ratio)出来的。基频现在Intel CPU一般是100MHz，我们用的3G CPU，Ratio就是30，下来刚好3GHz。ARM的也类似。而基频和Ratio在整个生命期是不变的，从而CPU运算速度是不变的。手机里面其他的子系统也类似。</p>
 <p data-pid="36cm2luU">其实这除了和我们安装的应用软件越来越多，而国产app经常不请自来在后台偷偷运行有关外。重刷系统都不能解决速度问题和手机的存储介质——闪存关系很大。</p>
 <h2><b>写放大（Write Amplification）</b></h2>
 <p data-pid="mR_1xia-">我在专栏文章介绍FTL</p><a data-draft-node="block" data-draft-type="link-card" href="https://zhuanlan.zhihu.com/p/26944064" data-size="small" data-image="https://pic3.zhimg.com/v2-bb59ebbc16cf1ae15d4a7f4ff54dbba2_720w.jpg" data-entity-type="article" class="internal">杂谈闪存三：FTL</a>
 <p data-pid="4jDJr1Xk">时，介绍了闪存的存储特性。我们知道了闪存写入是以page为单位，而擦除是以block为单位，在写之前必须擦除。我们也知道了为了延长闪存的生命周期和寿命均衡（Wear Levelling），FTL用LBA/PBA表来映射逻辑和物理操作单位，而一般的消费级SSD和闪存系统有至少7%的空闲块——OP(Over Provisioning)。OP空间就是闪存主控保留的自有空间，用来负责负载均衡和防止写放大。一个形象的例子就像我们玩数字华容道：</p>
 <figure data-size="normal">
  <img src="https://picx.zhimg.com/50/v2-9f666fd39ed9612b4d5c83e9772850df_720w.jpg?source=1940ef5c" data-rawwidth="640" data-rawheight="639" data-size="normal" data-caption="" data-original-token="v2-9f666fd39ed9612b4d5c83e9772850df" class="origin_image zh-lightbox-thumb" width="640" data-original="https://picx.zhimg.com/v2-9f666fd39ed9612b4d5c83e9772850df_r.jpg?source=1940ef5c">
 </figure>
 <p data-pid="euKhub_c">我们要把方块1挪到右下角，一定好充分利用唯一的空格位置，将它移来移去，十分的困难。我们想象一下，如果在最下面忽然多出一整排空闲位置，这样相信就是小学生也可以轻松完成这个简单版华容道，而不需要很多步骤。我们的OP就是这个空闲块，多了后就会显著减少挪动的步数，而步数就可以看作写放大，对闪存寿命和速度有显著影响。</p>
 <p data-pid="fn7Yy1a8">因为这个原因，所以SSD和手机厂商必定会空出部分空间来给OP，一般至少7%。高端的SSD和手机的OP空间能够达到20%到30%以上。OP的大小对性能影响很大，我们今天来看看OP和写放大对flash性能的影响。</p>
 <p data-pid="dh04lNdd">我们假设要写入一个4KB的数据，可是一个块里已经没有干净空间了，但是有失效的数据可以擦除，所以主控就把所有的数据搬到缓存或者OP空间，然后擦除块，再加上这个4KB新数据写回去，这个操作就造成了写入放大，即本来是写4K的数据，却造成了整个块（512KB）的写入操作，也就是128倍放大。当然我们前文提到LBA/PBA并不是简单的block，而垃圾收集和Trim对写放大都有所减缓。但随着闪存空闲空间越来越少，主控的腾挪空间也越来越少。IBM Zurich Research Laboratory做的研究证明写放大和空闲净块关系极大，如下图：</p>
 <figure data-size="normal">
  <img src="https://picx.zhimg.com/50/v2-787711fc7c0f537fb429d513f0cefb2c_720w.jpg?source=1940ef5c" data-rawwidth="488" data-rawheight="428" data-size="normal" data-caption="" data-original-token="v2-787711fc7c0f537fb429d513f0cefb2c" class="origin_image zh-lightbox-thumb" width="488" data-original="https://pica.zhimg.com/v2-787711fc7c0f537fb429d513f0cefb2c_r.jpg?source=1940ef5c">
 </figure>
 <p class="ztext-empty-paragraph"><br></p>
 <p data-pid="9Hb61sXX">可以看出，<b>在空闲块少后，写放大可以达到3到4倍。</b></p>
 <p data-pid="ADJ06UNi"><b>我们新买的SSD和手机，空空如也的数据块让写性能达到最大，而随着程序和数据越来越多，写入性能也逐渐下降</b>。那究竟空闲块少到多少才会性能下降，降到什么程度呢？</p>
 <h2><b>数据</b></h2>
 <p data-pid="-hH2W5tD">根据Anandtech做的实验数据，我们la如下图：</p>
 <figure data-size="normal">
  <img src="https://pica.zhimg.com/50/v2-05f97e3264c73b5dd6f11565c8815b9b_720w.jpg?source=1940ef5c" data-rawwidth="640" data-rawheight="452" data-size="normal" data-caption="" data-original-token="v2-05f97e3264c73b5dd6f11565c8815b9b" class="origin_image zh-lightbox-thumb" width="640" data-original="https://pic1.zhimg.com/v2-05f97e3264c73b5dd6f11565c8815b9b_r.jpg?source=1940ef5c">
 </figure>
 <p class="ztext-empty-paragraph"><br></p>
 <p data-pid="zT9WUUhS">横轴是时间，纵轴是写入IOPS。随着时间写入越来越多的随机4KB数据，开始100000的IOPS在某时刻剧烈下降，最后随着空闲干净块慢慢减少，稳定到了10000IOPS，效能下降到原来的10%！</p>
 <p data-pid="JCWLnhgN">当然最终用户使用情况没有这么恶劣，但数据说明写放大对效能的影响巨大。这也是为什么高端企业级SSD的op空间巨大的原因，Intel的SSD DC3700的op空间达到32%，这让它有了巨大的腾挪空间，它的曲线异常平滑：</p>
 <figure data-size="normal">
  <img src="https://pic1.zhimg.com/50/v2-d3569a309bd15c502b74e069da93bdfd_720w.jpg?source=1940ef5c" data-rawwidth="631" data-rawheight="435" data-size="normal" data-caption="" data-original-token="v2-d3569a309bd15c502b74e069da93bdfd" class="origin_image zh-lightbox-thumb" width="631" data-original="https://pic1.zhimg.com/v2-d3569a309bd15c502b74e069da93bdfd_r.jpg?source=1940ef5c">
 </figure>
 <p class="ztext-empty-paragraph"><br></p>
 <p data-pid="3jyYBtZx">这对服务器市场非常重要。</p>
 <h2><b>结论</b></h2>
 <p data-pid="G5CGho3R">数据表明，我们对手机存储空间或SSD使用大于75%后，写入性能就会因为写放大而大大下降。中低端手机Flash空间本来就小，OP又小，很容易造成写放大，大大减低了Flash的寿命。而寿命降低，会出现更多坏块，反过来又加剧写放大，形成恶性循环。速度会越来越慢，这个靠重刷系统是不能解决问题的。</p>
 <p data-pid="q6f04LLm">现在你是不是要考虑买个大容量的手机了？iPhone手机为了提升用户体验，op留的很大，所以快满了后差距并不是很厉害，可以类比Intel那款SSD。</p><a data-draft-node="block" data-draft-type="mcn-link-card" data-mcn-id="1429148033481617408"></a>
 <p class="ztext-empty-paragraph"><br></p><a data-draft-node="block" data-draft-type="mcn-link-card" data-mcn-id="1429147913662042112"></a>
 <h2><b>后记</b></h2>
 <p data-pid="lj-4V0mD">有很多朋友留言问解决办法，这里简单说一下，稍后会写一篇专栏文章详细介绍步骤和手机Flash与SSD的使用注意事项。</p>
 <ol>
  <li data-pid="f9cCisDh">首先必须保证手机剩余存贮空间在25%以上。至于如何做到，就是删删删呗。</li>
  <li data-pid="JxVlq-uL">删除流氓软件、自启动软件。必要时分别设置app权限。</li>
  <li data-pid="KUqgfqqB">未有改善就只有重刷系统了。注意保留有价值的信息，如通讯录、照片等等。</li>
  <li data-pid="1aLCsO4E">重刷系统，一般都会有改善。Trim在Android 4.3的手机上自动会打开，无需操作。</li>
  <li data-pid="ldgHqsIw">重刷系统还未改善，如果是Android 4.3的系统，很有可能就是坏块太多了，你会发现可用空间变少了很多。有些软件可以重置FTL表，但有风险。建议凑合用或者购买新机，毕竟现在低端手机可以看作快消品了。</li>
  <li data-pid="9gmoie6z">坏块不会死而复生，坏了就是坏了，节哀顺变吧。至于坏了的原因见我下面的系列文章。</li>
 </ol>
 <p data-pid="KMPdNq_h">日常使用时注意不要把存贮空间使用到高于75%，会加速写放大，加速坏块的产生。</p>
 <p data-pid="jaJV2dWE"><b>BIOS培训云课堂</b>：</p><a data-draft-node="block" data-draft-type="link-card" href="https://link.zhihu.com/?target=https%3A//cloudclass.zqtong.com/hall" class=" wrap external" target="_blank" rel="nofollow noreferrer">卓易云课堂</a>
 <p data-pid="2nsqOLh6">本文出自我的专栏 <a href="https://zhuanlan.zhihu.com/UEFIBlog" class="internal">UEFI和BIOS探秘</a></p><a data-draft-node="block" data-draft-type="link-card" href="https://zhuanlan.zhihu.com/p/27294558" data-size="small" data-image="https://pic4.zhimg.com/v2-202222bd4cc296bfca2764ac76830fa3_720w.jpg" data-entity-type="article" class="internal">杂说闪存番外：手机为什么越用越卡和闪存写放大</a>
 <p data-pid="DKMr1ceW"><b>其他闪存相关文章：</b></p><a data-draft-node="block" data-draft-type="link-card" href="https://zhuanlan.zhihu.com/p/34889064" data-size="small" data-image="https://pic3.zhimg.com/v2-cf348b4d7fdc36f5ec5ddc2ec2ad48c2_720w.jpg" data-entity-type="article" class="internal">神秘消失的固态硬盘空间去哪了？</a><a data-draft-node="block" data-draft-type="link-card" href="https://zhuanlan.zhihu.com/p/26652622" data-size="small" data-image="https://pic1.zhimg.com/v2-86ba820be082386fa2e0228dff3f7ac8_720w.jpg" data-entity-type="article" class="internal">杂说闪存一：关公战秦琼之 UFS VS NVMe</a><a data-draft-node="block" data-draft-type="link-card" href="https://zhuanlan.zhihu.com/p/26745577" data-size="small" data-image="https://pic3.zhimg.com/v2-cf0e0c86c4e0ba9943f09ab5efaffd22_720w.jpg" data-entity-type="article" class="internal">杂谈闪存二：NOR和NAND Flash</a><a data-draft-node="block" data-draft-type="link-card" href="https://zhuanlan.zhihu.com/p/26944064" data-size="small" data-image="https://pic3.zhimg.com/v2-bb59ebbc16cf1ae15d4a7f4ff54dbba2_720w.jpg" data-entity-type="article" class="internal">杂谈闪存三：FTL</a><a data-draft-node="block" data-draft-type="link-card" href="https://zhuanlan.zhihu.com/p/27068849" data-size="small" data-image="https://pic2.zhimg.com/v2-b7a111eceeab09238b58a21939814c99_720w.jpg" data-entity-type="article" class="internal">杂说闪存四：闪存硬盘接口大比拼</a><a data-draft-node="block" data-draft-type="link-card" href="https://zhuanlan.zhihu.com/p/27328255" data-size="small" data-image="https://pic4.zhimg.com/v2-acb97d62026a276086afb96949702737_720w.jpg" data-entity-type="article" class="internal">杂说闪存番外：SSD硬盘如何进行日常维护和Trim</a><a data-draft-node="block" data-draft-type="link-card" href="https://zhuanlan.zhihu.com/p/27343166" data-size="small" data-image="https://pic3.zhimg.com/v2-5adec7838cd96e0e589a575d27d35462_720w.jpg" data-entity-type="article" class="internal">杂说闪存番外：傲腾Optane与NAND闪存</a><a data-draft-node="block" data-draft-type="link-card" href="https://zhuanlan.zhihu.com/p/27380955" data-size="small" data-image="https://pic4.zhimg.com/v2-5b84f334b17dbcd889c497247ee8e053_720w.jpg" data-entity-type="article" class="internal">杂说闪存番外：我们的数据存在固态硬盘上安全吗？</a><a data-draft-node="block" data-draft-type="link-card" href="https://zhuanlan.zhihu.com/p/27294558" data-size="small" data-image="https://pic4.zhimg.com/v2-202222bd4cc296bfca2764ac76830fa3_720w.jpg" data-entity-type="article" class="internal">杂说闪存番外：手机为什么越用越卡和闪存写放大</a><a data-draft-node="block" data-draft-type="link-card" href="https://zhuanlan.zhihu.com/p/34858149" data-size="small" data-image="https://pic2.zhimg.com/v2-297b9a247cdcfebd054c2f4c9b35b101_720w.jpg" data-entity-type="article" class="internal">128G的固态硬盘为什么有的标120G，有的标100G？固态硬盘容量背后的秘密</a>
 <p data-pid="Kjp_wkkO"><b>硬盘相关文章：</b></p><a data-draft-node="block" data-draft-type="link-card" href="https://zhuanlan.zhihu.com/p/32907254" data-size="small" data-image="https://pic4.zhimg.com/v2-78cc3d5138abf240a53cbc8465097527_720w.jpg" data-entity-type="article" class="internal">硬盘忽然掉电会损坏硬盘和数据吗？</a><a data-draft-node="block" data-draft-type="link-card" href="https://zhuanlan.zhihu.com/p/32915834" data-size="small" data-image="https://pic3.zhimg.com/v2-8116d4583d34f5c2344b3fcc3c1b8106_720w.jpg" data-entity-type="article" class="internal">机械硬盘里面是真空吗？</a>
 <p data-pid="VsrhXlat">欢迎大家关注UEFI专栏和用微信扫描下方二维码加入微信公众号"UEFIBlog"，在那里有最新的文章。</p>
 <figure data-size="normal">
  <img src="https://picx.zhimg.com/50/v2-91d380fba0955ebce85e5bf264d63cf6_720w.jpg?source=1940ef5c" data-rawwidth="720" data-rawheight="720" data-size="normal" data-original-token="v2-cb49334d7e1535bba9a2ba6b5c049074" data-default-watermark-src="https://pic1.zhimg.com/50/v2-c8aec687742720c7d545c91dc7f24fa8_720w.jpg?source=1940ef5c" class="origin_image zh-lightbox-thumb" width="720" data-original="https://picx.zhimg.com/v2-91d380fba0955ebce85e5bf264d63cf6_r.jpg?source=1940ef5c">
 </figure>
 <p class="ztext-empty-paragraph"><br></p>
 <p></p>
</body>
# 为什么祖传代码被称为「屎山」？
- 点赞数：14486
- 更新时间：2022年11月04日09时33分52秒
- 回答url：https://www.zhihu.com/question/272065178/answer/1575955314
<body>
 <p data-pid="uMBTOZhr">有一天，有几条虫子，干扰了老板赚钱，老板希望你能抓住它们。</p>
 <p data-pid="S_LDdjAH">你带着年轻的锐气，青春的活力，学艺多年积累的程序设计艺术，打开了公司的代码仓库。</p>
 <p data-pid="qkkExhrp">远看，似乎一个运转的机器，巨大的代码堆积在一起形成了大致的轮廓，蠕动着前进。</p>
 <p data-pid="ef5hECV-">凑近了一看，在不净的框架中，乱码般的语句在运转，像生了麻风病的蛞蝓一样在喷吐，粘稠的水在流动，而穿着格子衫的人群则在焰柱旁围成了一个半圆，这就是码农的仪式。他们环绕着那不可名状植物，不断的伸手进去拨弄，又不断的掏出一些东西填上去，使他堆的更高，为了防止倒塌，又掏出黏糊糊的糊糊，用力的涂抹，试图把它们黏在一起。</p>
 <p data-pid="f7gUdiiG">这是一个前人留下的屎堆起来的一个克苏鲁缝合怪，看起来摇摇欲坠，有无数的虫子爬来爬去。但勉强堆起了山一样的形体，蠕动着为老板赚钱。</p>
 <figure data-size="normal">
  <img src="https://pica.zhimg.com/50/v2-4f09b7ea3ed3f5d5143517e6f45fd972_720w.jpg?source=1940ef5c" data-caption="" data-size="normal" data-rawwidth="553" data-rawheight="529" data-original-token="v2-63d35e12100b0a9f491005a3824dfad9" data-default-watermark-src="https://picx.zhimg.com/50/v2-9600eecc71820204cae4c8e4ed74caa5_720w.jpg?source=1940ef5c" class="origin_image zh-lightbox-thumb" width="553" data-original="https://picx.zhimg.com/v2-4f09b7ea3ed3f5d5143517e6f45fd972_r.jpg?source=1940ef5c">
 </figure>
 <p data-pid="Xg6iCT4S">你满心热血，要对这座山进行清理，使它成为一个鲁棒的钢铁巨兽，可以随时更换最新的部件，奔腾如飞，坚固异常，带着兄弟们走向人生巅峰。</p>
 <p data-pid="fHJOkXds">你经过缜密的分析，顺着虫子留下的痕迹，终于找到了问题的源头，发现一坨很多年前某码农因为时代局限或者水平有限拉的陈年旧屎，你觉得只要对它改良一下，梳理清楚结构，加强判断与容错，就可以变化成一个钢铁部件，让这坨怪物离巨兽更近一步。</p>
 <p data-pid="aASiwrck">你用力的挖掘其中的信息，却发现，事情没有那么简单，这一坨实际上不是孤立的一坨，而是和整个山体融合在一起。或者说，这座山实际上是一坨坨粘稠滑腻的克苏鲁，通过无数的触角和粘液连接在了一起，这些克苏鲁伸出无数的触角，伸进这座山体中未知的角落。</p>
 <p data-pid="bWnLJXC3">有看起来结构相同，但是出现了几十上百次的重复逻辑。有无数道不知道伸向何处的判断分支。有七零八落到处都是又无法解释的神秘数字。有从表面直接伸向最底层的神秘调用。还有猜不出，看不懂，无法预计什么时候会触发，什么时候会爆发的无数定时器。还有无数神秘的线程在独立的挂在那里，猜不出哪个什么时候会忽然启动，什么时候会忽然挂起，什么时候会忽然互相抢资源而死锁，哪些资源会莫名其妙的被改动。神秘的链接，神秘的任务队列，神秘的池，神秘的环形缓存，神秘的堆栈。</p>
 <p data-pid="2bqGmgRG">他们<b>耦合</b>在一起，互相支撑，构成了一坨更大的克苏鲁屎怪，缓慢的蠕动。</p>
 <p data-pid="98IADLs3">你极其困难的清理和修改了其中的一点点内容，让这一点点的内容脱离出耦合态，看起来清晰一点。结果，忽然屎山对面十万八千行外，你永远意想不到的一块功能，忽然挂了。一个你完全在工作上没接触过的同事，通过他的盘查，发现是他维护的一个函数/方法、类、线程、内存块，池，和你改动的部分是深度耦合的，你的解耦导致了难以理解的错误使他们的部分产生了错误。于是你被骂了，你只能再退一步，在一个更小的范围内进行调整，但是发现，虫子不止是由这一块构成的，于是你追踪者虫子的足迹，去改良一个一个的模块。</p>
 <p data-pid="J0xICmMq">在经历了一轮又一轮的批评，几乎结识了全公司所有模块的负责人之后，你终于抓住了一条虫子。但是在这个漫长的过程中，你早已忘却初心。在无数次的赶工加班熬夜的迷糊中，被同事老板挨骂后的愤懑中，表白失败/和女朋友吵架/发现自己头顶有点绿的低落中；无数次当做临时代码写下，计划单元测试完成后就重写却忘记的过程中，因为偷懒或者不舍得打断思路而而懒得抽出轮子而产生的超大代码块中。</p>
 <p data-pid="WdU6Y8UE">留下了无数看起来结构相同，但是出现了几十上百次的重复逻辑。无数道不知道伸向何处的判断分支。大量的无法解释的神秘数字。从表面直接伸向最底层的神秘调用。猜不出，看不懂，无法预计什么时候会触发，什么时候会爆发的无数定时器。无数猜不出哪个什么时候会忽然启动，什么时候会忽然挂起，什么时候会忽然互相抢资源而死锁，莫名其妙改动资源的神秘线程。神秘的链接，神秘的任务队列，神秘的池，神秘的环形缓存，神秘的堆栈。</p>
 <p data-pid="t7L0rcXS">你要抓的哪条虫子确实抓出来了。然而，在你没看到的地方，随着运转，更多的新的虫子正在茁壮的成长。</p>
 <p data-pid="pTd2kjj3">这时，你突然发现你的脚抽不出来了，几条触手顺着你的腿向上攀延，你的手被深深地吸入泥沼一样的屎山，你使尽全力想要抽出胳膊，但越是挣扎，陷得越深，仿佛屎山中心有一个冰冷的黑洞，要将所有接近的物体吞噬殆尽。你的精气在一点点流失，一种极度的疲惫，但是又释然的感觉涌了上来。此刻，你觉得舒适又满足，渐渐地闭上了双眼，你甘愿奉献头发与生命，将自己化作一块补丁，维系着系统的苟延残喘。它再也没法离开你了，你和你的头发，成了它的一部分。</p>
 <p data-pid="AivCdop5">不知道过了多久。终于又有一条虫子在运行中暴露，干扰了老板赚钱。</p>
 <p data-pid="lhxAMD09">老板又安排了一个年轻人来抓住这条虫子。这个年轻人带着锐气，青春和活力来到这座山前。</p>
 <p data-pid="lRmVMdmD">看到这摇摇欲坠的克苏鲁大山，不仅倒吸一口冷气。</p>
 <p data-pid="AUAnvd0n">“oh shit ! shit mountain !”</p>
</body>
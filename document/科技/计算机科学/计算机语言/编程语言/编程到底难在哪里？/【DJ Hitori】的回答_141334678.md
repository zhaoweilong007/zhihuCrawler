# 编程到底难在哪里？
- 点赞数：108297
- 更新时间：2022年02月16日14时45分35秒
- 回答url：https://www.zhihu.com/question/22508677/answer/141334678
<body>
 <p data-pid="oxd1XN4N">普通人：</p>
 <p data-pid="8m1pcGuY">我今天要买一斤苹果。</p>
 <p class="ztext-empty-paragraph"><br></p>
 <p class="ztext-empty-paragraph"><br></p>
 <p data-pid="ghXk1CUT">程序员：</p>
 <p data-pid="7yXdljbk">我今天要买一斤苹果。</p>
 <p data-pid="awnzt86o">因为我只喜欢红富士苹果，所以我只买红富士苹果。</p>
 <p data-pid="laA3yj7J">我能接受的最高价格是10元/斤。</p>
 <p data-pid="HyTi6tZG">正常情况下一斤苹果用一个袋子能装下，但是为防万一，我会带两个袋子。</p>
 <p data-pid="LnSoxyS5">我知道附近的3家水果店，所以我会依次访问这3家水果店。</p>
 <p data-pid="Dc5HFF5b">根据上述条件，我设计出以下的买苹果的流程：</p>
 <div class="highlight">
  <pre><code class="language-text">买苹果流程开始
    对水果店0、水果店1、水果店2依次执行：
    拜访一家水果店流程开始
        走到此水果店
        如果此水果店没有开门，则结束当前的“拜访一家水果店流程”
        如果此水果店没有苹果，则结束当前的“拜访一家水果店流程”
        如果此水果店的苹果当中没有红富士苹果，则结束当前的“拜访一家水果店流程”
        如果此水果店的红富士苹果剩余不到一斤，则结束当前的“拜访一家水果店流程”
        如果此水果店的红富士苹果的价格高于10元/斤，则执行3次：
        讲价流程开始
            询问店主是否愿意将价格降到10元/斤或更低
            如果店主愿意，则跳过剩余的“讲价流程”
        讲价流程结束
        如果此水果店的红富士苹果的价格仍然高于10元/斤，则结束当前的“拜访一家水果店流程”
        打开一个袋子，将其作为当前的袋子
        重复执行以下流程，直到总重量大于一斤：
        装袋一个苹果流程开始
            从所有的不在袋子中的红富士苹果中选出最好的一个
            如果此苹果能装入当前的袋子，则将此苹果装入当前的袋子，否则执行：
            换袋子流程开始
                如果我有剩余的袋子，则从中任意选出一个并作为当前的袋子，否则执行：
                向店主要袋子流程开始
                    向店主索要一个袋子
                    如果店主拒绝给我袋子，则将我的所有袋子里的所有苹果取出，然后结束当前的“拜访一家水果店流程”
                    将店主给我的袋子作为当前的袋子
                向店主要袋子流程结束
            换袋子流程结束
            测量我的所有袋子里的所有苹果的总重量
        装袋一个苹果流程结束
        根据我的所有袋子里的所有苹果的总重量和店主给出的价格，计算我应付的价格
        向店主询问我应付的价格
        如果我不接受店主索要的价格，则执行3次：
        校对流程开始
            向店主解释我计算出的价格，并询问其是否同意
            如果店主同意，则跳过剩余的“校对流程”
        校对流程结束
        如果我仍然不接受店主索要的价格，则将我的所有袋子里的所有苹果取出，然后结束当前的“拜访一家水果店流程”
        如果我没带钱，则将我的所有袋子里的所有苹果取出，然后结束当前的“拜访一家水果店流程”
        付钱拿走苹果
        跳过剩余的“拜访一家水果店流程”
    拜访一家水果店流程结束
买苹果流程结束</code></pre>
 </div>
 <p data-pid="mH7a5oy1">这个流程怎么样？我来设计一些测试样例，测试一下这个流程。</p>
 <p data-pid="qUKKlq7f">测试发现一个问题：如果水果店0和水果店1都有红富士苹果并且价格都低于10元/斤，而且水果店1的价格比水果店0更低，那么我希望买水果店1的苹果，但我设计的流程会让我买水果店0的苹果。</p>
 <p data-pid="mz9XsQNu">为了解决这个问题，我应该先询问所有水果店的价格，然后去价格最低的那一家买苹果。</p>
 <p data-pid="brn0KQeR">经过修改，我重新设计出以下的买苹果的流程：</p>
 <div class="highlight">
  <pre><code class="language-text">买苹果流程开始
    对水果店0、水果店1、水果店2依次执行：
    询问一家水果店的红富士价格流程开始
        走到此水果店
        如果此水果店没有开门，则视此水果店的红富士价格为无穷大元/斤，并结束当前的“询问一家水果店的红富士价格流程”
        如果此水果店没有苹果，则视此水果店的红富士价格为无穷大元/斤，并结束当前的“询问一家水果店的红富士价格流程”
        如果此水果店的苹果当中没有红富士苹果，则视此水果店的红富士价格为无穷大元/斤，并结束当前的“询问一家水果店的红富士价格流程”
        如果此水果店的红富士苹果剩余不到一斤，则视此水果店的红富士价格为无穷大元/斤，并结束当前的“询问一家水果店的红富士价格流程”
        向店主询问此水果店的红富士苹果价格并记录
    询问一家水果店的红富士价格流程结束
    从3家水果店中选出红富士价格最低的一家（如果有并列则随机选择），将其作为目标水果店
    如果目标水果店的红富士苹果价格为无穷大元/斤，则结束当前的“买苹果流程”
    走到目标水果店
    如果此水果店的红富士苹果的价格高于10元/斤，则执行3次：
    讲价流程开始
        询问店主是否愿意将价格降到10元/斤或更低
        如果店主愿意，则跳过剩余的“讲价流程”
    讲价流程结束
    如果此水果店的红富士苹果的价格仍然高于10元/斤，则结束当前的“买苹果流程”
    打开一个袋子，将其作为当前的袋子
    重复执行以下流程，直到总重量大于一斤：
    装袋一个苹果流程开始
        从所有的不在袋子中的红富士苹果中选出最好的一个
        如果此苹果能装入当前的袋子，则将此苹果装入当前的袋子，否则执行：
        换袋子流程开始
            如果我有剩余的袋子，则从中任意选出一个并作为当前的袋子，否则执行：
            向店主要袋子流程开始
                向店主索要一个袋子
                如果店主拒绝给我袋子，则将我的所有袋子里的所有苹果取出，然后结束当前的“买苹果流程”
                将店主给我的袋子作为当前的袋子
            向店主要袋子流程结束
        换袋子流程结束
        测量我的所有袋子里的所有苹果的总重量
    装袋一个苹果流程结束
    根据我的所有袋子里的所有苹果的总重量和店主给出的价格，计算我应付的价格
    向店主询问我应付的价格
    如果我不接受店主索要的价格，则执行3次：
    校对流程开始
        向店主解释我计算出的价格，并询问其是否同意
        如果店主同意，则跳过剩余的“校对流程”
    校对流程结束
    如果我仍然不接受店主索要的价格，则将我的所有袋子里的所有苹果取出，然后结束当前的“买苹果流程”
    如果我没带钱，则将我的所有袋子里的所有苹果取出，然后结束当前的“买苹果流程”
    付钱拿走苹果
买苹果流程结束</code></pre>
 </div>
 <p data-pid="L8TblyOd">现在这个流程是不是完美了呢？不是，我还能发现很多问题。<br>
  如果3家水果店都有红富士苹果但都不到一斤，但是三家店加起来能达到一斤，那么我不应该结束流程回家，而是应该把三家店的红富士苹果都买下来。<br>
  如果我向水果店询问价格的时候这家店还有红富士苹果，但我询问完所有水果店的价格后这家店的红富士苹果卖完了，那么我的流程会让我试图处理不存在的红富士苹果。<br>
  我走路的过程中可能会遇到突发事件，比如发现了新的水果店，比如袋子破掉了苹果掉一地，对于这些情况我的流程都无法进行处理。</p>
 <p data-pid="2vwFBabE">啊问题太多了我懒得再改流程了。我还是去X宝买吧。<br>
  那么接下来我要设计一个在X宝买红富士苹果的流程……</p>
 <p data-pid="7frbe3jV">==========================================================</p>
 <p data-pid="Kyey7FTO">这篇沉寂了5天只得到1个赞的回答竟然一夜之间收获2000+赞，一举成为个人最多赞的回答。感谢大家的支持，以及精彩的评论。</p>
 <p data-pid="ENwMxpR4">这篇回答并不是讲述在生活中程序员如何买苹果，而是以买苹果为例说明程序员如何解决问题。程序员需要对问题进行透彻的分析，理清其涉及的所有细节，预测可能发生的所有意外与非意外的情况，列出解决方案的所有步骤，以及对解决方案进行尽量全面的测试。</p>
 <p data-pid="7fXYIRuB">而这些正是我认为编程难的地方。任何一点遗漏都会成为bug，轻则导致挨骂，重则导致经济损失甚至危害安全。</p>
 <p data-pid="gkiLylyz">注意这些难点全部和语言无关。和编程所需要的绝对严密的逻辑相比，语言实在是太简单了。（某些自带代码混淆效果的语言除外）</p>
 <p data-pid="jrR6U-IQ">==========================================================</p>
 <p data-pid="BuS5cctx">我勒个去4000+赞了！妈妈！我火了！</p>
 <p data-pid="O-tWyZb5">好多评论说这代码像python。然而我根本不会讲python。</p>
 <p data-pid="FsjsEiXY">==========================================================</p>
 <p data-pid="e3OEpgiK">本回答可以随意转载，只需附带原文链接即可。</p>
 <p data-pid="aUYEhunn">==========================================================</p>
 <p data-pid="gcsSLeD5">好不容易写了篇高赞回答，不打个广告是不是有点浪费？</p>
 <p data-pid="jVCMnLYw">求偶。本人男，爱好女，27（划掉）28岁，Google员工，现居湾区。要求对方同样现居湾区并有稳定身份（不符合者抱歉勿扰）。有意者请私信。（注：<b>已失效</b>）</p>
 <p data-pid="JEf4u6S0">更新（5/30/2021）：</p>
 <p data-pid="1t5MpCID">这篇4年前的老回答竟然又火了一波，我已经不理解互联网是如何运作的了。</p>
 <p data-pid="B2sqfEB7">上述广告仍然有效。我是一名会及时更新文档的程序员，如果哪天脱团了会回来更新这条广告的。湾区是指美国加州的湾区；稳定身份是指可以在美国长期生活（例如持有绿卡或者在申请绿卡）。</p>
 <p data-pid="04IQ8vAV">广告是2020年加上的，所以并不是说我4年一来一直单身，不过现在确实是。</p>
 <p data-pid="3dZCkwXE">==========================================================</p>
 <p data-pid="NYRw52FC">更新（2/15/2022）：</p>
 <p data-pid="9rpBdV8k">上述广告已失效！我脱单了！</p>
 <p data-pid="Atq_0Qdn">加一套免费推广：Coffee Meets Bagel，为寻找serious relationship的人而设计的约会平台。</p>
</body>
# 为什么中国出了这么多厉害的互联网公司，但没有自己设计过编程语言？
- 点赞数：6118
- 更新时间：2022年08月26日10时58分07秒
- 回答url：https://www.zhihu.com/question/359906573/answer/1709942996
<body>
 <p data-pid="BbJD-k9Y">==========================================<br>
  2022/08/26 更新<br><br>
  ReScript的第一个社区驱动的版本正式发布了 <a href="https://link.zhihu.com/?target=https%3A//rescript-lang.org/blog/release-10-0-0" class=" wrap external" target="_blank" rel="nofollow noreferrer">ReScript 10.0 | ReScript Blog (rescript-lang.org)</a></p>
 <p data-pid="-rTlPr7J">这标志着这门语言的成熟，不再依赖于个人或者公司而独立存在，可以自豪的说ReScript是第一个走出国门并被世界所接受的通用编程语言，它的开发大部分时间是我在深圳和纽约完成的。<br><br>
  接下来的时间，除了继续领导ReScript社区的发展，我也会做一些基础教育，为中国的基础软件发展贡献自己的绵薄之力。预计十月份国庆长假以后，会结合这些年来的心得与体会，开展一门编程语言设计与实现的公开课，敬请关注！<br><br>
  ==========================================<br>
  ReScript 官网可以在国内正常访问了(<a href="https://link.zhihu.com/?target=http%3A//rescript-lang.org" class=" external" target="_blank" rel="nofollow noreferrer"><span class="invisible">http://</span><span class="visible">rescript-lang.org</span><span class="invisible"></span></a>)</p>
 <p data-pid="H_NZYNeT">这也侧面说明了话语权的重要性：网站是由社区志愿者搭建的，之前因为某些原因不能访问，但是在我表达了需要VPN很不方便的事实之后，最终我们保障了国内程序员的正常访问。</p>
 <p data-pid="8OgtvdSZ">我们会继续努力健全Rescript 的生态，打造第一个华人主导的世界流行的通用程序语言。</p>
 <p data-pid="UDZN2OFx">=============</p>
 <p data-pid="Q6SRV3-V">更新一下：写了第一篇针对中文用户的程序语言设计科普文章 <a href="https://zhuanlan.zhihu.com/p/382098633" class="internal">ReScript的特性一: 鲜为人知的Row polymorphism - 知乎 (zhihu.com)</a></p>
 <p data-pid="RN2UQ3O2">==========================================</p>
 <p data-pid="csJE4ZzU">作为国内可能是唯一的，真正意义上完整实现过编程语言和整套工具链，并且有相当国外商业用户的人，看到这个问题有点五味杂陈，说说自己的感受。<br><br>
  先说说自己的背景<br>
  自己是<a href="https://link.zhihu.com/?target=https%3A//rescript-lang.org/" class=" wrap external" target="_blank" rel="nofollow noreferrer">Rescript</a>的主要作者(<a href="https://link.zhihu.com/?target=https%3A//github.com/rescript-lang/rescript-compiler" class=" wrap external" target="_blank" rel="nofollow noreferrer">github地址</a>)，全职从事这门语言的开发已经有7年了，前三年在国外，后四年在国内。使用该语言的大公司有facebook, SAP, 索斯比，ubisoft(育碧）等。我们之前在维也纳和芝加哥等地也开过几百个人的User conferences。<br>
  使用这门语言授课的学校有常美国的Ivy League布朗大学，印度的IIT等。</p>
 <h2>设计一个有人用的程序语言需要的工作</h2>
 <ul>
  <li data-pid="S0SsIv5o">语言的卖点</li>
 </ul>
 <p data-pid="zPL_fOi1">设计一门语言是要来解决一些问题的，如果只是语法上的修饰像木兰甚至coffescript这种，可以作为一个hobby project, 但是很难称其为一门独立的语言。因为切换一门语言的成本是巨大的，需要切换整个生态系统，学习java可能只需要三两天，但是熟悉jvm的生态却可能需要几年的时间。如果使用一门新语言的好处仅仅是语法上好用，这不足以使用户进行迁移。</p>
 <p data-pid="qT8yN2R5">我当时开始设计这门语言的动机和typescript类似，但是更纯粹一些。设想的卖点主要是reliability, scalability and performance。<br><br>
  Reliability体现在类型系统比typescript更完善，从理论上杜绝了runtime type exception。<br>
  Performance主要体现在运行性能上。<br>
  Scalability主要体现在编译性能上，我们可以在100ms左右增量编译一个10,000文件的大型项目，这点很符合大公司的胃口，因为大公司的代码库很大，编译性能严重影响程序员的生产力。</p>
 <ul>
  <li data-pid="R54JEqyz">成熟的编译器</li>
 </ul>
 <p data-pid="J5T2ji9u">做一个prototype的编译器可能只需要几周时间，但是做一个真正能用的确需要几年的时间。因为编译器基本上是所有运行软件的trust base,基本上是很少有bug 的。试想如果你的语言用户写代码出问题了，老是怀疑是不是编译器出了问题，那生产效率可想而知。<br><br>
  我当时用了6个周末做了一个可以demo的编译器，后来填各种坑大概花了两年时间才比较稳定可用了。</p>
 <ul>
  <li data-pid="p5vaYQbC">好用的构建系统，包管理工具</li>
 </ul>
 <p data-pid="kmPiQX6E">光有一个编译器是不够的，用户需要组织自己的代码，导入第三方依赖。这涉及到一个易用的构建系统(build system), 包管理(package manager)。试想如果你写的编译器很快， 但构建系统很慢，那么用户的感觉依然是很慢的。</p>
 <p data-pid="zWW7RQ3M">build system和package manager 涉及到很多设计和人交互的问题，一旦引入了些糟糕的设计，因为后向兼容的问题就很难改正了。一旦牵扯到设计，就需要反复迭代，也是一个耗时耗力的过程。</p>
 <ul>
  <li data-pid="KYJiXqiV">标准库，文档</li>
 </ul>
 <p data-pid="h0W5kH0w">和二十年前不一样，现在的语言基本上都是 batteries included-- 自带一个厚重的标准库。光是标准库的API设计就要花费很多时间了，还有厚重的文档。在语言没有获得足够的popularity之前，这基本上都需要编程语言团队自己去实现，工作量可想而知。</p>
 <ul>
  <li data-pid="IYnQmqqE">IDE, debugger</li>
 </ul>
 <p data-pid="yOkhgZBt">现在的程序员已经被各种现代IDE惯坏了，如果没有好用的智能感知是很难吸引到用户的。做一个好用的IDE是很难的。不像编译器遇到错误可以直接报错退出，IDE需要一定的fault tolerance： 在错误输入的情况下依然要给出有意义的提示。这一块我比较幸运， 主要由社区的人和瑞士的一个同事来主导。</p>
 <ul>
  <li data-pid="iEFwBzbh">社区推广</li>
 </ul>
 <p data-pid="zHkrxpHR">看到这里，你会知道设计一个真正有人用的语言的工作量比你想象中大太多了。但是最烦心的工作其实是社区推广和人打交道。不像在公司都是熟人关系，社区里各种人都有。 面对asshole不能爆粗口， 因为你写出的东西可能会被其他人巧妙的“摘”出来，然后批判一番。这里面个中心酸， 说多了都是泪。</p>
 <ul>
  <li data-pid="I1SJ-Y4z">钱</li>
 </ul>
 <p data-pid="oS0DcRv5">有钱不是万能的， 没有钱却是万万不能的。按上所述，培养一个成熟的语言及其生态系统需要至少 30 man-year 的投入。团队的人水平按平均水平算，平均一人开支50万美金每年（注意是开支不是员工收入)，这个投入大概就是一个小目标。<br><br>
  这么小的投入很可能是不够的，对公司的初期回报 大部分只能是PR方面，国内的公司还面临一个问题：花了钱不一定能找到合适的人。</p>
 <h2>总结</h2>
 <p data-pid="hS6tKlJ2">做自己的语言是个很需要有情怀的事情，困难很多。但是长远意义上是一个国家在基础软件问题上的话语权的问题，还是衷心希望国内有些有情怀的公司能把这个事做起来。</p>
</body>